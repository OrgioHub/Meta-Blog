"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="6a37e3f6-4a3e-50a1-8c7b-7699a1e05cb1")}catch(e){}}();
(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[944],{701283:(e,t,i)=>{i.d(t,{Kk:()=>o,XI:()=>_,iG:()=>n,iU:()=>s,m5:()=>c,o1:()=>d,rV:()=>r,s:()=>l,xT:()=>a});let n="notification--centeredContainer--KOKEL",l="notification--topCenterNotification---nbgh notification--notification--Q5PkV text--_negText--j9g-L _overlayBase--_overlayBase--Rkj8l",a="notification--bottomRightNotification--i1z7X notification--notification--Q5PkV text--_negText--j9g-L _overlayBase--_overlayBase--Rkj8l",r="notification--bottomRightNotificationHelpIconHidden--plZlM notification--bottomRightNotification--i1z7X notification--notification--Q5PkV text--_negText--j9g-L _overlayBase--_overlayBase--Rkj8l",o="notification--icon--ZWNx5",c="notification--iconError--aqnJU notification--icon--ZWNx5",s="notification--message--6GSx7",d="notification--actions--GUX-p",_="notification--action--v-pvn"},694778:(e,t,i)=>{i.d(t,{n:()=>d});var n=i(188507),l=i(966712),a=i(915440),r=i(694687),o=i(594901),c=i(279453),s=i(872429);function d(e){let t=(0,l.kc)().omnicreate_button_permissions,i=(0,n.d4)(e=>e.currentUserOrgId),d=(0,r.sZ)(),_=!!d?.is_slides_disabled,u=(0,o.Xx)(i),m=(0,s.sy)(),E=(0,a.Rs)(c.L8O,{projectId:e},{enabled:!!e&&t}).transform(({project:e})=>e);return t?{isLoading:"loading"===E.status,canCreateDesignFile:!!E.data?.canCreateDesignFile,canCreateFigjamFile:!!E.data?.canCreateFigjamFile,canCreateSlidesFile:!!E.data?.canCreateSlidesFile,canShowCreateSitesFile:m}:{isLoading:!1,canCreateDesignFile:!0,canCreateFigjamFile:!u,canCreateSlidesFile:!!(0,l.kc)().piper&&!_,canShowCreateSitesFile:m}}},831045:(e,t,i)=>{i.d(t,{X8:()=>G,$c:()=>M,lX:()=>H});var n=i(411855),l=i(188507),a=i(115630),r=i(629019),o=i.n(r),c=i(966712),s=i(915440),d=i(860601),_=i(313496),u=i(574176),m=i(762638),E=i(939863),p=i(67294),f=i(134279),g=i(896474),h=i(809840),v=i(824189),b=i(738269),N=i(119198),I=i(662275),R=i(349410),T=i(672517),k=i(988022),w=i(102310),C=i(860178),y=i(99506),O=i(279453),D=i(741477),S=i(984968),A=i(945020),P=i(851363),F=i(206074),L=i(720488),x=i(832568),U=i(875531),M=(e=>(e.DESIGN="FILE_CREATION_DROPDOWN_DESIGN",e.WHITEBOARD="FILE_CREATION_DROPDOWN_WHITEBOARD",e.SLIDES="FILE_CREATION_DROPDOWN_SLIDES",e.DESKTOP_NEW_TAB="FILE_CREATION_DROPDOWN_DESKTOP_NEW_TAB",e.COOPER="FILE_CREATION_DROPDOWN_COOPER",e))(M||{});let B={FILE_CREATION_DROPDOWN_DESIGN:"design",FILE_CREATION_DROPDOWN_WHITEBOARD:"whiteboard",FILE_CREATION_DROPDOWN_SLIDES:"piper",FILE_CREATION_DROPDOWN_COOPER:"seascape"};function H(){let e=(0,s.Rs)(O._Dk,{orgId:null});if("loaded"!==e.status)return null;{let{teamEditRoles:t}=e.data.currentUser;return t.map(e=>e.team).filter(e=>!!(e&&e.projects&&!e.deletedAt&&e.isStarterTeam&&e.projects.length>0&&!e.restrictionsList.includes(y.P4.LOCKED)))}}function G({buttonText:e,dataTestId:t,currentDropdownType:i,teamsWithEditableProjects:r,hideOnDesktop:s,hideOnMobile:u,onSelectOverride:p}){let f=(0,l.wA)(),g=(0,l.d4)((0,D.E)(i)),h=n.useRef(null);if("FILE_CREATION_DROPDOWN_SLIDES"===i&&!(0,c.kc)().piper)return null;let v=[{displayText:(0,E.t)("file_browser.tool_bar.file_creation_dropdown_display_text"),preventDismissOnSelected:!0,render:()=>n.createElement(W,{teamsWithEditableProjects:r,currentDropdownType:i,onSelectOverride:p,dispatch:f})}],N="FILE_CREATION_DROPDOWN_DESKTOP_NEW_TAB"===i,I=n.createElement(n.Fragment,null,n.createElement(_.g,{buttonClassName:o()(m.cx.flex.itemsCenter.justifyCenter.$,N?"file_creation_dropdown--newFileDropdown--VmfcL file_creation_dropdown--newFileToolbarDropdown--GhxSW":"file_creation_dropdown--newFileBrandDropdown--7VA02 file_creation_dropdown--newFileToolbarDropdown--GhxSW",{"file_creation_dropdown--hideOnDesktop--uTcIG":s,"file_creation_dropdown--hideOnMobile--IbVAD":u}),dataTestId:t,isShowingDropdown:!1,isOnBrandColor:!N,onClick:()=>{g||f(b.j7({type:i}))},ref:h},e),h.current&&g&&n.createElement(T.fu,{name:"File Creation Dropdown Display",properties:{fileCreationDefaultsDropdownType:i}},n.createElement(F.j,{showPoint:!0,lean:"center",type:L.it.MATCH_BACKGROUND,rootAndSubmenuMaxWidth:224,minWidth:224,autoHeight:!0,onSelectItem:d.lQ,hidePointWhenContentOffScreen:!0,items:v,parentRect:h.current?.getBoundingClientRect(),dispatch:f})));if(!N){let e=B[i];return n.createElement(a.v,{mode:e},I)}return I}function W({teamsWithEditableProjects:e,currentDropdownType:t,modal:i,onSelectOverride:l,dispatch:a}){let r=(0,w.B)(),o=(0,C.TA)(),[c,s]=n.useState(!1),d=(0,S.ol)(),_=(0,x.vt)(d?.id),T=(0,R.Yz)(),y=(e,n)=>{i?a(I.Lo()):a(b.oB()),a(N.zE({state:r,editorType:j[t],team:e?(0,P.Z_)(e):void 0,folderId:n,from:A.f6.FILE_BROWSER_TOPBAR_RECENTS,openNewFileIn:A.ai.SAME_TAB,callback:e=>{(0,k.Cu)({userId:o,fileKey:e},V[t])},inFileCreationDefaultsExp:!0}))},O=e=>()=>{l?(l(e),a(b.oB())):y(e?.team,e?.project.id)},D=n.useMemo(()=>c?e:e.slice(0,3),[c,e]),F=(e,i)=>t===e&&i;return n.createElement(n.Fragment,null,n.createElement("div",{className:i?"file_creation_dropdown--dropdownHeaderModal--I0osc":"file_creation_dropdown--dropdownHeader--G-Jvv text--fontPos11--2LvXf text--_fontBase--QdLsd"},"FILE_CREATION_DROPDOWN_DESIGN"===t?(0,E.tx)("file_browser.tool_bar.create_new_design_file_in"):"FILE_CREATION_DROPDOWN_WHITEBOARD"===t?(0,E.tx)("file_browser.tool_bar.create_new_figjam_board_in"):"FILE_CREATION_DROPDOWN_SLIDES"===t?(0,E.tx)("file_browser.tool_bar.create_new_slide_deck_in"):(0,E.tx)("desktop_new_tab.create_new_file_in")),D.map(e=>{if(e.projects&&e.projects.length>0){let i=e.projects[0];if(!({FILE_CREATION_DROPDOWN_SLIDES:F("FILE_CREATION_DROPDOWN_SLIDES",i.canCreateSlidesFile),FILE_CREATION_DROPDOWN_DESIGN:F("FILE_CREATION_DROPDOWN_DESIGN",i.canCreateDesignFile),FILE_CREATION_DROPDOWN_WHITEBOARD:F("FILE_CREATION_DROPDOWN_WHITEBOARD",i.canCreateFigjamFile),FILE_CREATION_DROPDOWN_DESKTOP_NEW_TAB:!0,FILE_CREATION_DROPDOWN_COOPER:F("FILE_CREATION_DROPDOWN_COOPER",i.canCreateSlidesFile)})[t])return null;let l=(0,P.Z_)(e),a=!({FILE_CREATION_DROPDOWN_SLIDES:(0,S.rR)(l,{type:S.sK.ADD_SLIDES_FILE}),FILE_CREATION_DROPDOWN_DESIGN:(0,S.rR)(l,{type:S.sK.ADD_DESIGN_FILE}),FILE_CREATION_DROPDOWN_WHITEBOARD:(0,S.rR)(l,{type:S.sK.ADD_FIGJAM_FILE}),FILE_CREATION_DROPDOWN_DESKTOP_NEW_TAB:!0,FILE_CREATION_DROPDOWN_COOPER:(0,v.q)()&&(0,S.rR)(l,{type:S.sK.ADD_SLIDES_FILE})})[t];return n.createElement(Q,{key:e.id,currentDropdownType:t,folderId:e.projects[0].id,icon:n.createElement("div",{className:m.cx.h16.w16.flex.itemsCenter.justifyCenter.$},n.createElement(p.nl,{size:{imgSize:p.Pf.SMALL,fallbackSize:p.Pf.XSMALL},fallbackDisplay:f.U.HIDDEN,team:{id:e.id}})),text:n.createElement(h.E,{truncate:!0},e.name," / ",e.projects[0].path),onClick:O({team:e,project:i}),atStarterTeamFileLimit:a})}}),!c&&e.length>3&&n.createElement("div",{className:"file_creation_dropdown--seeMoreProjects--EXJpP"},n.createElement(Q,{currentDropdownType:t,icon:n.createElement(u.B,{svg:U.A}),text:(0,E.tx)("file_browser.tool_bar.see_all_editable_projects",{numberOfEditableProjects:e.length}),onClick:()=>s(!c)})),!T(_)&&n.createElement(n.Fragment,null,n.createElement("div",{className:i?"file_creation_dropdown--horizontalDividerFull--Xvfdt":"file_creation_dropdown--horizontalDivider--kd-2z"}),n.createElement("div",null,n.createElement(Q,{currentDropdownType:t,icon:n.createElement(g.In,{icon:"page-16"}),text:n.createElement(h.E,{truncate:!0},(0,E.tx)("sidebar.drafts")),onClick:O(null)}))))}let j={FILE_CREATION_DROPDOWN_DESIGN:y._Y.DESIGN,FILE_CREATION_DROPDOWN_WHITEBOARD:y._Y.WHITEBOARD,FILE_CREATION_DROPDOWN_SLIDES:y._Y.SLIDES,FILE_CREATION_DROPDOWN_DESKTOP_NEW_TAB:y._Y.DESIGN,FILE_CREATION_DROPDOWN_COOPER:y._Y.COOPER},V={FILE_CREATION_DROPDOWN_DESIGN:"toolbar_design_created",FILE_CREATION_DROPDOWN_WHITEBOARD:"toolbar_figjam_created",FILE_CREATION_DROPDOWN_SLIDES:"toolbar_slides_created",FILE_CREATION_DROPDOWN_DESKTOP_NEW_TAB:"toolbar_file_created",FILE_CREATION_DROPDOWN_COOPER:"toolbar_cooper_created"};function Q({icon:e,text:t,onClick:i,atStarterTeamFileLimit:l}){return n.createElement("div",{role:"link",className:"file_creation_dropdown--projectCreationListOption--vKhNM",tabIndex:0,onClick:i},n.createElement("div",{className:m.cx.flex.flexRow.wFull.overflowHidden.$},n.createElement("div",{className:m.cx.flex.itemsCenter.flexRow.gap12.wFull.overflowHidden.$},n.createElement("div",{className:m.cx.flex.w16.h16.itemsCenter.alignCenter.justifyCenter.flexShrink0.$},e),n.createElement("p",{className:m.cx.flex.flexRow.overflowHidden.flexGrow1.itemsCenter.$},t))),l&&n.createElement(g.In,{icon:"info-32"}))}},367935:(e,t,i)=>{function n(e){return e.is_widget}function l(e){return void 0!==e.current_plugin_version_id&&!e.is_widget}function a(e){return void 0!==e.duplicate_count}i.d(t,{AS:()=>n,bT:()=>l,zj:()=>a})},611047:(e,t,i)=>{i.d(t,{LP:()=>d,qQ:()=>n,qv:()=>_});var n,l=i(411855),a=i(776250),r=i(96328),o=i(939863),c=i(809840),s=i(99506);let d="cover";var _=(e=>(e.COMPONENT_PUBLISHING="component_publishing",e.VIDEO="video",e.PASSWORD_PROTECTION="password_protection",e.AUDIO="audio",e.UNLIMITED_PAGES="unlimited_pages",e.PROTOTYPE_ONLY_LINKS="prototype_only_links",e.OPEN_SESSIONS="open_sessions",e.UNLIMITED_PROJECTS="unlimited_projects",e.PRIVATE_PROJECTS="private_projects",e.UNLIMITED_FILES="unlimited_files",e))(_||{});let u={cover:{onboardingKey:d,imgSrc:"https://static.figma.com/uploads/cade95b7d3141da5e4c22a879de339d5b57b05aa",header:l.createElement(c.E,{fontSize:13,fontWeight:"medium"},(0,o.tx)("help_widget.pro_trials.stack_of_cards_widget.pro.title")),description:l.createElement(c.E,{fontSize:11,color:"secondary"},(0,o.tx)("help_widget.pro_trials.stack_of_cards_widget.pro.description")),hoverTitle:null},password_protection:{onboardingKey:"password_protection",imgSrc:"https://static.figma.com/uploads/b56379c61007d4c119dc3a32fc936ac07f5d13d5",header:l.createElement(c.E,{fontSize:13,fontWeight:"medium"},(0,o.tx)("help_widget.pro_trials.stack_of_cards_widget.password.title")),description:l.createElement(c.E,{fontSize:11,color:"secondary"},(0,o.tx)("help_widget.pro_trials.stack_of_cards_widget.password.description")),hoverTitle:l.createElement(c.E,{fontSize:12,fontWeight:"semi-bold"},(0,o.tx)("help_widget.pro_trials.stack_of_cards_widget.password.hover_text"))},component_publishing:{onboardingKey:"component_publishing",imgSrc:"https://static.figma.com/uploads/1138b4f97bb51f61ed9b2bac008de9038dfbcf75",header:l.createElement(c.E,{fontSize:13,fontWeight:"medium"},(0,o.tx)("help_widget.pro_trials.stack_of_cards_widget.library.title")),description:l.createElement(c.E,{fontSize:11,color:"secondary"},(0,o.tx)("help_widget.pro_trials.stack_of_cards_widget.library.description")),hoverTitle:l.createElement(c.E,{fontSize:12,fontWeight:"semi-bold"},(0,o.tx)("help_widget.pro_trials.stack_of_cards_widget.library.hover_text"))},audio:{onboardingKey:"audio",imgSrc:"https://static.figma.com/uploads/312167c9a97cd378f0a20d09d03376b27283dae9",header:l.createElement(c.E,{fontSize:13,fontWeight:"medium"},(0,o.tx)("help_widget.pro_trials.stack_of_cards_widget.audio.title")),description:l.createElement(c.E,{fontSize:11,color:"secondary"},(0,o.tx)("help_widget.pro_trials.stack_of_cards_widget.audio.description")),hoverTitle:l.createElement(c.E,{fontSize:12,fontWeight:"semi-bold"},(0,o.tx)("help_widget.pro_trials.stack_of_cards_widget.audio.hover_text"))},open_sessions:{onboardingKey:"open_sessions",imgSrc:"https://static.figma.com/uploads/1ee3e88ccb237a207e896dba4a67af081259590d",header:l.createElement(c.E,{fontSize:13,fontWeight:"medium"},(0,o.tx)("help_widget.pro_trials.stack_of_cards_widget.jam.title")),description:l.createElement(c.E,{fontSize:11,color:"secondary"},(0,o.tx)("help_widget.pro_trials.stack_of_cards_widget.jam.description")),hoverTitle:l.createElement(c.E,{fontSize:12,fontWeight:"semi-bold"},(0,o.tx)("help_widget.pro_trials.stack_of_cards_widget.jam.hover_text"))},unlimited_pages:{onboardingKey:"unlimited_pages",imgSrc:"https://static.figma.com/uploads/cdb490f97220f8598d6b342c873569c68ac2370e",header:l.createElement(c.E,{fontSize:13,fontWeight:"medium"},(0,o.tx)("help_widget.pro_trials.stack_of_cards_widget.unlimited_pages.title")),description:l.createElement(c.E,{fontSize:11,color:"secondary"},(0,o.tx)("help_widget.pro_trials.stack_of_cards_widget.unlimited_pages.description")),hoverTitle:l.createElement(c.E,{fontSize:12,fontWeight:"semi-bold"},(0,o.tx)("help_widget.pro_trials.stack_of_cards_widget.unlimited_pages.hover_text"))},video:{onboardingKey:"video",imgSrc:"https://static.figma.com/uploads/0e9be58e80f8d577fc4b1028f07a903bca68c970",header:l.createElement(c.E,{fontSize:13,fontWeight:"medium"},(0,o.tx)("help_widget.pro_trials.stack_of_cards_widget.video.title")),description:l.createElement(c.E,{fontSize:11,color:"secondary"},(0,o.tx)("help_widget.pro_trials.stack_of_cards_widget.video.description")),hoverTitle:l.createElement(c.E,{fontSize:12,fontWeight:"semi-bold"},(0,o.tx)("help_widget.pro_trials.stack_of_cards_widget.video.hover_text"))}},m={component_publishing:"seen_pro_onboarding_component_publishing_overlay",video:"seen_pro_onboarding_video_overlay",password_protection:"seen_pro_onboarding_password_protection_overlay",audio:"seen_pro_onboarding_audio_overlay",unlimited_pages:"seen_pro_onboarding_unlimited_pages_overlay",prototype_only_links:"seen_pro_onboarding_prototype_only_links_overlay",open_sessions:"seen_pro_onboarding_open_sessions_overlay",unlimited_files:"seen_pro_onboarding_unlimited_files_overlay",unlimited_projects:"seen_pro_onboarding_unlimited_projects_overlay",private_projects:"seen_pro_onboarding_private_projects_overlay"};(e=>{e.ACTIVELY_TRIGGERED_ONBOARDING_BLOCKED_EVENT_ID="Pro Trials V3: Actively Triggered Onboarding Blocked",e.getOnboardingStepUserFlag=function(e){return m[e]},e.getOnboardingStepTrackingContext=function(e){return`Pro Trials V3 Onboarding: ${(0,r.vE)(e)}`},e.getOnboardingStepTriggerEventId=function(e){return`triggered_pro_trials_v3_${e}_onboarding`},e.trackActivelyTriggeredOnboardingStepBlocked=function(t,i){(0,a.sx)(e.ACTIVELY_TRIGGERED_ONBOARDING_BLOCKED_EVENT_ID,{blockedOnboardingFeature:i,blockingOverlayId:t})},e.getOnboardingCardsStackContentProps=function({editorType:e,isVoiceEnabled:t,isWorkshopModeEnabled:i}){let n=[d,"password_protection","component_publishing","unlimited_pages","video"];t&&n.push("audio");let l=[d,"password_protection"];return t&&l.push("audio"),i&&l.push("open_sessions"),(({[s._Y.DESIGN]:n,[s._Y.SLIDES]:n,[s._Y.SITES]:n,[s._Y.COOPER]:n,[s._Y.WHITEBOARD]:l})[e]||[]).map(e=>u[e])}})(n||(n={}))},741477:(e,t,i)=>{i.d(t,{E:()=>a});var n=i(302245);let l=(0,n.Mz)(e=>e.dropdownShown,e=>e?.type),a=e=>(0,n.Mz)(l,t=>t===e)},395116:(e,t,i)=>{i.d(t,{Dd:()=>m,X2:()=>u,Zo:()=>_,fN:()=>p,hI:()=>E});var n=i(966712),l=i(790724),a=i(286640),r=i(27087),o=i(939863),c=i(980820),s=i(725561);let d="user-notifications-sticky-filter-tab",_=(0,c.nF)((e,t)=>{if(!t.userInitiated){e.dispatch(s.uR(t));return}let i="0"==t.notificationSpaceId?null:t.notificationSpaceId,n={bell:t.isBellStateHigh,current_org_id:i};return(0,l.Q)({requestPromise:r.Ay.put("/api/user_notifications_bell",n),fallbackError:(0,o.t)("user_notification.an_error_occurred_marking_all_as_read"),store:e,next:e.dispatch,action:s.uR(t)})}),u=(0,c.nF)((e,t)=>{if(!t.userInitiated){e.dispatch(s.Q$(t));return}return(0,l.Q)({requestPromise:r.Ay.put("/api/user_notifications_bell/community/clear"),fallbackError:(0,o.t)("user_notification.an_error_occurred_marking_all_as_read"),store:e,next:e.dispatch,action:s.Q$(t)})});function m(){return a.x4?.getItem(d)||"all"}function E(e){return a.x4?.setItem(d,e)}function p(){return(0,n.w0)().notif_blue_unread_indicator}},749336:(e,t,i)=>{i.d(t,{d:()=>L});var n=i(411855),l=i(188507),a=i(776250),r=i(915440),o=i(860601),c=i(743282),s=i(493323),d=i(827586),_=i(939863),u=i(278733),m=i(553015),E=i(975350),p=i(103907),f=i(696097),g=i(259927),h=i(654034),v=i(920037),b=i(860178),N=i(279453),I=i(531827),R=i(440535),T=i(91425),k=i(238559),w=i(113292),C=i(728268),y=i(636662),O=i(57289),D=i(448879),S=i(757207);let A="quick_reply_thread_view--headerButton--wmkPJ",P=new class{get file(){throw Error("Data should not be accessed directly from quick replies, we need to create standard API for comments to use this view. see: file_comments_api.tsx")}get fileFollower(){throw Error("Data should not be accessed directly from quick replies, we need to create standard API for comments to use this view. see: file_comments_api.tsx")}get comments(){throw Error("Data should not be accessed directly from quick replies, we need to create standard API for comments to use this view. see: file_comments_api.tsx")}},F=null,L=(0,n.forwardRef)((e,t)=>{let i=(0,r.Rs)(N.Uhm,{fileKey:e.quickReplyInfo.fileKey,rootId:e.quickReplyInfo.threadId});return n.createElement("div",{className:"quick_reply_thread_view--container--WPlnN",ref:t},n.createElement("div",{className:"quick_reply_thread_view--column--UrAD4"},n.createElement("div",{className:"quick_reply_thread_view--header--BHlje"},n.createElement("div",{className:A},!e.hideOverflowMenu&&n.createElement(m.$,{icon:e.closeIcon,variant:"text",onClick:e.onClose})),n.createElement("div",{className:"quick_reply_thread_view--fileName--S2twU"},"loaded"===i.status&&i.data.file&&i.data.file.name),n.createElement("div",{className:A},e.hideOverflowMenu?n.createElement(m.$,{icon:e.closeIcon,variant:"text",onClick:e.onClose}):n.createElement("div",{style:{display:"none"}},n.createElement(m.$,{icon:"dots-32",variant:"text"})))),n.createElement(x,{quickReplyInfo:e.quickReplyInfo,result:i,hideOverflowMenu:e.hideOverflowMenu})))});function x(e){let t=(0,b.iZ)();return t?"loading"===e.result.status||"disabled"===e.result.status?n.createElement(s.qc,{size:"medium"}):"errors"===e.result.status?n.createElement("div",{className:"quick_reply_thread_view--errorState--Re4UD"},(0,_.t)("quick_reply.unable_to_load_thread")):null==e.result.data.file?n.createElement("div",null,(0,_.t)("quick_reply.unable_to_load_thread")):n.createElement(U,{quickReplyInfo:e.quickReplyInfo,result:e.result,user:t,hideOverflowMenu:e.hideOverflowMenu}):null}function U(e){let{quickReplyInfo:t,result:i,user:r}=e,{fileKey:o,threadId:c}=t,s=(0,f.dr)({args:{fileKey:o,rootId:c},subscription:i}),d=(0,l.wA)(),{file:u}=i.data,g=(0,n.useMemo)(()=>(0,I.mp)({currentOrgId:u.org?.id,teamId:u.team?.id,fileKey:o,isOrgGuest:u.org?.currentOrgUser?.permission==="guest",users:[]}),[u.org?.id,u.team?.id,o,u.org?.currentOrgUser?.permission]),{mobileCommentThread:b}=u,{currentUserCommentReadStatus:N}=u,T=b.find(e=>e.id===c),k=b.reduce((e,t)=>t.createdAt.getTime()>e.createdAt.getTime()?t:e).thumbnailUrl,w=(0,l.d4)(e=>e.comments.savingCommentUuids),C=(0,l.d4)(e=>e.comments.lgPendingUuidToServerIdMap);if(!T)return n.createElement("div",null,(0,_.t)("quick_reply.unable_to_load_thread"));let y=b.map(e=>(0,h.G9)(r.id,T,e,N??h.gj,w,C,e.attachments)),O={id:T.id,key:o,anchored:!1,canvasPosition:null,selectionAnchorCanvasPosition:null,comments:y,messageMeta:y[0].message_meta,page:T.clientMeta?.pageId||null,isActive:!0,replyCount:b.length-1,isCanvasMention:!1,pageName:T.clientMeta?.pageId||null,sidebarItemType:R.kT.COMMENT_THREAD},D={api:s,status:i.status,data:P,threads:{status:i.status,data:[O],errors:i.errors},errors:i.errors,isResolvedLoaded:!0,isUnresolvedLoaded:!0};return n.createElement(p.j9.Provider,{value:D},n.createElement("div",{className:"quick_reply_thread_view--mouseContainer--qyIpH",onMouseEnter:()=>{let e=y.some(e=>e.isUnread);F=setTimeout(()=>{s.commentReceipts&&e&&(d(E.AY({receiptsAPI:s.commentReceipts,thread:O})),(0,a.sx)("Comment Thread Read",{commentThreadId:c,threadType:"file_browser_quick_reply"}))},1e3)},onMouseLeave:()=>{F&&clearTimeout(F)}},n.createElement("div",{className:"quick_reply_thread_view--preview--I47Ds"},n.createElement("img",{src:k||void 0,className:"quick_reply_thread_view--previewImage--gSK-n",style:{backgroundColor:(0,v.C)(u.checkpointClientMeta)},alt:"thumbnail"}),n.createElement("a",{href:t.deeplink??`/file/${o}?fuid=${r.id}&#${c}`,className:"quick_reply_thread_view--openFileButton--RBtVz"},n.createElement(m.$,{variant:"text",icon:"new-window-32"}))),n.createElement(B,{loadedComments:y,user:r,quickReplyInfo:t,commentMentionables:g,hideOverflowMenu:e.hideOverflowMenu})))}function M(){let e=(0,l.wA)(),t=(0,l.d4)(e=>e.dropdownShown||null),i=(0,b.iZ)(),a=(0,T.v)();if(!t||t.type!==g.VJ)return null;let{comment:r,parentRect:o,thread:c,isUnread:s}=t.data;return n.createElement(C.V,{dispatch:e,comment:r,parentRect:o,currentUser:i,isUnread:s,thread:c,copyLink:a})}function B(e){let{loadedComments:t,user:i,quickReplyInfo:a,commentMentionables:r,hideOverflowMenu:s}=e,{fileKey:m,threadId:f}=a,g=(0,l.wA)();(0,n.useEffect)(()=>{g(E.Fm({threadId:f}))},[g,f]);let h=(0,l.d4)(e=>e.comments.typeahead),v=(0,l.d4)(e=>e.comments.editingComment),b=(0,l.d4)(e=>e.dropdownShown||null),N=(0,l.d4)(e=>e.comments.activeThread?.id),I=(0,l.d4)(e=>e.comments.threads),T=N&&I[N]||null,A=T?.reply.messageMeta||[],{submitReply:P,updateMessage:F,submitEdit:L}=function(e){let t=(0,l.wA)(),i=(0,p.I_)().writeAPI,a=p._9()?.threads;return{submitReply:n.useCallback(e=>{if(!i){console.error("Calling submitReply with no write API");return}a&&"loaded"===a.status&&a.data.find(t=>t.id===e.threadId)&&(e.onCommentValidationFailure=(n,l,a,r)=>E.dB(i,t,n,l,a,r,e.uuid,D.y),t(E.lV({...e,commentsWriteApi:i,commentsConfiguration:D.y,trackingContext:{feature:"web_quick_reply_screen"}})))},[t,a,i]),updateMessage:n.useCallback(i=>{t(E.k7({threadId:e,messageMeta:i}))},[t,e]),submitEdit:n.useCallback((e,i)=>{t(E._v({comment:e,messageMeta:i}))},[t])}}(f),x=(0,w._B)(),U=n.useRef(null),B=n.useRef(null),H=n.useRef(null),[G,W]=n.useState(null),[j,V]=n.useState(n.useRef(null)),Q=n.useRef(null),z=0,q=0,Y=0;Q.current&&Q.current.offsetParent&&(z=Q.current.offsetWidth,q=Q.current.offsetLeft,Y=Q.current.offsetParent.clientHeight-Q.current.offsetTop);let $=e=>e||{x:0,y:0},K=n.useRef(null);(0,n.useEffect)(()=>{K.current&&K.current.scrollToBottom()},[]);let J=[...new Set(t.map(e=>e.user.handle))],X=t.find(e=>e.id===f);return X?n.createElement(n.Fragment,null,n.createElement("div",{style:u.sx.flex1.$}),n.createElement(d.P,{className:"quick_reply_thread_view--bottomAnchoredScrollContainer--5-F87",useBottomPinning:!0,ref:K,enableScrollShadow:!0},n.createElement("div",{className:"quick_reply_thread_view--reverseColumn--ur8Yx"},t.slice().reverse().map((e,l)=>n.createElement(C.I,{editorRef:H,key:`thread-comment-${e.id}`,dispatch:g,user:i,thread:{comments:t,key:m,id:f},setHyperlinkLocation:W,hyperlinkLocation:G,setHyperlinkEditorRef:V,comment:e,typeahead:h,mentionables:r,prevAuthor:0===l?null:t[l-1].user_id,index:l,editingComment:v,submitEdit:L,dropdownShown:b,viewportPositionFromClientPosition:$,editorOnInsert:x.editorOnInsert,editorOnClear:x.editorOnClear,threadPosition:{x:0,y:0},setIsEditorFocused:o.lQ,showEditedIndicator:!!e.edited_at,hideOverflowMenu:s,hideReactions:!1,hideEmojiPicker:!1,allowAttachments:!1,hideResolve:!1,setResolved:o.lQ,mountInputFocused:!0,editorType:"comment-editor-thread",isQuickReplyThreadView:!0})))),n.createElement(y.K,{editorRef:B,dispatch:g,user:i,typeahead:h,mentionables:r,threadPosition:null,messageMeta:A,submitText:(0,_.t)("comments.reply"),placeholderText:(0,_.t)("comments.reply"),setHyperlinkLocation:W,hyperlinkLocation:G,setHyperlinkEditorRef:V,onCancel:o.lQ,onSubmit:()=>{P({threadId:f,threadUuid:X.uuid||void 0,uuid:(0,c.g)()})},onComposeFocus:void 0,editorOnInsert:x.editorOnClear,editorOnClear:x.editorOnInsert,viewportPositionFromClientPosition:$,isDisabled:!1,mountInputFocused:!0,updateMessage:F,setIsEditorFocused:o.lQ,isEmojiPickerDisabled:null!==v,hideEmojiPicker:!1,allowAttachments:!1,recordingKey:R.Dw.quickReply,className:S.MJ,threadId:f,fileKey:m,editingExistingComment:!1,editorType:"comment-editor-reply",authorNames:J,replyContainerRef:Q}),n.createElement(k.rf,{decoratorsRef:U,onClear:x.onClear,onInsert:x.onInsert,width:z,direction:O.ri.UPWARDS,positionFromBottom:{left:q,bottom:Y}}),n.createElement(M,null)):null}},368361:(e,t,i)=>{i.d(t,{R:()=>J});var n=i(411855),l=i(188507),a=i(776250),r=i(540193),o=i(201888),c=i(517333),s=i(799569),d=i(946689),_=i(493323),u=i(827586),m=i(939863),E=i(410424),p=i(74021),f=i(941381),g=i(225266),h=i(446686),v=i(442597),b=i(944682),N=i(662275),I=i(445092),R=i(115826),T=i(756085),k=i(27703),w=i(860178),C=i(820642),y=i(99506),O=i(691205),D=i(596607),S=i(555328),A=i(813408),P=i(754168),F=i(237870),L=i(488578),x=i(548593),U=i(761939),M=i(933464),B=i(133648),H=i(227565);let G=(0,x.rw)();function W(e){let[t,i]=n.useState();return n.useEffect(()=>{(0,o.oU)(location.href).then(e=>i(e))},[]),n.createElement("div",{className:H.bx},n.createElement("div",{className:H.Uz},e.tab===U.gr.PLUGINS?(0,m.t)("community.universal_posting_modal.desktop_callout.plugins"):(0,m.t)("community.universal_posting_modal.desktop_callout.widgets")),n.createElement(d.N_,{onClick:()=>{(0,a.sx)(t?"community_publish_open_desktop_clicked":"community_publish_get_desktop_clicked",{resourceType:e.tab===U.gr.PLUGINS?S.bD.PLUGIN:S.bD.WIDGET}),t&&(0,o.Sr)(location.href,o.B3.UNIVERSAL_POSTING_MODAL)},href:t?void 0:"https://www.figma.com/downloads/",className:H.nf,target:"_blank",trusted:!0},void 0===t?"":t?` ${(0,m.t)("community.universal_posting_modal.desktop_open")}`:` ${(0,m.t)("community.universal_posting_modal.desktop_get")}`))}function j(e){return e.selectedTab===U.gr.FILES?n.createElement(U.fV,{activeFileKey:e.activeFileKey,setActiveFile:e.setActiveFile,deselectActiveFile:e.deselectActiveFile,filterFn:e.filterFn}):e.selectedTab===U.gr.PLUGINS?n.createElement(Q,{activeResource:e.activeResource,setActiveResource:e.setActiveResource,deselectActiveResource:e.deselectActiveResource}):n.createElement(V,{activeResource:e.activeResource,setActiveResource:e.setActiveResource,deselectActiveResource:e.deselectActiveResource})}function V(e){let{invitedWidgets:t,pendingReviewWidgets:i,approvedWidgets:l,developmentWidgets:a}=(0,T.E$)(),r=t=>!!e.activeResource&&("localFileId"in e.activeResource&&"localFileId"in t?e.activeResource.localFileId===t.localFileId:"id"in e.activeResource&&"id"in t?e.activeResource.id===t.id:void 0);return c.eD?t.length+i.length+l.length+a.length===0?n.createElement(U.n6,{tab:U.gr.WIDGETS}):n.createElement("div",{className:H.BA,onClick:e.deselectActiveResource,role:"presentation"},t.map(e=>n.createElement(M.sp.Tile,{key:e.id,plugin:e,containerClassName:r(e)?H.Ij:H.$z})),a.map(t=>n.createElement(M.ke.Tile,{plugin:t,onClick:i=>{i.stopPropagation(),e.setActiveResource(t)},key:t.localFileId,containerClassName:r(t)?H.Ij:H.$z,showEditorTypeIcon:!0})),[...i,...l].map(t=>n.createElement(M.tY.Tile,{key:t.id,plugin:t,onClick:i=>{i.stopPropagation(),e.setActiveResource(t)},containerClassName:r(t)?H.Ij:H.$z}))):n.createElement(W,{tab:U.gr.WIDGETS})}function Q(e){let{invitedPlugins:t,pendingReviewPlugins:i,approvedPlugins:l,developmentPlugins:a}=(0,T.LR)(),r=t=>!!e.activeResource&&("localFileId"in e.activeResource&&"localFileId"in t?e.activeResource.localFileId===t.localFileId:"id"in e.activeResource&&"id"in t?e.activeResource.id===t.id:void 0);return c.eD?a.length+i.length+l.length+t.length===0?n.createElement(U.n6,{tab:U.gr.PLUGINS}):n.createElement("div",{className:H.BA,onClick:e.deselectActiveResource,role:"presentation"},t.map(e=>n.createElement(M.sp.Tile,{key:e.id,plugin:e,containerClassName:r(e)?H.Ij:H.$z})),a.map(t=>n.createElement(M.ke.Tile,{plugin:t,onClick:i=>{i.stopPropagation(),e.setActiveResource(t)},key:t.localFileId,containerClassName:r(t)?H.Ij:H.$z,showEditorTypeIcon:!0})),[...i,...l].map(t=>n.createElement(M.tY.Tile,{key:t.id,plugin:t,onClick:i=>{i.stopPropagation(),e.setActiveResource(t)},containerClassName:r(t)?H.Ij:H.$z}))):n.createElement(W,{tab:U.gr.PLUGINS})}function z(e){return c.eD?n.createElement("div",{className:H.q5},(0,m.t)("community.universal_posting_modal.plugin_info.available",{numPlugins:e.numPlugins})):n.createElement("div",{className:H.q5},(0,m.t)("community.universal_posting_modal.plugin_info.unavailable"))}function q(e){return c.eD?n.createElement("div",{className:H.q5},(0,m.t)("community.universal_posting_modal.widget_info.available",{numWidgets:e.numWidgets})):n.createElement("div",{className:H.q5},(0,m.t)("community.universal_posting_modal.widget_info.unavailable"))}function Y(e){let t;let i=(0,l.d4)(e=>e.user.email),a=(0,l.d4)(e=>e.orgById);if((0,l.d4)(e=>(0,D.Yj)(e))){let l=e.currentOrgId&&a[e.currentOrgId]?a[e.currentOrgId].name:null;t=n.createElement("div",{className:H.Js},l&&n.createElement(n.Fragment,null,l,n.createElement("span",null,"\xa0\xb7\xa0")),i)}else t=n.createElement("div",{className:H.Js},i);return n.createElement("div",{className:H.Yk},e.selectedTab===U.gr.FILES&&(0===e.numFiles?n.createElement("div",{className:H.q5},(0,m.t)("community.universal_posting_modal.file_info.available",{numFiles:e.numFiles})):n.createElement(U.IW,{query:e.searchQuery,setQuery:e.setSearchQuery,setSearchResults:e.setSearchResults})),e.selectedTab===U.gr.PLUGINS&&n.createElement(z,{numPlugins:e.numPlugins}),e.selectedTab===U.gr.WIDGETS&&n.createElement(q,{numWidgets:e.numWidgets}),t)}function $(e){let t=(0,l.wA)(),i=(0,w.Pc)(),r=[],o={[U.gr.FILES]:(0,m.t)("community.view_bar.files"),[U.gr.PLUGINS]:(0,m.t)("community.view_bar.plugins"),[U.gr.WIDGETS]:(0,m.t)("community.view_bar.widgets")};return Object.keys(o).forEach(l=>{let c=o[l];r.push(n.createElement(G,{tab:l,mobileNavTabTitle:c,selectedTab:e.selectedTab,key:l,onClick:()=>{e.activeSearchQuery&&(t(I._z({})),t(I.ky())),(0,a.sx)("publish_type_changed",{userId:i.id,resourceType:c}),e.setSelectedTab(l)}},c))}),n.createElement("div",{className:H.Lm},n.createElement("div",{className:H.KE},r),n.createElement(s.s_,{className:H.g8,dispatch:()=>{(0,a.sx)("community_publish_modal",{step:R.M.CLOSED}),t(N.Ce())}}))}var K=(e=>(e[e.Fetched=0]="Fetched",e[e.Fetching=1]="Fetching",e[e.NeverFetched=2]="NeverFetched",e))(K||{});let J=(0,F.Ju)(function(e){let t=(0,w.Pc)(),i=(0,l.wA)(),o=(0,l.d4)(e=>!!e.user),c=(0,l.d4)(e=>e.currentUserOrgId),s=(0,r.ql)(c),D="loaded"===s.status,[F,x]=n.useState(2),[M,G]=n.useState({}),W=(0,T.Im)(),V=(0,k.ud)(),Q=(0,T.CI)(),z=(0,T.Dy)(),q=Object.keys(V).length;(0,O.IT)((0,f.se)()),(0,O.IT)((0,f.fd)()),n.useEffect(()=>{i(I._z({})),o&&(i(p._J()),i(g.aq()));let e=document.body.style.overflowY;return document.body.style.overflowY="hidden",()=>{document.body.style.overflowY=e}},[]),n.useEffect(()=>{if(!D||2!==F)return;let e=s.data.map(e=>e.key);0!==e.length&&(x(1),P.S.getHubFileDuplicates({fileKeys:e}).then(e=>{G(e.data.meta),x(0)}))},[F,D,s.data]);let K=n.useCallback(e=>{let t=M[e.key],i=e.editor_type===y._Y.SLIDES;return!t&&!i},[M]),J=()=>{eo&&i(I.ky()),(0,a.sx)("community_publish_modal",{user:t.id,step:R.M.CLOSED}),i(N.Ce())},X=async e=>{await i(E.rH({fileKey:e}))},Z=async e=>{e&&(et(e),V[e.key]||i(b.yJ({file:e})),await X(e.key))},[ee,et]=n.useState(null),ei=()=>et(null),[en,el]=n.useState(null),[ea,er]=n.useState(U.gr.FILES),[eo,ec]=n.useState(""),[es,ed]=n.useState([]),e_=n.useCallback(e=>{ed(e&&e.filter(e=>K(e.model)))},[K]);if(!o)return n.createElement(n.Fragment,null);let eu=D&&0===F;return n.createElement(L.Nb,{size:"any",className:H.aq,hide:J},n.createElement($,{activeSearchQuery:eo,selectedTab:ea,setSelectedTab:er}),n.createElement(Y,{selectedTab:ea,currentOrgId:c,searchQuery:eo,setSearchQuery:ec,setSearchResults:e_,numPlugins:Q,numWidgets:z,numFiles:q}),n.createElement(u.P,{className:H.jG,hideScrollbar:!0},!eu&&n.createElement("div",{className:H.g4},n.createElement(_.kt,{size:"small"})),eo&&n.createElement(U.fp,{activeSearchQuery:eo,activeFileKey:ee?.key||null,setActiveFile:Z,deselectActiveFile:ei,searchResults:es}),eu&&!eo&&n.createElement(j,{selectedTab:ea,activeFileKey:ee?.key||null,setActiveFile:Z,deselectActiveFile:ei,activeResource:en,setActiveResource:el,deselectActiveResource:()=>el(null),filterFn:K})),n.createElement("div",{className:H.qr},n.createElement("div",{className:H.PJ},(0,m.t)("community.universal_posting_modal.footer.choose_resource"),n.createElement(d.CY,{href:"https://help.figma.com/hc/articles/360040035974-Publish-Community-files",target:"_blank",trusted:!0},(0,m.t)("community.universal_posting_modal.footer.learn_more"))),n.createElement("div",{className:H.GC},n.createElement(B.M4,{onClick:J},(0,m.t)("general.cancel")),n.createElement(B.UC,{disabled:ea===U.gr.FILES?!ee:ea===U.gr.PLUGINS||ea===U.gr.WIDGETS?!en:void 0,onClick:()=>{if(ea===U.gr.FILES)ee&&((0,a.sx)("community_publish_modal",{user:t.id,step:R.M.DETAILS,resourceType:S.bD.HUB_FILE,fileKey:ee.key,fileName:ee.name}),i((0,h.t)({fileKey:ee.key,isFullscreenOpen:!1,entryPoint:A.k2.UNIVERSAL_POSTING,canvasThumbnailPromise:(0,C.$2)(ee.key,t),source:e.source})),et(null));else if((ea===U.gr.PLUGINS||ea===U.gr.WIDGETS)&&en){let e="localFileId"in en?en:W[en.id],n=e.localFileId;(0,a.sx)("community_publish_modal",{user:t.id,step:R.M.DETAILS,resourceType:ea===U.gr.PLUGINS?S.bD.PLUGIN:S.bD.WIDGET,pluginId:e.plugin_id,pluginName:e.name,localFileId:n}),i((0,v.r)({localFileId:n,entryPoint:A.k2.UNIVERSAL_POSTING})),el(null)}}},(0,m.t)("general.next")))))},"Universal Posting Modal")},706638:(e,t,i)=>{i.d(t,{P:()=>F,v:()=>D});var n=i(411855),l=i(188507),a=i(598045),r=i(539321);if(443==i.j)var o=i(395096);var c=i(776250),s=i(358145),d=i(395900),_=i(268537),u=i(493323),m=i(135876),E=i(827586),p=i(32863),f=i(574176),g=i(939863),h=i(738269),v=i(15859),b=i(318812),N=i(29680),I=i(463592),R=i(103271),T=i(720488),k=i(406158),w=i(780634);if(443==i.j)var C=i(949207);if(443==i.j)var y=i(156238);if(443==i.j)var O=i(432023);var D=(e=>(e.LOADED="post-to-feed-view-loaded",e.SELECT_NODE="post-to-feed-select-node",e))(D||{});function S(e){return n.createElement("div",{className:null!==e.isSelectedIdx?w.El:w.Vs,onClick:e.onClick,role:"button",tabIndex:0,ref:t=>{t&&e.observe(t)},"data-observer-guid":e.node.guid},n.createElement("div",{className:w.h3,style:{backgroundColor:e.backgroundColor}},n.createElement(m.x,{isLoading:!e.thumbnailUrl},()=>n.createElement("img",{className:w.xn,src:e.thumbnailUrl,alt:"",draggable:!1}))),n.createElement("div",{className:w.JO},n.createElement("div",{className:w.qp},e.node.name)),null!==e.isSelectedIdx&&1!==e.totalNumSelected&&n.createElement("div",{className:w.Jx},e.isSelectedIdx+1))}function A(e){let{toggleSelectNode:t}=e,i=(e.pageNode&&(0,r.colorToHex)(e.pageNode.backgroundColor))??"",[l,a]=n.useState(!1),o=n.useCallback(n=>{t(n,{pageId:e.pageNode.guid,pageBackgroundColor:i})},[t,e.pageNode.guid,i]);return n.createElement("div",{className:w.RW},e.showCollapsibleHeader&&n.createElement("div",{className:w.Vr,onClick:()=>a(e=>!e),role:"button",tabIndex:0},l?n.createElement(f.B,{svg:O.A,className:w.Rq}):n.createElement(f.B,{svg:C.A,className:w.Rq}),e.pageNode.name,"\xa0",n.createElement("span",{className:w.Du},"\xb7 ",e.nodes.length)),!l&&n.createElement("div",{className:w.Mc},e.nodes.map(t=>{let l=e.selectedNodeGuids?.indexOf(t.guid)??null;return n.createElement(S,{key:`node-${t.guid}`,node:t,thumbnailUrl:e.thumbnailByGuid[t.guid]?.url??"",backgroundColor:i,isSelectedIdx:-1===l?null:l,onClick:()=>o(t.guid),totalNumSelected:e.selectedNodeGuids?.length??null,observe:e.observe})})))}let P="feed-post-page-selector-menu";function F(){let e=n.useCallback((e,t)=>{let i=window.parent;window.self.origin===i.origin&&i&&i.postMessage({type:e,data:t})},[]),t=n.useRef(new d.jk("feed_post_to_file_load",{}));n.useEffect(()=>{t.current.start()},[]);let i=(0,N.aV)(),r=(0,N.eY)(),m=(0,l.d4)(e=>e.openFile?.key);n.useEffect(()=>{if(!i){t.current.stop();let i=t.current.getElapsedTime();(0,c.sx)("team_feed.post_from_file.file_load",{elapsedMs:i,fileKey:m}),e("post-to-feed-view-loaded",!0)}},[i,e,m]);let C=(0,l.d4)(e=>e.mirror.appModel.pagesList),O=n.useMemo(()=>C.reduce((e,t)=>({...e,[t.nodeId]:r.get(t.nodeId)}),{}),[C,r]),D=(0,l.wA)(),S=n.useMemo(()=>Object.values(O).flatMap(e=>e?e.uiOrderedChildren.map(t=>{let i=r.get(t);return i&&("FRAME"===i.type||"SECTION"===i.type)?{...i,pageId:e.guid,name:i?.name}:null}).filter(e=>e):[]).filter(e=>null!==e),[O,r]),F=n.useMemo(()=>{let e={};for(let t of S)e[t.pageId]?e[t.pageId].push(t):e[t.pageId]=[t];return e},[S]),L=n.useMemo(()=>new I.Ef(S,{keys:["name"]}),[S]),[x,U]=n.useState(""),[M,B]=n.useState(null),[H]=(0,o.A)(x,200),G=n.useCallback(e=>{B(L.search(e))},[L]),W=n.useMemo(()=>{if(null===M)return null;let e={};for(let t of M)e[t.pageId]?e[t.pageId].push(t):e[t.pageId]=[t];return e},[M]);n.useEffect(()=>{""!==H&&G(H)},[H,G]);let j=(0,b.Um)(),V=n.useRef(null),[Q,z]=n.useState(null);n.useEffect(()=>{if(Q||!r||!F||0===Object.keys(F).length)return;let e=r.get(Object.keys(F)[0]);e&&z(e)},[Q,F,r]);let[q,Y]=n.useState({}),[$,K]=n.useState([]),J=(0,s.ZC)($),X=n.useRef(null),[Z,ee]=n.useState([]),et=n.useCallback(e=>{let t=[];e.forEach(e=>{if(e.isIntersecting&&e.target instanceof HTMLElement){let i=e.target.dataset?.observerGuid;i&&t.push(i)}}),ee(t)},[]),ei=n.useMemo(()=>new IntersectionObserver(et,{threshold:[.25]}),[et]),en=n.useCallback(e=>{ei&&ei.observe(e)},[ei]),[el,ea]=n.useState({});n.useEffect(()=>{if(0===Z.length)return;let e=Z.filter(e=>!el[e]);0!==e.length&&(0,v.Jr)().loadAllImagesUnder(e,a.MoD.NON_ANIMATED_ONLY,"feed.postFromFile").then(()=>{e.forEach(e=>{setTimeout(()=>{ea(t=>{if(t[e])return t;let i=(0,k.BO)(e);return{...t,[e]:{url:URL.createObjectURL(new Blob([i])),data:i}}})},0)})})},[Z,el]),n.useEffect(()=>{$!==J&&e("post-to-feed-select-node",$.map(e=>({guid:e,thumbnail:el[e].data,backgroundColor:q[e]})))},[J,$,e,el,q]);let er=n.useCallback((e,t)=>{el[e]&&(Y(i=>t.pageBackgroundColor?{...i,[e]:t.pageBackgroundColor}:i),K(t=>t.includes(e)?t.filter(t=>e!==t):t.length>=R.e3?t:[...t,e]))},[el]);return F&&0===Object.keys(F).length?n.createElement("div",{className:w.se},(0,g.t)("fig_feed.no_top_level_nodes")):Q?n.createElement("div",{className:w.kL},n.createElement("div",{className:w.Y},n.createElement(p.IW,{query:x,className:w.ON,onChange:U,clearSearch:()=>{U(""),B(null)},focusOnMount:!1,iconClassName:w.qc,placeholder:(0,g.t)("fig_feed.search_frames")}),""===x&&n.createElement(n.Fragment,null,n.createElement("div",{role:"button",ref:V,onClick:()=>{j?.type===P?D(h.oB()):D(h.j7({type:P}))},tabIndex:0,className:w.YZ},n.createElement("div",null,Q.name),n.createElement(f.B,{svg:y.A,width:"8px",autosize:!0})),V.current&&j?.type===P&&n.createElement(T.Cf,{showPoint:!1,targetRect:V.current.getBoundingClientRect(),propagateCloseClick:!0},Object.keys(F).map(e=>n.createElement(_.MM,{key:e,onClick:()=>z(O[e]),checked:Q.guid===e},O[e].name))))),n.createElement(E.P,{hideScrollbar:!0,className:w.jG,innerClassName:w.hu,scrollContainerRef:X},""===x&&n.createElement(A,{pageNode:Q,nodes:F[Q.guid]||[],thumbnailByGuid:el,selectedNodeGuids:$,toggleSelectNode:er,observe:en}),""!==x&&(null===W?n.createElement("div",{className:w.Do},n.createElement(u.kt,{size:"large"})):Object.entries(W).length>0?Object.entries(W).map(([e,t])=>n.createElement(A,{key:e,pageNode:O[e],nodes:t,thumbnailByGuid:el,selectedNodeGuids:$,toggleSelectNode:er,showCollapsibleHeader:!0,observe:en})):n.createElement("div",{className:w.Lp},n.createElement("div",null,(0,g.tx)("fig_feed.no_frames_matching",{searchQuery:n.createElement(n.Fragment,null,n.createElement("span",{className:w.ZF},x))})))))):null}},313496:(e,t,i)=>{i.d(t,{g:()=>s});var n=i(411855),l=i(629019),a=i.n(l),r=i(574176),o=i(762638),c=i(783423);let s=n.forwardRef((e,t)=>{let i=o.cx.h16.w16.ml1.flex.justifyCenter.itemsCenter.with({colorIconOnbrand:e.isOnBrandColor,colorIcon:!e.isOnBrandColor}).$;return n.createElement("button",{className:a()("dropdown_button--button--BR3bZ",e.buttonClassName,{"dropdown_button--active--ZkglI":e.isShowingDropdown}),onClick:e.onClick,ref:t,"data-testid":e.dataTestId,"aria-label":e["aria-label"]},e.children,n.createElement(r.B,{svg:c.A,className:i}))})},457215:(e,t,i)=>{i.d(t,{To:()=>o,hK:()=>r});var n=i(939863);function l(){return[{text:(0,n.t)("help_widget.collective_upsells.fullscreen.unlimited_creation"),id:"unlimited_creation"},{text:(0,n.t)("help_widget.collective_upsells.fullscreen.shared_design_systems"),id:"shared_design_systems"},{text:(0,n.t)("help_widget.collective_upsells.fullscreen.advanced_prototyping"),id:"advanced_prototyping"},{text:(0,n.t)("help_widget.collective_upsells.fullscreen.enhanced_privacy"),id:"enhanced_privacy"},{text:(0,n.t)("help_widget.collective_upsells.fullscreen.decision_making_tools"),id:"decision_making_tools"}]}function a(){return{unlimited_creation:[{headerText:(0,n.t)("help_widget.collective_upsells.fullscreen.card.unlimited_creation.better_organization.title"),descriptionText:(0,n.t)("help_widget.collective_upsells.fullscreen.card.unlimited_creation.better_organization.description"),imgSrc:"https://static.figma.com/uploads/c342f4d4d591928504af7cfabbb30556617d9acb",url:"https://help.figma.com/hc/articles/1500005554982-Guide-to-files-and-projects#Projects",loadingColor:"var(--color-bg-brand-tertiary)"},{headerText:(0,n.t)("help_widget.collective_upsells.fullscreen.card.unlimited_creation.unlimited_files.title"),descriptionText:(0,n.t)("help_widget.collective_upsells.fullscreen.card.unlimited_creation.unlimited_files.description"),imgSrc:"https://static.figma.com/uploads/fd06e0abcc52d324ff782bcfce9c21844ab0a946",url:"https://help.figma.com/hc/articles/1500005554982-Guide-to-files-and-projects#files",loadingColor:"var(--color-bg-brand-tertiary)"},{headerText:(0,n.t)("help_widget.collective_upsells.fullscreen.card.unlimited_creation.unlimited_boards.title"),descriptionText:(0,n.t)("help_widget.collective_upsells.fullscreen.card.unlimited_creation.unlimited_boards.description"),imgSrc:"https://static.figma.com/uploads/f2009c194bd4ada5fcef6c54ea0063d7daa3627f",url:"https://help.figma.com/hc/articles/15300412458647-Explore-FigJam-files",loadingColor:"var(--color-bg-component-tertiary)"},{headerText:(0,n.t)("help_widget.collective_upsells.fullscreen.card.unlimited_creation.version_history.title"),descriptionText:(0,n.t)("help_widget.collective_upsells.fullscreen.card.unlimited_creation.version_history.description"),imgSrc:"https://static.figma.com/uploads/68ef770df03dec9fa3e69f2b40df9eec6d4e6166",url:"https://help.figma.com/hc/articles/360038006754-View-a-file-s-version-history",loadingColor:"var(--color-bg-brand-tertiary)"},{headerText:(0,n.t)("help_widget.collective_upsells.fullscreen.card.unlimited_creation.unlimited_pages.title"),descriptionText:(0,n.t)("help_widget.collective_upsells.fullscreen.card.unlimited_creation.unlimited_pages.description"),imgSrc:"https://static.figma.com/uploads/91999ee4abb04a50873c16d23383f724e24b13ed",url:"https://help.figma.com/hc/articles/360038511293-Create-and-manage-pages",loadingColor:"var(--color-bg-brand-tertiary)"}],shared_design_systems:[{headerText:(0,n.t)("help_widget.collective_upsells.fullscreen.card.shared_design_systems.component_libraries.title"),descriptionText:(0,n.t)("help_widget.collective_upsells.fullscreen.card.shared_design_systems.component_libraries.description"),imgSrc:"https://static.figma.com/uploads/a645a186fea60ff15fd9e1878bd52ceaae425a57",url:"https://help.figma.com/hc/articles/360025508373-Publish-a-library",loadingColor:"var(--color-bg-warning-tertiary)"},{headerText:(0,n.t)("help_widget.collective_upsells.fullscreen.card.shared_design_systems.variable_modes.title"),descriptionText:(0,n.t)("help_widget.collective_upsells.fullscreen.card.shared_design_systems.variable_modes.description"),imgSrc:"https://static.figma.com/uploads/1c2427045d0b2ce56265271afb85de51b7742364",url:"https://help.figma.com/hc/articles/15343816063383-Modes-for-variables",loadingColor:"var(--color-bg-warning-tertiary)"},{headerText:(0,n.t)("help_widget.collective_upsells.fullscreen.card.shared_design_systems.variables_in_prototyping.title"),descriptionText:(0,n.t)("help_widget.collective_upsells.fullscreen.card.shared_design_systems.variables_in_prototyping.description"),imgSrc:"https://static.figma.com/uploads/13ec0b16486b7a7882491385ef8dff27b4046be7",url:"https://help.figma.com/hc/articles/14506587589399-Use-variables-in-prototypes",loadingColor:"var(--color-bg-warning-tertiary)"}],advanced_prototyping:[{headerText:(0,n.t)("help_widget.collective_upsells.fullscreen.card.advanced_prototyping.expressions.title"),descriptionText:(0,n.t)("help_widget.collective_upsells.fullscreen.card.advanced_prototyping.expressions.description"),imgSrc:"https://static.figma.com/uploads/8aaf35d51fab3b28f40abbc1cca114bad73c6104",url:"https://help.figma.com/hc/articles/15253194385943-Use-expressions-in-prototypes",loadingColor:"var(--ramp-pink-100-light)"},{headerText:(0,n.t)("help_widget.collective_upsells.fullscreen.card.advanced_prototyping.conditionals.title"),descriptionText:(0,n.t)("help_widget.collective_upsells.fullscreen.card.advanced_prototyping.conditionals.description"),imgSrc:"https://static.figma.com/uploads/d70fae15738cd8f3e03df3997823c315ef4e9d9b",url:"https://help.figma.com/hc/articles/15253220891799-Multiple-actions-and-conditionals#h_01H91GHXRHGN8K801ZZCPV99FA",loadingColor:"var(--ramp-pink-100-light)"},{headerText:(0,n.t)("help_widget.collective_upsells.fullscreen.card.advanced_prototyping.multiple_actions.title"),descriptionText:(0,n.t)("help_widget.collective_upsells.fullscreen.card.advanced_prototyping.multiple_actions.description"),imgSrc:"https://static.figma.com/uploads/eed92994038b1d31ae0a6b55518a5f93bb8494c6",url:"https://help.figma.com/hc/articles/15253220891799-Multiple-actions-and-conditionals#h_01H91GHXRG38YKPARR7J436DTG",loadingColor:"var(--ramp-pink-100-light)"},{headerText:(0,n.t)("help_widget.collective_upsells.fullscreen.card.advanced_prototyping.video_in_prototypes.title"),descriptionText:(0,n.t)("help_widget.collective_upsells.fullscreen.card.advanced_prototyping.video_in_prototypes.description"),imgSrc:"https://static.figma.com/uploads/72d301c7668fe485cfb7bb82e2a2e6d7cdcbaf82",url:"https://help.figma.com/hc/articles/8878274530455-Use-videos-in-prototypes",loadingColor:"var(--ramp-pink-100-light)"}],enhanced_privacy:[{headerText:(0,n.t)("help_widget.collective_upsells.fullscreen.card.enhanced_privacy.password_protection.title"),descriptionText:(0,n.t)("help_widget.collective_upsells.fullscreen.card.enhanced_privacy.password_protection.description"),imgSrc:"https://static.figma.com/uploads/f0f0b3f8cdca6efd146423bd62bd6d28938bde97",url:"https://help.figma.com/hc/articles/5726720100247-Add-password-protection-to-files",loadingColor:"var(--ramp-pink-100-light)"},{headerText:(0,n.t)("help_widget.collective_upsells.fullscreen.card.enhanced_privacy.private_projects.title"),descriptionText:(0,n.t)("help_widget.collective_upsells.fullscreen.card.enhanced_privacy.private_projects.description"),imgSrc:"https://static.figma.com/uploads/373e72d04adfa59a21741a98e48dcbcbf706cd34",url:"https://help.figma.com/hc/articles/13839214115607-Professional-plan-permissions#projects",loadingColor:"var(--ramp-pink-100-light)"},{headerText:(0,n.t)("help_widget.collective_upsells.fullscreen.card.enhanced_privacy.prototype_only_sharing.title"),descriptionText:(0,n.t)("help_widget.collective_upsells.fullscreen.card.enhanced_privacy.prototype_only_sharing.description"),imgSrc:"https://static.figma.com/uploads/abfb7962b2a669d9bddbc39ef9ce2f11d858fcc7",url:"https://help.figma.com/hc/articles/360040531773",loadingColor:"var(--ramp-pink-100-light)"},{headerText:(0,n.t)("help_widget.collective_upsells.fullscreen.card.enhanced_privacy.project_transfer.title"),descriptionText:(0,n.t)("help_widget.collective_upsells.fullscreen.card.enhanced_privacy.project_transfer.description"),imgSrc:"https://static.figma.com/uploads/a093bcd98a4261ab49ea734a6d6284cfc4ace6b9",url:"https://help.figma.com/hc/articles/10250387712407-Transfer-a-project-or-team-to-a-different-company",loadingColor:"var(--ramp-pink-100-light)"}],decision_making_tools:[{headerText:(0,n.t)("help_widget.collective_upsells.fullscreen.card.decision_making_tools.audio_conversations.title"),descriptionText:(0,n.t)("help_widget.collective_upsells.fullscreen.card.decision_making_tools.audio_conversations.description"),imgSrc:"https://static.figma.com/uploads/42dacd2ef787d922ed8a0ab58dcfe3e57df42eb0",url:"https://help.figma.com/hc/articles/1500004414622-Use-audio-to-chat-with-your-team",loadingColor:"var(--ramp-pale_blue-200-light)"},{headerText:(0,n.t)("help_widget.collective_upsells.fullscreen.card.decision_making_tools.voting.title"),descriptionText:(0,n.t)("help_widget.collective_upsells.fullscreen.card.decision_making_tools.voting.description"),imgSrc:"https://static.figma.com/uploads/9c0d1a0fdad559ef908062c6cbfa4703859b882e",url:"https://help.figma.com/hc/articles/9359912208663-Run-voting-sessions-in-FigJam",loadingColor:"var(--ramp-pale_blue-200-light)"},{headerText:(0,n.t)("help_widget.collective_upsells.fullscreen.card.decision_making_tools.open_figjam_sessions.title"),descriptionText:(0,n.t)("help_widget.collective_upsells.fullscreen.card.decision_making_tools.open_figjam_sessions.description"),imgSrc:"https://static.figma.com/uploads/7b5794979bea63a4b3588a8da1ce3ebc94ee9dfc",url:"https://help.figma.com/hc/articles/4410786053911-Invite-visitors-to-an-open-session",loadingColor:"var(--ramp-pale_blue-200-light)"}]}}function r(){return{panelTabs:l(),contents:a(),panelTitle:(0,n.t)("help_widget.collective_upsells.fullscreen.panel_tab_header"),contentTitle:(0,n.t)("help_widget.collective_upsells.fullscreen.content_title"),ctaPrimaryText:(0,n.t)("help_widget.collective_upsells.fullscreen.upgrade_btn")}}function o(){return{panelTabs:l(),contents:a(),panelTitle:(0,n.t)("pro_onboarding.pro_feature_modal.as_a_professional_team_you_get"),ctaPrimaryText:(0,n.t)("pro_onboarding.pro_feature_modal.got_it")}}},476932:(e,t,i)=>{i.d(t,{n:()=>w,I:()=>I});var n=i(411855),l=i(188507),a=i(629019),r=i.n(a),o=i(711117),c=i(752553),s=i(799569),d=i(762638),_=i(939863),u=i(175290),m=i(553015),E=i(809840),p=i(101505),f=i(672517),g=i(710667),h=i(720647),v=i(978779),b=i(820113),N=i(488578),I=(e=>(e[e.SMALL=0]="SMALL",e[e.LARGE=1]="LARGE",e))(I||{});function R({headerText:e,descriptionText:t,imgSrc:i,loadingColor:l}){return n.createElement(u.Y,{direction:"vertical",verticalAlignItems:"start",strokeColor:"default",strokeWidth:1,cornerRadius:6,spacing:0,height:"fill-parent"},n.createElement(n.Suspense,{fallback:n.createElement("div",{className:"fullscreen_help_upsells_modal_base--cardPlaceholder--j3U6P",style:{backgroundColor:l}})},n.createElement("img",{alt:e,className:"fullscreen_help_upsells_modal_base--cardImage--HNMiP",src:i,width:189,height:146})),n.createElement("div",{className:d.cx.p12.pl10.pr10.flex.flexColumn.gap2.$},n.createElement(E.E,{fontSize:13,fontWeight:"medium",color:"default"},e),n.createElement("div",{className:d.cx.minH32.$},n.createElement(E.E,{fontSize:11,color:"secondary"},t))))}function T({isClickable:e,url:t,...i}){return e&&void 0!==t?n.createElement(f.L0,{href:t,target:"_blank",className:"fullscreen_help_upsells_modal_base--clickableCard--056mH",trackingProperties:{card:i.headerText}},n.createElement(R,{...i})):n.createElement(R,{...i})}function k(){let e=(0,g.N1)(g.Fq.UPSELL_MODALS),[t]=(0,c.mI)(e),i=(0,b.LN)(),l=new b.vr(i),a=(0,v.G7)(t.data,i,h.G_.DESIGN),r=(0,v.G7)(t.data,i,h.G_.FIGJAM);return n.createElement(u.Y,{padding:14,direction:"vertical",verticalAlignItems:"end"},n.createElement("div",{className:"fullscreen_help_upsells_modal_base--priceContainer--XWuz1"},n.createElement("div",{className:d.cx.wHalf.flex.flexColumn.gap8.$,"data-testid":"fullscreen_help_upsells_modal_pricing_text_design"},n.createElement(E.E,{color:"design",fontSize:11,fontWeight:"semi-bold"},(0,_.tx)("help_widget.collective_upsells.fullscreen.price_title.figma_design")),n.createElement(E.E,{fontWeight:"semi-bold",fontSize:18},l.formatMoney(a))),n.createElement("div",{className:"fullscreen_help_upsells_modal_base--priceContainerDivider--zsPMB"}),n.createElement("div",{className:d.cx.wHalf.flex.flexColumn.gap8.$,"data-testid":"fullscreen_help_upsells_modal_pricing_text_figjam"},n.createElement(E.E,{color:"figjam",fontSize:11,fontWeight:"semi-bold"},(0,_.tx)("help_widget.collective_upsells.fullscreen.price_title.figjam")),n.createElement(E.E,{fontWeight:"semi-bold",fontSize:18},l.formatMoney(r)))),n.createElement("div",{className:d.cx.p4.pt0.$},n.createElement(E.E,{color:"secondary",fontSize:11},(0,_.tx)("help_widget.collective_upsells.fullscreen.price.disclaimer.seat_rename"))))}function w({panelTabs:e,panelTitle:t,modalProps:i,contentTitle:a,contents:c,ctaPrimaryText:_,clickPrimaryBtn:g,secondaryBtn:h,dismissModal:v,showPricing:b=!0,panelTitleSize:I=0,cardsClickable:R}){let[w,C]=(0,n.useState)(e[0].id),y=(0,l.wA)(),O=1===I?n.createElement("div",{className:d.cx.p16.pt14.pb36.$},n.createElement(E.E,{fontSize:18,fontWeight:"semi-bold"},t)):n.createElement("div",{className:d.cx.p16.pt14.pb4.$},n.createElement(E.E,{fontSize:13,color:"secondary"},t)),D=e.map(e=>n.createElement(f.jm,{role:"button",tabIndex:0,key:e.id,className:r()("fullscreen_help_upsells_modal_base--panelTabs--WjAUp",w===e.id&&"fullscreen_help_upsells_modal_base--panelTabsActive--cM4NL"),onClick:()=>{C(e.id)},trackingProperties:{tab:e.id,prevTab:w}},n.createElement(E.E,{fontSize:13},e.text))),S=c[w].map((e,t)=>n.createElement(T,{key:w+e.headerText+t,isClickable:R,...e}));return n.createElement(n.Suspense,null,n.createElement(f.fu,{name:"FullscreenHelpUpsellsModalBase"},n.createElement(N.Nb,{size:900,className:"fullscreen_help_upsells_modal_base--largeModal--8j2D0",...i,hide:v},n.createElement(o.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5}},n.createElement(u.Y,{verticalAlignItems:"start",height:604,spacing:0},n.createElement(u.Y,{direction:"vertical",width:230,strokeWidth:{right:1},padding:0,spacing:0,strokeColor:"default",height:"fill-parent",verticalAlignItems:"start"},n.createElement(u.M,{minSize:16}),n.createElement(u.Y,{direction:"vertical",height:"fill-parent",spacing:0},t&&O,D),b&&n.createElement(k,null)),n.createElement(u.Y,{direction:"vertical",height:"fill-parent",spacing:0},n.createElement("div",{className:d.cx.pl32.pt24.pb20.$},a&&n.createElement(E.E,{fontSize:20,fontWeight:"semi-bold"},a),n.createElement(s.s_,{customStyle:{right:"8px",top:"8px"},dispatch:y,onClose:v,trackingProperties:{trackingDescriptor:p.c.CLOSE}})),n.createElement("div",{className:d.cx.wFull.hFull.overflowAuto.$},n.createElement("div",{className:d.cx.pl32.pb24.$},n.createElement(u.Y,{spacing:16,verticalAlignItems:"start",direction:"vertical"},n.createElement("div",{className:"fullscreen_help_upsells_modal_base--cardGrid--Yss71"},S)))),n.createElement(u.Y,{height:64,padding:16,horizontalAlignItems:"end",strokeColor:"default",strokeWidth:{top:1}},h,n.createElement(m.V,{variant:"primary",onClick:g},_))))))))}},112967:(e,t,i)=>{i.d(t,{A:()=>s});var n=i(411855),l=i(629019),a=i.n(l),r=i(935283),o=i(30637),c=i(762638);function s(e){let t=n.useRef(null),i=n.useRef(null);n.useEffect(()=>{if(t.current&&!i.current&&!(0,o.Lg)()){let n=document.getElementById(e.loadingElementId);i.current=n.cloneNode(!0)??null,t.current.appendChild(i.current)}},[e.loadingElementId,t]);let l={animationDelay:`${e.delay??0}ms`,backgroundColor:function(e){if("default"===e)return"var(--color-bg)";(0,r.xb)(e)}(e.backgroundColor)};return n.createElement(n.Fragment,null,e.loaded&&e.children,n.createElement("div",{ref:t,className:a()(e.loadingElementClassName,c.cx.eventsNone.absolute.top0.left0.right0.bottom0.overflowHidden.opacity1.$,{"loading_page--fadeOut--Ho-om":e.loaded}),style:l}))}},899028:(e,t,i)=>{i.d(t,{H:()=>a});var n=i(411855),l=i(860601);let a=n.createContext({shouldShowChevron:e=>!1,onClick:()=>!1,onMouseEnter:l.lQ,onMouseMove:l.lQ,onRemove:l.lQ})},987900:(e,t,i)=>{i.d(t,{IP:()=>eq,fd:()=>l,he:()=>ez,ql:()=>eQ});var n,l,a=i(411855),r=i(188507),o=i(629019),c=i.n(o),s=i(297666),d=i(517333),_=i(992405),u=i(737947),m=i(179479),E=i(358145),p=i(27087),f=i(946689),g=i(493323),h=i(827586),v=i(939863),b=i(392592),N=i(738269),I=i(507877),R=i(127122),T=i(988022),k=i(671206),w=i(335682),C=i(694687),y=i(594901),O=i(860178),D=i(707465),S=i(395116),A=i(369351),P=i(516289),F=i(296210),L=i.n(F),x=i(934480),U=i(564577),M=i(574176),B=i(881388),H=i(178466),G=i(67294),W=i(959232),j=i(558867),V=i(127391),Q=i(899028);let z="block_kit_row--rowTop--4zNja",q="block_kit_row--metadataContainer--tcs33",Y="block_kit_row--usersContainer--J5oFI",$="block_kit_row--usersContainerStructuredView--PUPYI",K="block_kit_row--quickReplyChevron--0rKX3",J="block_kit_row--chevronIcon--2uviD",X="block_kit_row--imagePreview--CqQsi";var Z=i(163119);function ee(e){return a.createElement("span",{className:"block_kit_row--htmlTextBlock--wINSP",dangerouslySetInnerHTML:{__html:L().sanitize(e.block.html_text)}})}function et(e){let t=(0,x.UF)(e.block.emoji_shortcode)[0];return t.meta?a.createElement("span",{className:"block_kit_row--emojiUnicode--qBoed"},t.unicode):a.createElement(a.Fragment,null)}function ei(e){return e?e.map((e,t)=>"HtmlTextBlock"===e._block_type?a.createElement(ee,{key:t,block:e}):a.createElement(et,{key:t,block:e})):[]}function en(e){let{block:t,size:i}=e;return a.createElement(j.Ro,{entity:{...t,id:t.entity_id},size:i,hideFallbackInitial:!1,shape:t.shape.toUpperCase()})}function el(e){let{block:t}=e;return a.createElement("div",{className:`${X} thumbnail_DEPRECATED--tileThumbnail--4kE7l`,style:{background:`url(${(0,W.A)()})`}},a.createElement("div",{className:"thumbnail_DEPRECATED--thumbnailContainer--xPcsg",style:{backgroundColor:(e=>{if(!e||0===e.alpha)return"transparent";let{red:t,green:i,blue:n,alpha:l}=e;return`rgba(${255*t|0}, ${255*i|0}, ${255*n|0}, ${l})`})(t.background_color)}},a.createElement("div",{className:"thumbnail_DEPRECATED--thumbnail--WuuvA thumbnail_DEPRECATED--baseThumbnail--8p9z4",style:{backgroundImage:`url(${t.img_url})`}})))}function ea(e){let{block:t}=e;return a.createElement("div",{className:"block_kit_row--square--vD5SO"},a.createElement("div",{className:X,style:{backgroundImage:`url(${t.img_url})`}}))}function er(e){let{avatars:t}=e;return 0===t.length?null:t.length>1?a.createElement("div",{className:Y},a.createElement("div",{className:"block_kit_row--secondaryUser--hkjpm"},a.createElement(en,{block:t[1],size:G.Pf.MEDIUM})),a.createElement("div",{className:"block_kit_row--primaryUser--lg4hR"},a.createElement(en,{block:t[0],size:G.Pf.MEDIUM}))):a.createElement("div",{className:Y},a.createElement(en,{block:t[0],size:G.Pf.LARGE}))}function eo(e){let{avatars:t,icon:i}=e;return 0===t.length?null:t.length>1?a.createElement("div",{className:$},a.createElement("div",{className:"block_kit_row--secondaryUserRevamp--ZkcO7"},a.createElement(en,{block:t[1],size:G.Pf.MEDIUM})),a.createElement("div",{className:"block_kit_row--primaryUserRevamp--XYq-9"},a.createElement(en,{block:t[0],size:G.Pf.MEDIUM})),i&&a.createElement(ec,{icon:i})):a.createElement("div",{className:$},a.createElement(en,{block:t[0],size:G.Pf.LARGE}),i&&a.createElement(ec,{icon:i}))}function ec(e){let{icon:t}=e,i=new Set(["https://static.figma.com/uploads/fc8b3d0c889b51bd8800945089e8b473ff4d619d"]);return a.createElement("div",{className:"block_kit_row--icon--YApgQ"},"ImageThumbnailBlock"===t._block_type?a.createElement("img",{className:`block_kit_row--iconImg--SRdFH ${i.has(t.img_url)?"":"block_kit_row--iconInvert--7YBRA"} `,src:t.img_url,alt:""}):a.createElement(et,{block:t}))}function es(e){let t=(0,r.wA)(),{block:i,callbacks:n,isPrimary:l=!0}=e,o=async()=>{let e=n.buildNotificationActionRequest(i.notification_action);await e.then(({data:e})=>{if(i.hide_after_action)n.hideNotification();else if(n.followLinkIfPossible(),e.meta.updated_notification_blob){let t=e.meta.updated_notification_blob;n.updateNotification(t.notification_id,t)}},()=>{let e="resolve"===i.notification_action?(0,v.t)("user_notification.an_error_occurred_while_clicking_this_notification"):(0,v.t)("user_notification.an_error_occurred_while_removing_this_notification");t(B.s.error(e))})},c=ei([i.text]);return l?a.createElement(f.$$,{className:"block_kit_row--acceptButton--1Fa1c",onClick:o},c):a.createElement(f.nR,{className:"block_kit_row--rejectButton--Hu8KY",onClick:o},c)}function ed(e){let{block:t,actionBlockCallbacks:i}=e;return a.createElement("div",{className:"block_kit_row--rowBottom--dKrKA"},a.createElement(es,{block:t.secondary_action,callbacks:i,isPrimary:!1}),a.createElement(es,{block:t.primary_action,callbacks:i,isPrimary:!0}))}function e_(e){let{block:t,plan:i,shouldShowChevron:n}=e;switch(t._block_type){case"BodyAndThumbnailBlock":return a.createElement(eu,{block:t,plan:i,shouldShowChevron:n});case"SplitlineTitleAndBodyBlock":return a.createElement(em,{block:t,shouldShowChevron:n})}}function eu(e){let{block:t,plan:i,shouldShowChevron:n}=e;return a.createElement(a.Fragment,null,a.createElement("div",{className:"block_kit_row--contentContainer--ZbpO2 text--fontPos11--2LvXf text--_fontBase--QdLsd"},a.createElement("div",{className:"block_kit_row--content--52-rY"},a.createElement("div",null,ei(t.title)),a.createElement("div",{className:q},a.createElement("div",{className:"block_kit_row--textContainer--168xh"},t.description&&a.createElement("div",{className:"block_kit_row--notificationDescription--lMjfr ellipsis--ellipsisAfter3Lines--h405C ellipsis--_ellipsisAfterNLines--LzI7k"},ei(t.description)),a.createElement("div",{className:"block_kit_row--fromNow--ryp9b"},i&&a.createElement(a.Fragment,null,a.createElement(V.H,{entityId:i.id.toString(),entityName:i.name,imgUrl:i.img_url||void 0}),(0,P.gN)(i.name,21),a.createElement("div",{className:"block_kit_row--planDivider--XnNq8"},"\xb7")),a.createElement(U.h1,{date:t.created_at,style:"short"}))),n&&a.createElement("div",{className:K},a.createElement(M.B,{svg:Z.A,className:J}))))),(()=>{if(!t.thumbnail)return null;let e=t.thumbnail;switch(e._block_type){case"AvatarBlock":return a.createElement(en,{block:e,size:G.Pf.XLARGE});case"ImageThumbnailBlock":return a.createElement(ea,{block:e});case"FileThumbnailBlock":return a.createElement(el,{block:e})}})())}function em(e){let{block:t,shouldShowChevron:i}=e;return a.createElement("div",{className:"block_kit_row--contentContainerRevamp--voNSM text--fontPos11--2LvXf text--_fontBase--QdLsd"},a.createElement("div",{className:"block_kit_row--titleAndTimestamp--30RnS"},a.createElement("div",{className:"block_kit_row--title--gqwu-"},ei(t.title)),a.createElement(ev,{createdAt:t.created_at})),a.createElement("div",{className:q},a.createElement("div",{className:"block_kit_row--subtitle--jIRsg"},ei(t.subtitle)),t.description&&a.createElement("div",{className:"block_kit_row--notificationDescriptionStructuredView--yUeTV ellipsis--ellipsisAfter3Lines--h405C ellipsis--_ellipsisAfterNLines--LzI7k"},ei(t.description)),i&&a.createElement("div",{className:"block_kit_row--quickReplyChevronContainer--yONp2"},a.createElement("div",{className:K},a.createElement(M.B,{svg:Z.A,className:J})))))}function eE(e){let{notification:t}=e;return(0,R.ro)()?a.createElement(ep,{notification:t,children:e.children}):a.createElement("div",{className:z},t.is_unread?a.createElement("div",{className:(0,S.fN)()?"block_kit_row--unreadBlueDot--RNyJ7 block_kit_row--unreadDot--e-8EJ":"block_kit_row--unreadDot--e-8EJ"}):null,a.createElement(er,{avatars:t.avatars}),e.children)}function ep(e){let{notification:t}=e;return a.createElement("div",{className:z},t.is_unread?a.createElement("div",{className:(0,S.fN)()?"block_kit_row--unreadBlueDotStructuredView--FGqRN block_kit_row--unreadDotStructuredView--WluAp":"block_kit_row--unreadDotStructuredView--WluAp"}):null,a.createElement(eo,{avatars:t.avatars,icon:t.icon}),e.children)}function ef(e){let{attachment:t,notification:i,dontShowPlanIcon:n}=e;return a.createElement(eE,{notification:i},a.createElement(e_,{block:t.body,plan:!0===n?void 0:i.plan}))}function eg(e){let{attachment:t,notification:i,dontShowPlanIcon:n}=e,{shouldShowChevron:l}=a.useContext(Q.H);return a.createElement(eE,{notification:i},a.createElement(e_,{block:t.body,plan:!0===n?void 0:i.plan,shouldShowChevron:l(i)}))}function eh(e){let{attachment:t,notification:i,actionBlockCallbacks:n}=e;return a.createElement(a.Fragment,null,a.createElement(eE,{notification:i},a.createElement(e_,{block:t.body,plan:i.plan})),a.createElement(ed,{block:t.actions,actionBlockCallbacks:n}))}function ev(e){let{createdAt:t}=e,i=eb(t),n=(0,U.Ak)(t,"narrow");if("today"!==i){let e=new Date(t),i={};i=!function(e){let t=new Date;return t.setDate(t.getDate()-365),e>=t}(e)?{month:"short",day:"numeric",year:"numeric"}:{month:"short",day:"numeric"},n=new Intl.DateTimeFormat((0,H.Gq)().getPrimaryLocale(!1),i).format(e)}return a.createElement("div",{className:"block_kit_row--timestamp--FiNtf"},n)}function eb(e){let t=new Date(e),i=new Date,n=new Date(i);return(n.setDate(i.getDate()-1),eN(t,i))?"today":eN(t,n)?"yesterday":t>=new Date(i.getFullYear(),i.getMonth(),i.getDate()-7)?"last_week":"older"}function eN(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}var eI=(e=>(e.TODAY="today",e.YESTERDAY="yesterday",e.LAST_WEEK="last_week",e.OLDER="older",e))(eI||{});let eR={today:(0,v.tx)("user_notifications.today"),yesterday:(0,v.tx)("user_notifications.yesterday"),last_week:(0,v.tx)("user_notifications.last_7_days"),older:(0,v.tx)("user_notifications.older")};function eT(e){return e.preferred_attachments.length>0&&"ActionableAttachment"===e.preferred_attachments[0]._block_type}var ek=(e=>(e.ACTIONABLE="actionable",e.ACTIONED="actioned",e))(ek||{});let ew={actionable:(0,v.tx)("user_notifications.pending"),actioned:(0,v.tx)("user_notifications.done")};var eC=i(776250),ey=(e=>(e[e.TEXT=0]="TEXT",e[e.FILE_COMMENT=1]="FILE_COMMENT",e[e.FILE_COMMENT_REPLY=2]="FILE_COMMENT_REPLY",e[e.INVITE_FILE=3]="INVITE_FILE",e[e.INVITE_FOLDER=4]="INVITE_FOLDER",e[e.INVITE_TEAM=5]="INVITE_TEAM",e[e.AT_MENTION_INVITE=7]="AT_MENTION_INVITE",e[e.AT_MENTION=8]="AT_MENTION",e[e.TEAM_ROLE_REQUEST_APPROVED=9]="TEAM_ROLE_REQUEST_APPROVED",e[e.TEAM_ROLE_REQUEST_DENIED=10]="TEAM_ROLE_REQUEST_DENIED",e[e.TEAM_ROLE_REQUEST_CREATED=11]="TEAM_ROLE_REQUEST_CREATED",e[e.ORG_ACCOUNT_TYPE_REQUEST_CREATED=12]="ORG_ACCOUNT_TYPE_REQUEST_CREATED",e[e.ORG_ACCOUNT_TYPE_REQUEST_APPROVED=13]="ORG_ACCOUNT_TYPE_REQUEST_APPROVED",e[e.ORG_ACCOUNT_TYPE_REQUEST_DENIED=14]="ORG_ACCOUNT_TYPE_REQUEST_DENIED",e[e.HUB_FILE_DUPLICATED=15]="HUB_FILE_DUPLICATED",e[e.HUB_PLUGIN_INSTALLED=16]="HUB_PLUGIN_INSTALLED",e[e.HUB_FILE_LIKED=17]="HUB_FILE_LIKED",e[e.HUB_PLUGIN_LIKED=18]="HUB_PLUGIN_LIKED",e[e.HUB_FILE_REMIXED=19]="HUB_FILE_REMIXED",e[e.FILE_COMMENT_REACTION=20]="FILE_COMMENT_REACTION",e[e.HUB_PROFILE_FOLLOWED=21]="HUB_PROFILE_FOLLOWED",e[e.HUB_RESOURCE_PUBLISHER_ADDED=22]="HUB_RESOURCE_PUBLISHER_ADDED",e[e.HUB_RESOURCE_PUBLISHER_REMOVED=23]="HUB_RESOURCE_PUBLISHER_REMOVED",e[e.HUB_RESOURCE_COMMENT=24]="HUB_RESOURCE_COMMENT",e[e.HUB_RESOURCE_COMMENT_REPLY=25]="HUB_RESOURCE_COMMENT_REPLY",e[e.INVITE_FILE_REPO=26]="INVITE_FILE_REPO",e[e.FILE_ROLE_REQUEST_CREATED=27]="FILE_ROLE_REQUEST_CREATED",e[e.MERGE_REQUEST_REVIEWER_ADDED=28]="MERGE_REQUEST_REVIEWER_ADDED",e[e.MERGE_REQUEST_APPROVED=29]="MERGE_REQUEST_APPROVED",e[e.MERGE_REQUEST_APPROVAL_REVOKED=30]="MERGE_REQUEST_APPROVAL_REVOKED",e[e.BRANCH_MERGED=31]="BRANCH_MERGED",e[e.BRANCH_ARCHIVED=32]="BRANCH_ARCHIVED",e[e.COMMUNITY_MENTION=33]="COMMUNITY_MENTION",e[e.FILE_ROLE_REQUEST_APPROVED=34]="FILE_ROLE_REQUEST_APPROVED",e[e.MERGE_REQUEST_REVIEWER_INVITED_ADDED=35]="MERGE_REQUEST_REVIEWER_INVITED_ADDED",e[e.ORG_JOIN_REQUEST_CREATED=36]="ORG_JOIN_REQUEST_CREATED",e[e.HUB_WIDGET_LIKED=37]="HUB_WIDGET_LIKED",e[e.HUB_WIDGET_INSTALLED=38]="HUB_WIDGET_INSTALLED",e[e.MERGE_REQUEST_CHANGES_REQUESTED=39]="MERGE_REQUEST_CHANGES_REQUESTED",e[e.ORG_JOIN_REQUEST_APPROVED_TO_SHARER=40]="ORG_JOIN_REQUEST_APPROVED_TO_SHARER",e[e.HUB_PLUGIN_USED=41]="HUB_PLUGIN_USED",e[e.HUB_WIDGET_USED=42]="HUB_WIDGET_USED",e[e.PRO_ACCOUNT_TYPE_REQUEST_CREATED=43]="PRO_ACCOUNT_TYPE_REQUEST_CREATED",e[e.PRO_ACCOUNT_TYPE_REQUEST_APPROVED=44]="PRO_ACCOUNT_TYPE_REQUEST_APPROVED",e[e.PRO_ACCOUNT_TYPE_REQUEST_DENIED=45]="PRO_ACCOUNT_TYPE_REQUEST_DENIED",e[e.INVITE_TEAM_REMINDER=46]="INVITE_TEAM_REMINDER",e[e.PLUGIN_PUBLISHER_ADDED=47]="PLUGIN_PUBLISHER_ADDED",e[e.RESOURCE_SOLD=48]="RESOURCE_SOLD",e[e.INVITE_FILE_REMINDER=49]="INVITE_FILE_REMINDER",e[e.BATCHED_FILE_COMMENT=50]="BATCHED_FILE_COMMENT",e[e.FEED_POST_COMMENT=51]="FEED_POST_COMMENT",e[e.FEED_POST_AT_MENTION=52]="FEED_POST_AT_MENTION",e[e.FEED_POST_REACTION=53]="FEED_POST_REACTION",e[e.RESOURCE_PUBLISH=54]="RESOURCE_PUBLISH",e[e.FEED_COMMENT_REACTION=55]="FEED_COMMENT_REACTION",e[e.FEED_POST_DESCRIPTION_AT_MENTION=56]="FEED_POST_DESCRIPTION_AT_MENTION",e[e.BATCHED_FEED_POST=57]="BATCHED_FEED_POST",e[e.BATCHED_FEED_COMMENT_REACTION=58]="BATCHED_FEED_COMMENT_REACTION",e[e.RESOURCE_SUBSCRIPTION_PRICE_INCREASE=60]="RESOURCE_SUBSCRIPTION_PRICE_INCREASE",e[e.FEED_POLL_CLOSE=61]="FEED_POLL_CLOSE",e[e.FILE_ROLE_REQUEST_PENDING_MOVE_TO_PROJECT=63]="FILE_ROLE_REQUEST_PENDING_MOVE_TO_PROJECT",e[e.VR_USER_SHARED_DRAFT=77]="VR_USER_SHARED_DRAFT",e))(ey||{});function eO(e){let t=e.preferred_attachments.find(e=>n.BlockKit.Block.ATTACHMENT_TYPES.has(e._block_type));if(void 0===t)throw Error(`Unable to render attachment. Hiding notification ${e.notification_id}`);return t}function eD(e){let t;let i=(0,r.wA)(),[n,l]=(0,a.useState)(!1),o=(0,r.d4)(e=>e.selectedView.view),{onClick:c,onMouseEnter:s,onMouseMove:d,onRemove:_}=a.useContext(Q.H),u=(0,R.ro)(),m=e.notification;a.useEffect(()=>()=>{_(m)},[_,m]);try{t=eO(e.notification)}catch(e){return console.error(`Unsupported Notification: ${e}`),null}let E=e=>{e.stopPropagation()},p=()=>{l(!0),e.onHide&&e.onHide()},f=(e,t=o)=>A.sr.updateNotification({notification_id:m.notification_id,notification_action:e,currentView:t});return!n&&a.createElement("div",{className:u?"block_kit_row--rowContainerRevamp--Ak9PI":"block_kit_row--rowContainer--hsQo5",onClick:n=>{(0,eC.sx)("file_browser_notification_clicked",{notification_id:m.notification_id,notification_type:m.notification_type,actionable:"ActionableAttachment"===t._block_type,selectedView:o,plan_filter:e.currentPlanFilter,notification_filter:e.currentNotificationFilter}),E(n);let l=c(m);"ActionableAttachment"!==t._block_type&&f("resolve").then(({data:t})=>{if(l||e.followLinkOnClickCallback(),t.meta.updated_notification_blob){let i=t.meta.updated_notification_blob;e.updateNotificationCallback(i.notification_id,i)}},e=>{i(B.s.error((0,v.t)("user_notification.an_error_occurred_while_clicking_this_notification")))})},onMouseDown:E,onMouseEnter:t=>{s(t,m,()=>{f("resolve",o+"_quickreply").then(({data:t})=>{if(t.meta.updated_notification_blob){let i=t.meta.updated_notification_blob;e.updateNotificationCallback(i.notification_id,i)}})})},onMouseMove:e=>{d(e)},"data-testid":"notification-row"},((t,i)=>{try{switch(t._block_type){case"ActionableAttachment":{let n={updateNotification:e.updateNotificationCallback,hideNotification:p,followLinkIfPossible:e.followLinkOnClickCallback,buildNotificationActionRequest:f};return a.createElement(eh,{attachment:t,notification:i,actionBlockCallbacks:n})}case"ClientActionableAttachment":return a.createElement(eg,{attachment:t,notification:i});case"BodyAndThumbnailAttachment":case"BodyAttachment":return a.createElement(ef,{attachment:t,notification:i,dontShowPlanIcon:e.dontShowPlanIcon})}}catch(e){console.error(`Unable to render attachment: ${t}`),p()}})(t,m))||null}(e=>{(e=>{(e.Block||(e.Block={})).ATTACHMENT_TYPES=new Set(["BodyAndThumbnailAttachment","ActionableAttachment","ClientActionableAttachment","BodyAttachment"])})(e.BlockKit||(e.BlockKit={}))})(n||(n={}));var eS=i(299211),eA=i(241809),eP=i(248521),eF=i(966712),eL=i(860601),ex=i(572206),eU=i(749336),eM=i(273709);let eB=class e{constructor(){this.circularBuffer=new eA.C(e.BUFFER_CAPACITY),this.lastTimestamp=0}clear(){this.circularBuffer.clear()}push(t,i){i-this.lastTimestamp>e.THROTTLE_DURATION_MS&&(this.circularBuffer.push(t),this.lastTimestamp=i)}getLocation50msAgo(){let e=this.circularBuffer.toArray();return e.length>0?e[0]:new ex.Mi(window.innerWidth,window.innerHeight)}};function eH(e){let[t,i]=(0,a.useState)(null),[n,l]=(0,a.useState)(0),r=(0,w.q5)(),o=a.useRef(eL.lQ),c=a.useRef(eL.lQ),s=a.useRef(null),d=a.useRef(null),_=(0,R.ro)(),u=(0,R.Ut)()&&(0,eM.zr)(r,t),m=a.useRef({notificationId:"",mouseLocationHistory:new eB,scheduledShowQuickReply:void 0,scheduledMarkAsRead:void 0});(0,a.useEffect)(()=>{d.current&&d.current.addEventListener("mouseover",e=>{clearTimeout(m.current?.scheduledShowQuickReply)})},[t]);let E=()=>{clearTimeout(m.current?.scheduledMarkAsRead),m.current.scheduledMarkAsRead=setTimeout(()=>{c.current=o.current},1e3)},p=a.useMemo(()=>{function e(e,t,n){let a=window.innerWidth>900&&window.innerHeight>650;m.current.notificationId=e.notification_id,a&&(0,eM.UC)(e)?(i((0,eM.AS)(e)),l(t),o.current=n):(i(null),o.current=eL.lQ),m.current.mouseLocationHistory.clear()}return{shouldShowChevron:()=>!1,onClick:e=>!1,onMouseEnter:(t,i,n)=>{let l=!1;if(i.notification_id!==m.current.notificationId&&d.current){let e=d.current.getBoundingClientRect(),i=new ex.Mi(e.left,e.top),n=new ex.Mi(e.left,e.bottom),a=[m.current.mouseLocationHistory.getLocation50msAgo(),i,n];l=(0,eP.y)(new ex.Mi(t.clientX,t.clientY),a)}let a=t.target;if(l){var r;r=()=>{e(i,a.getBoundingClientRect().bottom,n)},clearTimeout(m.current?.scheduledShowQuickReply),m.current&&(m.current.scheduledShowQuickReply=setTimeout(r,500))}else clearTimeout(m.current?.scheduledShowQuickReply),e(i,a.getBoundingClientRect().bottom,n)},onMouseMove:e=>{m.current.mouseLocationHistory.push(new ex.Mi(e.clientX,e.clientY),e.timeStamp)},onRemove:e=>{e.notification_id===m.current.notificationId&&i(null)}}},[d]);if(!((0,eF.kc)().desktop_quickreply_filebrowser&&_))return a.createElement(a.Fragment,null,e.children);let f=Math.max(0,n-(s.current?.getBoundingClientRect().y??0)-(d.current?.getBoundingClientRect().height??640));return a.createElement(a.Fragment,null,a.createElement("div",{className:"quick_reply_switcher--hoverContainer--eL8mU",ref:s},t&&!u&&a.createElement("div",{className:"quick_reply_switcher--quickReplyContainer--7Qpx8",style:{top:f,maxHeight:640,minHeight:450},onMouseEnter:()=>{E()},onMouseLeave:()=>{clearTimeout(m.current?.scheduledMarkAsRead),c.current(),c.current=eL.lQ,o.current=eL.lQ}},a.createElement(eU.d,{quickReplyInfo:t,onClose:()=>i(null),closeIcon:"x-32",hideOverflowMenu:!0,ref:d}))),a.createElement(Q.H.Provider,{value:p},e.children))}eB.BUFFER_CAPACITY=10,eB.DESIRED_DURATION_MS=50,eB.THROTTLE_DURATION_MS=eB.DESIRED_DURATION_MS/eB.BUFFER_CAPACITY;let eG="user_notifications_dropdown--filterToggleButton--ekpSd",eW="user_notifications_dropdown--filterToggleButtonSelected--qrMA-",ej="user_notifications_dropdown--dateHeader---l8oH",eV="user_notifications_dropdown--link--BC2j9 text--fontPos11--2LvXf text--_fontBase--QdLsd";function eQ(e,t){let i=(0,r.wA)(),n=(0,r.d4)(e=>e.user.id),l=(0,r.d4)(e=>e.user.community_profile_id),o=(0,r.d4)(e=>e.authedUsers.byId[n]?.plans),c=a.useMemo(()=>void 0!==o&&(new Map(o.map(e=>[e.plan_id,e.is_org])).get(t)||!1),[o,t]),_=(0,r.d4)(e=>e.userNotifications.userBellStates),u=(0,r.d4)(e=>e.userNotifications.communityProfileBellStates),E=(0,r.d4)(e=>e.selectedView.view),[f,g]=(0,a.useState)(new Map),[h,I]=(0,a.useState)(!0),[T,k]=(0,a.useState)(!1),w=(0,R.Ow)(),C=(0,m.F)(u),y=(0,m.F)(_);a.useEffect(()=>{let a=(0,s.s)(()=>{if(e)l&&(C.current[l]&&i((0,S.X2)({isBellStateHigh:!1,userInitiated:!0,profileId:l})),A.sr.getCommunityServerDriven({currentView:E}).then(({data:e})=>{O(e.meta)}).catch(e=>{i(b.F.enqueue({message:(0,v.t)("user_notification.an_error_occurred_while_fetching_your_community_notifications"),type:"user-notification",error:!0})),i(N.oB())}));else{if(y.current?.[n]?.[eS.t]){let e={isBellStateHigh:!1,userInitiated:!0,notificationSpaceId:eS.t,userId:n};i((0,S.Zo)(e))}A.sr.getServerDrivenPlan({currentPlanId:t,currentView:E,isPlanOrg:c}).then(({data:e})=>{O(e.meta)}).catch(e=>{i(b.F.enqueue({message:(0,v.t)("user_notification.an_error_occurred_while_fetching_your_notifications"),type:"user-notification",error:!0})),i(N.oB())})}},800,!0);I(!0),a()},[t,C,E,i,e,y,c,l,n]);let O=e=>{let t=new Map,i=!1;e.forEach(e=>{t.set(e.notification_id,e),!i&&e.filters.is_priority&&(i=!0)}),k(i),g(t),I(!1)},D=a.useMemo(()=>{if(w){let e=(0,S.Dd)();return h||T||"priority"!==e||((0,S.hI)("all"),e="all"),e}return"all"},[T,w,h]);return{notificationFeedMap:f,isFetchingNotifications:h,initFilter:D,markAllAsReadFn:()=>{(e?p.Ay.post("/api/user_notifications/community/mark_read",{currentView:E,source:d.S8?"desktopbell":"web"}):p.Ay.post("/api/user_notifications/mark_read/plan",{current_plan_id:t,currentView:E,is_plan_org:c,source:d.S8?"desktopbell":"web"})).then(()=>{g(new Map(Array.from(f,([e,t])=>(t.is_unread=!1,[e,t]))))}).catch(()=>{i(b.F.enqueue({message:(0,v.t)("user_notification.an_error_occurred_marking_all_as_read"),type:"user-notification",error:!0}))})},updateNotification:(e,t)=>{g(new Map(f.set(e,t)))}}}function ez(e,t){return e.filter(e=>!t.includes(e.notification_id))}function eq(e){let t;let[i,n]=(0,a.useState)(eS.t),{notificationFeedMap:r,isFetchingNotifications:o,markAllAsReadFn:s,updateNotification:d,initFilter:_}=eQ(!!e.inCommunity,i),[u,m]=(0,a.useState)([]),[p,f]=(0,a.useState)(_),g=(0,E.ZC)(p),h=(0,R.ro)(),v=i===eS.t?P.aT:i,b=ez([...r.values()],u);a.useEffect(()=>{f(_)},[_]),a.useEffect(()=>{let e=(0,S.Dd)();p!==g&&p===e&&(0,T.qD)({name:"user_notifications_filter_viewed",filter_type:p,dropdown_location:"web"})},[g,p]);let N=e=>{e.stopPropagation()},I=e=>{e===P.aT&&(e=eS.t),(0,T.FE)(e,"notifications",void 0),n(e)};switch(p){case"unread":t=b.filter(e=>e.is_unread);break;case"priority":t=b.filter(e=>e.filters.is_priority);break;default:t=b}return a.createElement("div",{className:c()(0!==r.size||o?"user_notifications_dropdown--dropdownContainer--ON3UV text--fontPos11--2LvXf text--_fontBase--QdLsd":"user_notifications_dropdown--dropdownContainerEmptyState--7D3ct user_notifications_dropdown--dropdownContainer--ON3UV text--fontPos11--2LvXf text--_fontBase--QdLsd",e.containerClassName,{"user_notifications_dropdown--arrowRight--g36M8":e.arrowRight}),onMouseDown:N,onClick:N},a.createElement(eH,null,a.createElement(l.Header,{selectedPlan:i,onPlanFilterUpdate:e=>I(e),inCommunity:!!e.inCommunity,showMarkAllAsRead:eY(o,b)&&!h,markAllAsReadFn:s}),!!h&&a.createElement(l.FilterToggle,{notificationFilter:p,toggleNotificationFilter:e=>{(0,T.Cu)({filter_type:e},"user_notifications_filter_clicked"),(0,S.hI)(e),f(e)},isFetchingNotifications:o,notifications:b,markAllAsReadFn:s}),a.createElement(l.Feed,{notifications:t,currentPlanFilter:v,currentNotificationFilter:p,hiddenNotificationIds:u,setHiddenNotificationIds:m,isFetchingNotifications:o,inCommunity:e.inCommunity,fillParent:!1,updateNotificationCallback:d})))}function eY(e,t){return!e&&t.some(e=>e.is_unread)}(e=>{function t(e){return(0,R.ro)()?a.createElement("div",{className:ej},eR[e.notificationDateGroup]):null}function i(e){return(0,R.Ow)()?a.createElement("div",{className:ej},ew[e.notificationPriorityGroup]):null}e.Feed=function(e){let n=(0,O.Pc)(),l=(0,r.d4)(e=>n?e.authedUsers.byId[n.id]?.plans:null),o=(0,r.Pj)(),c=(0,r.wA)(),s=(0,y.FC)(),m=(0,w.q5)(),E=(0,C.sZ)(),p=t=>{e.setHiddenNotificationIds([...e.hiddenNotificationIds,t])},f=!1;if(n&&!e.inCommunity&&l?.length===1&&(f=!0,e.currentPlanFilter===P.aT)){let t=l[0].plan_id;for(let i of e.notifications)if(i.plan?.id.toString()!==t){f=!1;break}}let b=a.useCallback(t=>()=>{var i,n;if(!t.deeplink)return;let l=new URL(t.deeplink.href),a=l.pathname;if(a.includes("project"))i=a.split("project/")[1],(0,T.xr)("file_browser_folder_click",i,null,s,{selectedView:"notifications",planFilterId:e.currentPlanFilter===P.aT?null:e.currentPlanFilter});else if(a.includes("team"))n=a.split("team/")[1],(0,T._J)("file_browser_team_click",n,s,{selectedView:"notifications",planFilterId:e.currentPlanFilter===P.aT?null:e.currentPlanFilter});else if((0,_.ek)(a)){let t=(0,_.zv)(a);t&&c(I.UN({fileKey:t,entrypoint:"notifications",currentPlanFilter:{planId:e.currentPlanFilter===P.aT?void 0:e.currentPlanFilter||void 0}}))}c(N.oB());let r=!!m&&m.key===(0,_.zv)(l.pathname);if(!d.eD&&r)c((0,k.H)({params:l.searchParams.toString(),hash:l.hash}));else if(t.deeplink.use_unsafe)u.Ay.unsafeRedirect(l.href,d.eD?void 0:"_blank");else if(e.inDesktopTray)u.Ay.redirect(l.href);else try{let e=(0,D.vU)(o.getState(),a);if("teamFeed"===e.view){E&&t.plan?.id.toString()===E.id?c(N.$T(e)):u.Ay.redirect(l.href,d.eD?void 0:"_blank");return}u.Ay.redirect(l.href,d.eD?void 0:"_blank");return}catch{u.Ay.redirect(l.href,d.eD?void 0:"_blank")}},[c,m,e.currentPlanFilter,e.inDesktopTray,s,o,E]);if(e.isFetchingNotifications)return a.createElement("div",{className:"user_notifications_dropdown--loadingContainer--jY9PZ"},a.createElement(g.kt,null));if(0===e.notifications.length)return a.createElement("div",{className:"user_notifications_dropdown--emptyRow--4UwYl"},(0,v.tx)("user_notifications.dropdown.no_notifications"));{var R;let n,l;"priority"===e.currentNotificationFilter&&e.notifications.sort((e,t)=>Number(eT(t))-Number(eT(e)));let r=e.inCommunity?"user_notifications_dropdown--scrollContainer--phbbl":"user_notifications_dropdown--scrollContainerWithPlan---Z4H1",o=eb((R=e.notifications)[0].preferred_attachments[0].body.created_at)===eb(R[R.length-1].preferred_attachments[0].body.created_at),c=e=>{let i;let l=null;if(!o)try{i=eO(e);let r=eb(i.body.created_at);r!==n&&(n=r,l=a.createElement(t,{key:`date-${e.notification_id}`,notificationDateGroup:r}))}catch(e){console.error("Skipping date header, unsupported notification")}return l},s=e=>{let t=null,n=eT(e)?"actionable":"actioned";return n!==l&&(l=n,t=a.createElement(i,{key:`priority-${e.notification_id}`,notificationPriorityGroup:n})),t};return a.createElement(h.P,{className:`${e.fillParent?"":r}`},a.createElement("div",null,e.notifications.map(t=>{let i=null;return i="priority"===e.currentNotificationFilter?s(t):c(t),a.createElement(a.Fragment,{key:`row-container-${t.notification_id}`},i,a.createElement(eD,{key:`row-${t.notification_id}`,notification:t,updateNotificationCallback:e.updateNotificationCallback,dontShowPlanIcon:f,currentPlanFilter:e.currentPlanFilter,currentNotificationFilter:e.currentNotificationFilter,inDesktopTray:e.inDesktopTray,onHide:()=>p(t.notification_id),followLinkOnClickCallback:b(t)}))})))}},e.UnreadBar=function(e){return eY(e.isFetchingNotifications,e.notifications)?a.createElement("div",{className:"user_notifications_dropdown--unreadToggleBar---1U5q"},function(e){let t=e.reduce((e,t)=>e+Number(t.is_unread),0);return a.createElement("div",{className:"user_notifications_dropdown--unread--e14XU"},(0,v.t)("user_notifications.unread_count",{unreadCount:t}))}(e.notifications),eY(e.isFetchingNotifications,e.notifications)&&a.createElement(f.N_,{onClick:e.markAllAsReadFn,className:eV,trusted:!0},(0,v.tx)("user_notifications.dropdown.mark_all_as_read"))):null},e.DateHeader=t,e.PriorityHeader=i,e.Header=function(e){return a.createElement("div",{className:"user_notifications_dropdown--header--aOhWS"},e.inCommunity?a.createElement("div",{className:"user_notifications_dropdown--orgName--vbTxV ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd"},(0,v.t)("user_notification.community_notifications")):a.createElement(a.Fragment,null,a.createElement(P.jy,{currentPlanFilter:e.selectedPlan===eS.t?P.aT:e.selectedPlan,onPlanFilterUpdate:e.onPlanFilterUpdate})),e.children,e.showMarkAllAsRead&&a.createElement(f.N_,{onClick:e.markAllAsReadFn,className:eV,trusted:!0},(0,v.tx)("user_notifications.dropdown.mark_all_as_read")))},e.FilterToggle=function(e){let t=(0,R.Ow)(),i=e.notifications.some(e=>e.filters.is_priority);return e.isFetchingNotifications?null:a.createElement("div",{className:"user_notifications_dropdown--filterToggleBar--VhBmn user_notifications_dropdown--unreadToggleBar---1U5q"},a.createElement("div",{className:"user_notifications_dropdown--filterToggleButtons--Erg5A"},a.createElement("button",{className:c()({[eG]:!0,[eW]:"all"===e.notificationFilter}),onClick:()=>{e.toggleNotificationFilter("all")}},(0,v.t)("user_notification.all")),!!t&&i&&a.createElement("button",{className:c()({[eG]:!0,[eW]:"priority"===e.notificationFilter}),onClick:()=>{e.toggleNotificationFilter("priority")}},function(e){let t=e.reduce((e,t)=>e+Number(eT(t)),0);return 0===t?(0,v.t)("user_notifications.requests_empty"):(0,v.t)("user_notifications.requests_toggle_count",{actionableCount:t})}(e.notifications)),a.createElement("button",{className:c()({[eG]:!0,[eW]:"unread"===e.notificationFilter}),onClick:()=>{e.toggleNotificationFilter("unread")}},function(e){let t=e.reduce((e,t)=>e+Number(t.is_unread),0);return 0===t?(0,v.t)("user_notifications.unread_empty"):(0,v.t)("user_notifications.unread_toggle_count",{unreadCount:t})}(e.notifications))),eY(e.isFetchingNotifications,e.notifications)&&a.createElement(f.N_,{onClick:e.markAllAsReadFn,className:eV,trusted:!0},(0,v.tx)("user_notifications.dropdown.mark_all_as_read")))}})(l||(l={}))},299211:(e,t,i)=>{i.d(t,{t:()=>c,w:()=>s});var n=i(411855),l=i(915440),a=i(711525),r=i(279453),o=i(395116);let c="-1";function s(e){let t=(0,l.Rs)(r.JgS,{});n.useEffect(()=>{if("loaded"===t.status&&t.data.persistentUserNotificationBells.status===a.tT.Loaded&&t.data.persistentUserNotificationBells.data)for(let i of(0,a.oA)(t.data.persistentUserNotificationBells)||[]){let t={isBellStateHigh:!!i.bell,userInitiated:!1,notificationSpaceId:i.notificationSpaceId||c,userId:i.userId};e((0,o.Zo)(t))}},[t,e])}},516289:(e,t,i)=>{i.d(t,{aT:()=>p,jy:()=>g,gN:()=>f});var n=i(411855),l=i(109388),a=i(188507),r=i(268537),o=i(574176),c=i(939863),s=i(860178),d=i(720488);let _="notifs_plan_filter--boldTitle--ZUcpT",u="notifs_plan_filter--autoTruncate--gl9us ellipsis--ellipsis--Tjyfa";var m=i(783423),E=i(533600);let p="ALL_PLANS_FILTER";function f(e,t){return e.length>t?e.slice(0,t-3)+"...":e}function g({currentPlanFilter:e,onPlanFilterUpdate:t}){let[i,g]=n.useState(!1),h=(0,n.useRef)(null),v=(0,n.useRef)(null),b=(0,s.iZ)(),N=(0,a.d4)(e=>b?e.authedUsers.byId[b.id]?.plans:null);if(!b||!N||N.length<=1)return n.createElement("span",{className:_},(0,c.t)("user_notification.all_notifications"));let I=N.map(e=>e.plan_id);I.unshift(p);let R=(e,t)=>e===p?(0,c.t)("user_notification.all_notifications"):t[e],T=N.reduce((e,t)=>(e[t.plan_id]=t.name,e),{}),k=(e,i)=>{e.stopPropagation(),t(i),g(!1)},w=I.map(t=>n.createElement(r.c$,{key:t,onClick:e=>{k(e,t)}},t===e&&n.createElement(o.B,{svg:E.A}),n.createElement("span",{className:`${t===e?"notifs_plan_filter--planNameChecked--dbvr9":"notifs_plan_filter--planNameUnchecked--J40CF"} ${u}`},R(t,T))));return n.createElement("div",{className:"notifs_plan_filter--planFilterContainer--E2TSh",ref:h},n.createElement("div",null,n.createElement("button",{ref:v,onClick:()=>{g(!i)},className:"notifs_plan_filter--dropdownButton--hQgHc"},n.createElement("span",{className:[_,u].join(" ")},f(R(e,T),35)),n.createElement(o.B,{svg:m.A,className:"notifs_plan_filter--chevronIcon--0Rqnp"})),v.current&&i&&n.createElement(d.Cf,{targetRect:l.findDOMNode(v.current)?.getBoundingClientRect(),type:d.it.DEFAULT,lean:"right",minWidth:120,disableDropdownScrollContainer:!0,closeDropdown:()=>g(!1)},w)))}},954244:(e,t,i)=>{i.d(t,{R:()=>l});var n=i(411855);function l(e){return n.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},n.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M8 6a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V9.5a.5.5 0 0 0-1 0V16a1 1 0 0 1-1 1H8a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1h3a.5.5 0 0 0 0-1H8Zm9 0a5.5 5.5 0 0 0-5.5 5.5v1.793l-1.646-1.647a.5.5 0 0 0-.708.708l2.5 2.5a.5.5 0 0 0 .708 0l2.5-2.5a.5.5 0 0 0-.708-.708L12.5 13.293V11.5A4.5 4.5 0 0 1 17 7h.5a.5.5 0 0 0 0-1H17Z",clipRule:"evenodd"}))}}}]);

//# debugId=6a37e3f6-4a3e-50a1-8c7b-7699a1e05cb1

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/dae636207efa5c4a5fd8fa663f082132c6cc4d20/944-dd269a0a8bc24d76.min.js.map