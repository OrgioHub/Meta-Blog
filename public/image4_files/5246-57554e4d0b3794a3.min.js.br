"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="2104bc07-b32d-5c3f-8e38-24667fd85acd")}catch(e){}}();
(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[5246],{612389:(e,t,r)=>{function n(e){return"backend"in e&&"fullscreen"===e.backend}function i(e){switch(e){case"server_file":case"local_file":case"server_checkpoint":case"pasted_data":return!0;case"server_checkpoint_diff":case"local_diff_file":case"multiplayer_journal":return!1}}function a(e){switch(e.type){case"server_file":case"local_file":case"server_checkpoint":case"pasted_data":return!0;case"server_checkpoint_diff":case"local_diff_file":case"multiplayer_journal":case"multiplayer_journals":return!1}}function l(e){switch(e.type){case"server_checkpoint_diff":case"local_diff_file":return!0;case"server_file":case"local_file":case"server_checkpoint":case"multiplayer_journal":case"multiplayer_journals":case"pasted_data":return!1}}r.d(t,{F1:()=>a,GP:()=>i,HP:()=>l,_g:()=>n})},552657:(e,t,r)=>{r.d(t,{I:()=>I});var n=r(598045),i=r(752795),a=r(539130),l=r(678340),s=r(618058),o=r(220566),u=r(614869),c=r(794348),d=r(494299),h=r(442260),p=r(935283),m=r(96328),f=r(273226);function y({jsonSerialized:e,stringSerialized:t}){let r=[];for(let[t,n]of Object.entries(e))null!=n&&r.push((0,c.oy)((0,m.Cb)(t),n));for(let[e,n]of Object.entries(t))r.push({label:e,value:{type:u.hy.Error,value:"No toJson() support"},children:[(0,c.Jt)("Debug string",{type:u.hy.String,value:n})],expandByDefault:!1});return r}function g(e,t){switch(e){case n.J0O.BOOL:return{type:u.hy.Boolean,value:t.boolValue};case n.J0O.TEXT:return{type:u.hy.SensitiveText,value:t.textValue};case n.J0O.INSTANCE_SWAP:return{type:u.hy.NodeId,value:(0,s.wr)(t.instanceSwapValue)};default:if(t.untypedValue)return{type:u.hy.SensitiveText,value:t.untypedValue};return}}function E(e,t){let r=[];return e.error&&r.push((0,c.Jt)("Error",{type:u.hy.String,value:e.error})),e.propType&&r.push((0,c.Jt)("Prop Type",{type:u.hy.String,value:(0,f.xb)(e.propType)})),e.explicitDefID&&(r.push((0,c.Jt)("Explicit Def ID",{type:u.hy.GenericGuid,value:(0,s.wr)(e.explicitDefID)})),t&&r.push((0,c.lh)("Explicit Def State Group",t))),r.push((0,c.w_)({label:"Ref Nodes",list:e.refNodes,buildChild:S,expandByDefault:!1})),r}function S(e,t){return{label:e,value:{type:u.hy.NodeId,value:(0,s.wr)(t.refNodeGuid)},children:[{label:e,value:{type:u.hy.String,value:t.nodeField},children:[],expandByDefault:!1}],expandByDefault:!1}}function v(e,t,r){return(0,c.w_)({label:e,list:t,buildChild:(e,t)=>(function(e,{edges:t},r){let i=1===t.length?b(t[0],!1):[(0,c.Jt)("Type",{type:u.hy.String,value:"Transitive"}),(0,c.w_)({label:"Edges",list:t,buildChild:(e,t)=>({label:e,children:b(t,!0),expandByDefault:!0}),expandByDefault:!0})];return{label:e,value:{type:u.hy.NodeId,value:(0,s.wr)(r===n.Uze.FROM?t[t.length-1].toGuid:t[0].fromGuid)},children:i,expandByDefault:!1}})(e,t,r),expandByDefault:!1})}function b({fromGuid:e,toGuid:t,type:r,pathToOverride:i,propDefId:a},l){let o=[(0,c.Jt)("Type",{type:u.hy.String,value:function(e){switch(e){case n.SoG.PRIMARY_INSTANCE_BACKED_BY_SYMBOL:return"Primary instance backed by symbol";case n.SoG.PRIMARY_INSTANCE_WITH_NESTED_SWAP_TO_SYMBOL:return"Primary instance with nested swap to symbol";case n.SoG.PRIMARY_INSTANCE_WITH_TOP_LEVEL_PROP_ASSIGNMENT_TO_SYMBOL:return"Primary instance with top level prop assignment to symbol";case n.SoG.PRIMARY_INSTANCE_WITH_NESTED_PROP_ASSIGNMENT_TO_SYMBOL:return"Primary instance with nested prop assignment to symbol";case n.SoG.PRODUCT_COMPONENT_WITH_PROP_DEF_TO_SYMBOL:return"Product component with prop def to symbol";case n.SoG.STATE_WITH_PROP_DEF_TO_SYMBOL:return"State with prop def to symbol";case n.SoG.SYMBOL_CONTAINING_PRIMARY_INSTANCE:return"Symbol containing primary instance";case n.SoG.INVALID:return"Invalid";default:(0,p.xb)(e)}}(r)})];l&&(o.push((0,c.lh)("From",e)),o.push((0,c.lh)("To",t))),i.length>1&&o.push((0,c.Jt)("Path to override",{type:u.hy.OverridePath,value:(0,s.ZJ)(i)}));let d=(0,s.SR)(a);return d&&o.push((0,c.Jt)("Prop def id",{type:u.hy.GenericGuid,value:(0,s.wr)(d)})),o}class I extends d.X{constructor({inPrototypeViewer:e,...t}){super(t),this.nodesById=new Map,this.stylesById=new Map,this.variablesById=new Map,this.variableCollectionsById=new Map,this.searchDB=new h.V,this.inPrototypeViewer=e}memoryUsage(){if(this._memoryUsage)return this._memoryUsage;let e=this.getRootNodes().reduce((e,t)=>e+t.treeMemoryUsage,0);return this._memoryUsage=e}getResourceMetadata(){return{migrationVersion:n.Hcu.getFileVersion()}}getResourceMetadataDisplayInfo(){return{"Migration version":this.getResourceMetadata().migrationVersion.toString()}}getRootNodes(){return this.fetchNodesFromFullscreen(()=>n.Hcu.getRootNodes())}getNode(e){return this.getNodeFromCache(e)||this.fetchNodeFromFullscreen(()=>n.Hcu.getNode((0,s.qJ)(e)))}getChildren(e){return this.fetchNodesFromFullscreen(()=>n.Hcu.getChildren((0,s.qJ)(e)))}getStyle(e){return this.getStyleFromCache(e)||this.fetchNodeFromFullscreen(()=>n.Hcu.getStyle(e))}getVariable(e){return this.getVariableFromCache(e)||this.fetchNodeFromFullscreen(()=>n.Hcu.getVariable(e))}getVariableCollection(e){return this.getVariableCollectionFromCache(e)||this.fetchNodeFromFullscreen(()=>n.Hcu.getVariableCollection(e))}getStyleConsumers(e){return this.fetchNodesFromFullscreen(()=>n.Hcu.getStyleConsumers(e))}getConsumedStyles(e){return this.fetchNodesFromFullscreen(()=>n.Hcu.getConsumedStyles((0,s.qJ)(e)))}getConsumedVariables(e){return this.fetchNodesFromFullscreen(()=>n.Hcu.getConsumedVariables((0,s.qJ)(e)))}getVariablesInCollection(e){return this.fetchNodesFromFullscreen(()=>n.Hcu.getVariablesInCollection(e))}getNodesWithExplicitModeForVariableSet(e){return this.fetchNodesFromFullscreen(()=>n.Hcu.getNodesWithExplicitModeForVariableSet(e))}getVariableConsumers(e){return this.fetchNodesFromFullscreen(()=>n.Hcu.getVariableConsumers(e))}getDirectVariableDependenciesToVariable(e){return this.fetchNodesFromFullscreen(()=>n.Hcu.getDirectVariableDependenciesToVariable(e))}getPropDefs(e){let t=(0,s.SR)(e);return null==t?[]:n.Hcu.getPropDefs(t)}getCombinedPropAssignments(e){let t=(0,s.SR)(e);return null==t?[]:n.Hcu.getCombinedPropAssignments(t)}getTransitiveDependencyPaths(e,t){let r=(0,s.SR)(e);return null==r?[]:n.Hcu.getTransitiveDependencyPaths(r,t)}getAllOverridesForLayer(e){let t=(0,s.SR)(e);return null==t?[]:n.Hcu.getLayerOverrides(t).map(e=>({...e,fields:a.w.decodeMessage(e.fields).nodeChanges[0]}))}getAllSublayerInfoForImmutableFrame(e){let t=(0,s.SR)(e);return null==t?new Map:n.Hcu.getImmutableFrameSubLayerInfo(t)}getOverrideStash(e){let t=(0,s.SR)(e);return null==t?[]:n.Hcu.getOverrideStash(t).map(e=>({...e,overrides:e.overrides.map(e=>({...e,fields:a.w.decodeMessage(e.fields).nodeChanges[0]}))}))}getTextInsertionStyle(e){let t;let r=(0,s.SR)(e);if(null==r)return[];let i=n.Hcu.getTextInsertionStyle(r);if(0===i.length)return[];try{t=a.w.decodeMessage(i).nodeChanges}catch(e){return console.warn("FigmaScope: error decoding node changes",e),[]}return t?t.length>1?(console.warn("FigmaScope: more than one node change found for text insertion style"),[]):t:(console.warn("FigmaScope: buffer did not contain node changes"),[])}getBlobByIndex(e){return"showing blob bytes is not implemented"}supportsNodePreviews(){return"show"===this.sensitiveTextPolicy&&!this.inPrototypeViewer}async search(e,t,r){return(await this.indexedSearchDB(r)).search(e,t)}indexedProperties(){return this.searchDB.indexedProperties}getNodeFromCache(e){return this.nodesById.get((0,s.qJ)(e))??null}getStyleFromCache(e){return this.stylesById.get(e)??null}getVariableFromCache(e){return this.variablesById.get(e)??null}getVariableCollectionFromCache(e){return this.variableCollectionsById.get(e)??null}fetchNodeFromFullscreen(e){let t=null;try{t=e()}catch(e){console.error("FigmaScope: error fetching nodes")}return t?this.createAndCacheNode(t):null}fetchNodesFromFullscreen(e){let t=[];try{t=e()}catch(e){console.error("FigmaScope: error fetching nodes")}return t.map(e=>this.createAndCacheNode(e)).filter(i.isNotNullish)}createAndCacheNode(e){let t;try{t=a.w.decodeNodeChange(e.nodeChange)}catch(e){return console.error("FigmaScope: error decoding node changes",e),null}let r={...e,nodeChange:t},n=(0,s.qJ)(t.guid),i=this.nodesById.get(n);if(i)return i;let l=new C(r,this);if(this.nodesById.set(n,l),l.isStyle()){let e=l.styleId();e&&this.stylesById.set(e,l)}if(l.isVariable()){let e=l.variableId();e&&this.variablesById.set(e,l)}if(l.isVariableCollection()){let e=l.variableCollectionId();e&&this.variableCollectionsById.set(e,l)}return l}indexedSearchDB(e){if(this._indexedSearchDB)return this._indexedSearchDB;let t=0,r=this.getRootNodes(),n=async()=>{await scheduler.postTask(async()=>{let i=Date.now();for(;Date.now()-i<100;){let n=r.pop();if(!n)return;e&&++t%5e3==0&&e(t),this.searchDB.indexNode(n),r.push(...n.children().filter(e=>e.guid))}await n()})},i=n().then(()=>this.searchDB);return this._indexedSearchDB=i}}class C extends o.H{constructor(e,t){super(e.nodeChange,t),this.data=e,this.memoryUsage=n.Hcu.getNodeMemoryUsage(this.guidStr()),this.treeMemoryUsage=n.Hcu.getSubtreeMemoryUsage(this.guidStr()),this.hasBeenLoaded=n.Hcu.getHasBeenLoaded(this.guidStr())}memoryPercentStr(){return(0,l.pr)(this.treeMemoryUsage,this._scene.memoryUsage(),!1)}transitiveDependencyPaths(e){return this._scene.getTransitiveDependencyPaths(this.guid(),e)}consumedStyleIds(){return this.consumedStyles().map(e=>e.styleId()).filter(i.isNotNullish)}consumedStyles(){return this._scene.getConsumedStyles(this.guid())}consumedVariableIds(){return this.consumedVariables().map(e=>e.variableId()).filter(i.isNotNullish)}consumedVariables(){return this._scene.getConsumedVariables(this.guid())}variablesThatDirectlyDependOnThisVariable(){let e=this.variableId();return e?this._scene.getDirectVariableDependenciesToVariable(e):[]}propDefs(){return this._scene.getPropDefs(this.guid())}combinedPropAssignments(){return this._scene.getCombinedPropAssignments(this.guid())}allLayerOverrides(){return this._scene.getAllOverridesForLayer(this.guid())}overrideStash(){return this._scene.getOverrideStash(this.guid())}keyForPublish(){return super.key()??(this.isLocalAsset()&&n.Egt?n.Egt.getAssetKeyForPublish(this.guidStr()):void 0)}allImmutableFrameSublayerInfo(e){return this._scene.getAllSublayerInfoForImmutableFrame(e)}textInsertionStyle(e){let t=this._scene.getTextInsertionStyle(e);return 1===t.length?t[0]:null}sublayerOverridesFromContainingImmutableFrame(){let e=this.containingImmutableFrame();if(!e)return null;let t=this.allImmutableFrameSublayerInfo(e.guid());if(!t||0===t.size)return null;let r=Array.from(t).find(e=>e[1].sublayerGuid===this.guidStr());if(!r)return null;let n=e.immutableFrameSublayerOverridesList();return 0===n.length?null:n.find(e=>{let t=e.guidPath?.guids;return`[${t?.map(e=>s.qJ(e))?.join(", ")}]`===r[0]})}generateNodeFieldProperties(){return[{label:"Tracked fields",children:super.generateNodeFieldProperties(),expandByDefault:!0},{label:"Untracked fields",children:y(this.data.untrackedFields),expandByDefault:!0},{label:"Derived properties",children:y(this.data.derivedProperties),expandByDefault:!0}]}generateComputedProperties(){var e,t;let r=[(0,c.sq)(this.type())];"DOCUMENT"===this.nodeType()&&Object.entries(this._scene.getResourceMetadataDisplayInfo()).forEach(([e,t])=>{r.push((0,c.Jt)(e,{type:u.hy.String,value:t}))}),this.hasBeenLoaded&&r.push((0,c.Jt)("Has Been Loaded",{type:u.hy.Boolean,value:this.hasBeenLoaded}));let a=this.keyForPublish(),l=(0,c.qU)(this,a);if(l&&r.push(l),r.push({label:"Memory usage",children:[(0,c.Jt)("Node",{type:u.hy.Numeric,value:this.memoryUsage}),(0,c.Jt)("Tree",{type:u.hy.Numeric,value:this.treeMemoryUsage})],expandByDefault:!0}),this.isPrimaryInstance()){let e=(0,c._9)(this);e&&r.push(e);let t=(0,c.az)(this);t&&r.push(t);let n=this.overrideStash();n&&r.push((0,c.w_)({label:"Override stash",list:n,expandByDefault:!1,buildChild:(e,t)=>({label:e,value:t.pathToSwap?{type:u.hy.OverridePath,value:(0,s.ZJ)(t.pathToSwap)}:void 0,children:[(0,c.w_)({label:e,value:{type:u.hy.NodeId,value:(0,s.wr)(t.symbolId)},list:t.overrides,expandByDefault:!1,buildChild:(e,t)=>(0,c.tN)({label:e,value:{type:u.hy.OverridePath,value:(0,s.ZJ)(t.overridePath)},object:t.fields,buildChild:(e,t)=>null==t?null:(0,c.oy)(e,t),expandByDefault:!1})})],expandByDefault:!1})}))}let o=this.instanceChain();if(o.length>0){r.push({label:"Instance chain",value:{type:u.hy.Metadata,value:o.length},expandByDefault:!0,children:o.map((e,t)=>(function(e,t){let r=e.isInstance(),n=e.isPrimaryInstance(),a=[];if(r){a.push((0,c.VX)(e));let t=(0,c.fG)(e);t&&a.push(t)}return n||a.push((0,c.Jt)("Override path",{type:u.hy.OverridePath,value:t.slice(1).map(e=>e.overrideKey()).filter(i.isNotNullish)})),{label:r?n?"Primary instance":"Nested instance":"This sublayer",key:String(t.length),value:{type:u.hy.NodeId,value:e.guid()},children:a,expandByDefault:!1}})(e,o.slice(0,t+1)))});let e=this.allLayerOverrides();if(e){let t=function(e){let t={};for(let{primaryInstanceId:r,containingSymbolId:n,fields:i,savedLevel:a,inheritanceLevel:l}of e)for(let[e,s]of Object.entries(i))t[e]=t[e]||[],t[e][l]={primaryInstanceId:r,containingSymbolId:n,value:s,savedLevel:a};let r=Object.keys(t).sort();return 0===r.length?null:(0,c.w_)({label:"Layer overrides",list:r,expandByDefault:!1,buildChild:(e,r)=>{let n=t[r],a=n.findIndex(i.isNotNullish),l=n[a].value;return{label:r,value:{type:u.hy.Metadata,value:0===a?"Direct override":"Inherited override"},expandByDefault:!1,children:[{...(0,c.oy)(r,l),label:"Resolved value",expandByDefault:!0},{label:"Sources",expandByDefault:!1,children:n.map(({primaryInstanceId:e,containingSymbolId:t,value:n,savedLevel:a},l)=>({label:0===l?"Direct override":"Inherited from",key:`Level ${l}`,value:t?{type:u.hy.NodeId,value:(0,s.wr)(t)}:void 0,children:[{...(0,c.oy)(r,n),label:"Value"},a>0?(0,c.Jt)("Saved level",{type:u.hy.Numeric,value:a}):null,(0,c.lh)("Primary instance",e)].filter(i.isNotNullish),expandByDefault:!1})).filter(i.isNotNullish)}]}}})}(e);t&&r.push(t)}}if((this.isSymbol()||this.isPrimaryInstance())&&(r.push(v("Dependants",this.transitiveDependencyPaths(n.Uze.TO),n.Uze.TO)),r.push(v("Dependencies",this.transitiveDependencyPaths(n.Uze.FROM),n.Uze.FROM))),this.isStateGroup()&&(r.push((0,c.w_)({label:"Dependants By State",list:this.children(),buildChild:(e,t)=>({...v(`State ${e}`,t.transitiveDependencyPaths(n.Uze.TO),n.Uze.TO),value:{type:u.hy.NodeId,value:t.guid()}}),expandByDefault:!0})),r.push((0,c.w_)({label:"Dependencies By State",list:this.children(),buildChild:(e,t)=>({...v(`State ${e}`,t.transitiveDependencyPaths(n.Uze.FROM),n.Uze.FROM),value:{type:u.hy.NodeId,value:t.guid()}}),expandByDefault:!0}))),this.isStyle()&&r.push((0,c.cT)(this.styleConsumers())),this.isVariable()){let e=this._scene.getVariableCollection(this.variableCollectionId());r.push((0,c.dW)(e)),r.push((0,c.dL)(this.variableConsumers()))}let d=this.variablesDirectlyDependedOnByThisVariable();Object.values(d).some(e=>e.length>0)&&r.push((0,c.q7)(d));let h=this.variablesThatDirectlyDependOnThisVariable();h.length>0&&r.push((0,c.PS)(h));let p=this.consumedStyles();p.length>0&&r.push((0,c.Oj)(p));let m=this.consumedVariables();if(m.length>0&&r.push((0,c.PT)(m)),this.isVariableCollection()&&(r.push((0,c.SP)(this.variablesInCollection())),r.push((0,c.Mx)(this.nodesWithExplicitModeForCollection()))),this.isSymbol()||this.isStateGroup()){let e=this.propDefs();if(e.length>0){let t=this.isState()?this.parent()?.guidStr():void 0;r.push((0,c.w_)({label:"Component Prop Defs",list:e,buildChild:(e,r)=>(function(e,t){let r=[(0,c.Jt)("Is Explicit",{type:u.hy.Boolean,value:e.isExplicit})],n=g(e.propType,e.defaultValue);return n&&r.push((0,c.Jt)("Default Value",n)),r.push(...E(e,t)),{label:e.defID,value:{type:e.name?u.hy.SensitiveText:u.hy.String,value:e.name?e.name:"INVALID_PROP"},children:r,expandByDefault:!1}})(r,t),expandByDefault:!1}))}}if(this.isInstance()){let t=this.combinedPropAssignments();t.length>0&&r.push((e=this.backingStateGroup(),(0,c.w_)({label:"Component Prop Assignments",list:t,buildChild:(t,r)=>(function(e,t){let r=[],n=g(e.propType,e.assignmentValue);return n&&r.push((0,c.Jt)("Assignment Value",n)),r.push((0,c.Jt)("Is Mixed",{type:u.hy.Boolean,value:e.isMixed})),r.push(...E(e,t)),{label:e.assignmentID,value:{type:e.name?u.hy.SensitiveText:u.hy.String,value:e.name?e.name:"INVALID_PROP"},children:r,expandByDefault:!1}})(r,e),expandByDefault:!1})))}let f=this.otherAssetVersions(e=>this._scene.getNode(e)?.keyForPublish());f.length>0&&r.push((0,c.nn)(f));let y=this.isVariable()||this.isVariableCollection(),S=this.transform();if(S&&!y){let e=(0,c.Ro)("Relative transform",S,this.isEditable(),this.guidStr());r.push(e)}let b=this.absoluteTransform();if(b&&!y&&r.push((0,c.Ro)("Absolute transform",b)),"TEXT"===this.type()){let e=this.textInsertionStyle(this.guid());if(e){let t=(0,c.Lk)(e);t&&r.push(t)}}if(this.isImmutableFrame()){let e=this.allImmutableFrameSublayerInfo(this.guid());if(e){let t=(0,c.St)(this,e);t&&r.push(t)}}if(this.isImmutableFrameSublayer()){let e=this.sublayerOverridesFromContainingImmutableFrame();if(e){let t=(0,c.gq)(this,e);t&&r.push(t)}}return this._scene.supportsNodePreviews()&&this.isPreviewRenderable()&&r.push((t=this.guid(),{label:"Node Preview",children:[(0,c.Jt)("",{type:u.hy.Image,value:t})],expandByDefault:!1})),r}}},618058:(e,t,r)=>{r.d(t,{SR:()=>s,ZJ:()=>c,bb:()=>u,dL:()=>o,qJ:()=>a,wr:()=>l});var n=r(693903),i=r(752795);function a(e){return"string"==typeof e?e:n.toString(e)}function l(e){return"string"==typeof e?n.fromString(e):e}function s(e){let t=a(e);return t===n.invalidGUIDStr?null:t}function o(e){return!!function(e){let t=l(e);return n.isValid(t)?t:null}(e)}function u(e){return Array.isArray(e)?e.map(a).join(", "):e}function c(e){return"string"==typeof e?e.split(", ").map(n.fromString).filter(i.isNotNullish):"string"==typeof e[0]?e.map(l).filter(i.isNotNullish):e}},967527:(e,t,r)=>{r.d(t,{R4:()=>h,i0:()=>m});var n=r(914006),i=r(574310),a=r(693903),l=r(935283),s=r(966712),o=r(618056),u=r(416095),c=r(618058),d=r(55799);class h{constructor(e){this.nodeChange=e,this.memoryUsage=null,this.treeMemoryUsage=null}memoryPercentStr(){return null}instanceChain(){let e=this.filterAncestors(e=>e.isInstance()).reverse();return(e.length>0||this.isInstance())&&e.push(this),e}followOverridePath(e){let t=this;for(let r of e){if(!t)return;let e=(0,c.qJ)(r);t=t.findDescendant(t=>t.overrideKeyStr()===e,{includeSelf:!0,shouldSkipAfter:e=>e!==t&&e.isInstance()})}return t}ancestorPath(){return this.mapAncestors(e=>e.guid(),{includeSelf:!0})}ancestorPathStr(){return(0,c.bb)(this.ancestorPath())}guid(){return this.nodeChange.guid??a.invalidGUID}guidStr(){return a.toString(this.guid())}key(){return(0,i.AssetKey)(this.nodeChange.key??this.nodeChange.componentKey??(this.nodeChange.sharedStyleMasterData?.styleKey||this.nodeChange.sharedStyleReference?.styleKey||void 0))}version(){return(0,i.AssetVersion)(this.nodeChange.version??this.nodeChange.sharedSymbolVersion)}assetRef(){return i.AssetRef.fromKiwi({key:this.key(),version:this.version()})}_assetId(e){if(!this.isSubscribedAsset())return e.fromLocalNodeIdObj(this.guid());{let t=this.assetRef();return t?e.fromRef(t):null}}symbolId(){return this.isSymbol()?this._assetId(n.SymbolId):null}stateGroupId(){return this.isStateGroup()?this._assetId(n.StateGroupId):this.isSymbol()?this.parent()?.stateGroupId()??null:null}styleId(){return this.isStyle()?this._assetId(n.StyleId):null}variableId(){return this.isVariable()?this._assetId(n.VariableId):null}variableCollectionId(){return this.isVariableCollection()?this._assetId(n.VariableCollectionId):this.isVariable()&&this.nodeChange.variableSetID?n.VariableCollectionId.fromKiwi(this.nodeChange.variableSetID):null}backingSymbolId(){return this.isInstance()?this.nodeChange.symbolData?.symbolID??this.nodeChange.overriddenSymbolID??null:null}getFriendlyVariableModeString(e){if(!this.isVariableCollection())return"";let t=a.toString(e),r=this.nodeChange.variableSetModes?.find(t=>a.equals(t.id,e));return r?`${r.name} (${t})`:`<missing mode> (${t})`}nodeType(){return this.nodeChange.type??"NONE"}isEditable(){return"CANVAS"!==this.nodeType()&&"DOCUMENT"!==this.nodeType()&&!this.isImmutableFrameSublayer()&&!this.isInstanceSublayer()&&!this.isInternalOnly()}isPreviewRenderable(){return"CANVAS"!==this.nodeType()&&"DOCUMENT"!==this.nodeType()&&!this.isStateGroup()&&!this.isVariableCollection()&&!this.isVariable()}type(){let e=this.nodeType();if("INSTANCE"===e)return this.isPrimaryInstance()?"PRIMARY_INSTANCE":"NESTED_INSTANCE";if("VARIABLE_SET"===e)return"VARIABLE_COLLECTION";if(this.isStateGroup())return"STATE_GROUP";if(this.isState())return"STATE";if(this.isStyle()){let e=this.nodeChange.styleType;switch(e){case"FILL":return"FILL_STYLE";case"STROKE":return"STROKE_STYLE";case"TEXT":return"TEXT_STYLE";case"EFFECT":return"EFFECT_STYLE";case"EXPORT":return"EXPORT_STYLE";case"GRID":return"GRID_STYLE";default:(0,l.j)(e)}}else if("FRAME"===e&&this.nodeChange.resizeToFit)return"GROUP";return e}phase(){return this.nodeChange.phase??"MODIFIED"}transform(){return this.nodeChange.transform}parentGuid(){let e=this.nodeChange.parentIndex;return e?e.guid||(console.warn("Node has parent index but no parent guid",this,e),null):null}nameWithPage(){let e=this.containingPage();return e?`${e.name()} > ${this.name()}`:this.name()}explicitOverrideKey(){return this.nodeChange.overrideKey}overrideKey(){let e=this.explicitOverrideKey();if(e)return e;if(this.isPrimaryInstance()){let e=this.backingSymbol();if(e)return e.isSubscribedAsset()?e.explicitOverrideKey():e.guid()}}overrideKeyStr(){let e=this.overrideKey();return e?(0,c.qJ)(e):null}treeDiffKey(){let e=this.instanceChain();return e.length>1?e.map((e,t)=>0===t?e.guidStr():e.overrideKeyStr()).join(", "):this.guidStr()}publishId(){return this.nodeChange.publishID??null}publishFile(){return this.nodeChange.publishFile??null}isInstance(){return"INSTANCE"===this.nodeType()}isPrimaryInstance(){return this.isInstance()&&!this.isNestedInstance()}isNestedInstance(){return"INSTANCE"===this.nodeType()&&this.someAncestor(e=>e.isInstance())}isInstanceSublayer(){return this.someAncestor(e=>e.isInstance())}isSwappedNestedInstance(){return this.isNestedInstance()&&null!=this.nodeChange.overriddenSymbolID}isSymbol(){return"SYMBOL"===this.nodeType()}isStateGroup(){return"FRAME"===this.nodeType()&&null!=this.nodeChange.isStateGroup}isState(){return this.isSymbol()&&!!this.parent()?.isStateGroup()}isLooseComponent(){return this.isSymbol()&&!this.isState()}isComponentish(){return this.isSymbol()||this.isStateGroup()}isProductComponent(){return this.isStateGroup()||this.isLooseComponent()}isStyle(){return this.nodeChange.styleType&&u.og.indexOf(this.nodeChange.styleType)>-1}isVariable(){return"VARIABLE"===this.nodeType()}isVariableCollection(){return this.isRootVariableCollection()||this.isExtendedVariableCollection()}isRootVariableCollection(){return!!("VARIABLE_SET"===this.nodeType()&&!this.nodeChange.backingVariableSetId)}isExtendedVariableCollection(){return!!("VARIABLE_SET"===this.nodeType()&&this.nodeChange.backingVariableSetId)}isVariableOverride(){return"VARIABLE_OVERRIDE"===this.nodeType()}isAsset(){return this.isSymbol()||this.isStateGroup()||this.isStyle()||this.isVariable()||this.isVariableCollection()||this.isVariableOverride()}isLocalAsset(){return this.isAsset()&&!this.isSubscribedAsset()}isSubscribedAsset(){return this.isComponentish()?(0,s.kc)().ds_publish_file_deprecation?null!=this.nodeChange.publishID:null!=this.nodeChange.publishFile:this.isStyle()?this.nodeChange.key?this.nodeChange.key&&this.nodeChange.version:null!=this.nodeChange.sharedStyleReference:!!(this.isVariable()||this.isVariableCollection())&&!!this.nodeChange.key}isInternalOnly(){return this.nodeChange.internalOnly||this.parent()?.isInternalOnly()||!1}isStack(){return null!=this.nodeChange.stackMode&&"NONE"!==this.nodeChange.stackMode}isCanvas(){return"CANVAS"===this.nodeChange.type}isImmutableFrame(){let e=this.nodeType();return"STICKY"===e||"SHAPE_WITH_TEXT"===e||"CONNECTOR"===e||"CODE_BLOCK"===e||"MEDIA"===e||"SECTION_OVERLAY"===e||"TABLE"===e}isImmutableFrameSublayer(){return!this.isImmutableFrame()&&this.someAncestor(e=>e.isImmutableFrame())}containingImmutableFrame(){return this.findAncestor(e=>e.isImmutableFrame())}containingPage(){return this.findAncestor(e=>"CANVAS"===e.type())}derivedOverridesList(){return this.nodeChange.derivedSymbolData??[]}overridesList(){return this.nodeChange.symbolData?.symbolOverrides??[]}immutableFrameSublayerOverridesList(){return this.nodeChange.nodeGenerationData?.overrides??[]}imageHashes(){let e=[],t=t=>{t?.hash&&e.push((0,o.qg)(t))},r=e=>{t(e.image),t(e.imageThumbnail),t(e.animatedImage)},n=e=>{if(e)for(let t of e)r(t)};n(this.nodeChange.fillPaints),n(this.nodeChange.strokePaints),n(this.nodeChange.backgroundPaints),n(this.nodeChange.widgetHoverStyle?.fillPaints),n(this.nodeChange.widgetHoverStyle?.strokePaints);let i=t=>{t&&e.push(t)};return i(this.nodeChange.embedData?.thumbnailImageHash),i(this.nodeChange.embedData?.faviconImageHash),i(this.nodeChange.linkPreviewData?.thumbnailImageHash),i(this.nodeChange.linkPreviewData?.faviconImageHash),i(this.nodeChange.richMediaData?.mediaHash),e}otherAssetVersions(e){if(!this.isAsset())return[];let t=this.containingPage();if(!t)return[];let r=this.nodeType(),n=this.guidStr(),i=this.key()??e?.(n);return i?t.children().filter(t=>{if(t.nodeType()!==r)return!1;let a=t.guidStr();return a!==n&&(t.key()??e?.(a))===i}):[]}forEachDescendant(e,t){return(0,d.zV)(this,m,e,t)}mapDescendants(e,t){return(0,d.o6)(this,m,e,t)}filterDescendants(e,t){return(0,d.is)(this,m,e,t)}findDescendant(e,t){return(0,d.cy)(this,m,e,t)}countDescendants(e,t){return(0,d.d8)(this,m,e,t)}someDescendant(e,t){return(0,d.Ng)(this,m,e,t)}everyDescendant(e,t){return(0,d.AH)(this,m,e,t)}forEachAncestor(e,t){return(0,d.zV)(this,p,e,t)}mapAncestors(e,t){return(0,d.o6)(this,p,e,t)}filterAncestors(e,t){return(0,d.is)(this,p,e,t)}findAncestor(e,t){return(0,d.cy)(this,p,e,t)}countAncestors(e,t){return(0,d.d8)(this,p,e,t)}someAncestor(e,t){return(0,d.Ng)(this,p,e,t)}everyAncestor(e,t){return(0,d.AH)(this,p,e,t)}nodeFieldProperties(){return this._nodeFieldProperties?this._nodeFieldProperties:this._nodeFieldProperties=this.generateNodeFieldProperties()}computedProperties(){return this._computedProperties?this._computedProperties:this._computedProperties=this.generateComputedProperties()}}function p(e){let t=e.parent();return t?[t]:[]}function m(e){return e.children()}},55799:(e,t,r)=>{r.d(t,{AH:()=>p,Ng:()=>h,cy:()=>u,d8:()=>d,is:()=>c,o6:()=>o,zV:()=>s});var n=r(461816),i=r.n(n);let a=()=>!0,l=e=>Array.isArray(e)?e:[e];function s(e,t,r,{includeSelf:n,shouldSkipAfter:a,shouldBreakAfter:o}={}){let u=l(e),c=n?[...u]:i()(u,t);for(;;){let e=c.pop();if(!e||(r(e),o?.(e)))return;if(!a?.(e))for(let r of t(e))c.push(r)}}function o(e,t,r,n={}){let i=[];return s(e,t,e=>i.push(r(e)),n),i}function u(e,t,r,{includeSelf:n,shouldSkipAfter:i,shouldBreakAfter:a}={}){let l;return s(e,t,e=>{r(e)&&(l=e)},{includeSelf:n,shouldSkipAfter:i,shouldBreakAfter:e=>null!=l||a?.(e)||!1}),l}function c(e,t,r,n={}){let i=[];return s(e,t,e=>{r(e)&&i.push(e)},n),i}function d(e,t,r=a,n={}){let i=0;return s(e,t,e=>{r(e)&&i++},n),i}function h(e,t,r,n){return null!=u(l(e),t,r,n)}function p(e,t,r,n){return!h(l(e),t,e=>!r(e),n)}},843650:(e,t,r)=>{r.d(t,{DB:()=>a,p7:()=>l,vu:()=>i});var n=r(935283);let i={NONE:"NONE",DOCUMENT:"DOC",CANVAS:"CANV",GROUP:"GROUP",FRAME:"FRAME",BOOLEAN_OPERATION:"BOOL",VECTOR:"VECT",STAR:"STAR",LINE:"LINE",ELLIPSE:"ELLPS",RECTANGLE:"RECT",REGULAR_POLYGON:"POLY",ROUNDED_RECTANGLE:"RRECT",TEXT:"TEXT",TEXT_PATH:"TXPTH",SLICE:"SLICE",SYMBOL:"SYMB",STATE:"STATE",PRIMARY_INSTANCE:"PINST",NESTED_INSTANCE:"NINST",STICKY:"STCKY",SHAPE_WITH_TEXT:"SWTXT",CONNECTOR:"CONN",CODE_BLOCK:"CODE",WIDGET:"WIDGT",STAMP:"STAMP",MEDIA:"MEDIA",HIGHLIGHT:"HIGH",SECTION:"SECT",SECTION_OVERLAY:"SECTO",WASHI_TAPE:"WASHI",STATE_GROUP:"STGRP",FILL_STYLE:"FSTYL",STROKE_STYLE:"SSTYL",TEXT_STYLE:"TSTYL",EFFECT_STYLE:"ESTYL",EXPORT_STYLE:"XSTYL",GRID_STYLE:"GSTYL",VARIABLE:"VAR",VARIABLE_COLLECTION:"V_COL",VARIABLE_OVERRIDE:"V_OVR",TABLE:"TABLE",TABLE_CELL:"TCELL",SLIDE:"SLIDE",SLIDE_ROW:"SROW",SLIDE_GRID:"SGRID",ASSISTED_LAYOUT:"ALAYO",INTERACTIVE_SLIDE_ELEMENT:"FLAPP",MODULE:"MOD",RESPONSIVE_SET:"RESSET",CODE_COMPONENT:"CODE"};var a=(e=>(e[e.Grouping=0]="Grouping",e[e.Shape=1]="Shape",e[e.DesignSystems=2]="DesignSystems",e[e.ImmutableFrame=3]="ImmutableFrame",e[e.Media=4]="Media",e[e.Other=5]="Other",e))(a||{});function l(e){switch(e){case"DOCUMENT":case"CANVAS":case"GROUP":case"FRAME":case"SECTION":case"TABLE_CELL":case"SLIDE":case"SLIDE_ROW":case"SLIDE_GRID":case"RESPONSIVE_SET":return 0;case"SYMBOL":case"STATE_GROUP":case"STATE":case"FILL_STYLE":case"STROKE_STYLE":case"TEXT_STYLE":case"EFFECT_STYLE":case"EXPORT_STYLE":case"GRID_STYLE":case"PRIMARY_INSTANCE":case"NESTED_INSTANCE":case"VARIABLE":case"VARIABLE_COLLECTION":case"VARIABLE_OVERRIDE":case"MODULE":return 2;case"BOOLEAN_OPERATION":case"VECTOR":case"STAR":case"LINE":case"ELLIPSE":case"RECTANGLE":case"REGULAR_POLYGON":case"ROUNDED_RECTANGLE":case"HIGHLIGHT":return 1;case"WIDGET":case"STAMP":case"WASHI_TAPE":case"INTERACTIVE_SLIDE_ELEMENT":return 4;case"STICKY":case"SHAPE_WITH_TEXT":case"CONNECTOR":case"CODE_BLOCK":case"MEDIA":case"SECTION_OVERLAY":case"TABLE":return 3;case"TEXT":case"TEXT_PATH":case"NONE":case"SLICE":case"ASSISTED_LAYOUT":case"CODE_COMPONENT":return 5;default:return(0,n.j)(e),5}}},220566:(e,t,r)=>{r.d(t,{H:()=>p});var n=r(914006),i=r(752795),a=r(758271),l=r.n(a),s=r(241395),o=r(906087),u=r(967527);class c extends u.R4{constructor(e,t){super(e.nodeChange),this.node=e,this.frozenParent=t??e.parent(),this.frozenChildren=e.children().map(e=>new c(e,this)),this.frozenAncestorPath=e.ancestorPath(),this.frozenNodeFieldProperties=e.nodeFieldProperties(),this.frozenComputedProperties=e.computedProperties(),this.frozenName=e.name(),this.frozenDisplayName=e.displayName(),this.frozenText=e.text(),this.frozenIconConfig=e.iconConfig(),this.frozenOrphan=e.isOrphan(),this.memoryUsage=e.memoryUsage,this.treeMemoryUsage=e.treeMemoryUsage}freeze(){return this}parent(){return this.frozenParent}children(){return this.frozenChildren}name(){return this.frozenName}displayName(){return this.frozenDisplayName}text(){return this.frozenText}iconConfig(){return this.frozenIconConfig}isOrphan(){return this.frozenOrphan}ancestorPath(){return this.frozenAncestorPath}generateNodeFieldProperties(){return this.frozenNodeFieldProperties}generateComputedProperties(){return this.frozenComputedProperties}backingSymbol(){return this.node.backingSymbol()}consumedStyles(){return this.node.consumedStyles()}consumedStyleIds(){return this.node.consumedStyleIds()}consumedVariables(){return this.node.consumedVariables()}consumedVariableIds(){return this.node.consumedVariableIds()}}var d=r(618058),h=r(794348);class p extends u.R4{constructor(e,t){super(e),this._scene=t}freeze(){return new c(this)}parent(){let e=this.parentGuid();return e?this._scene.getNode(e):null}children(){return this._scene.getChildren(this.guid())}internalOnly(){return this.nodeChange.internalOnly||this.parent()?.internalOnly()||!1}backingSymbol(){let e=this.backingSymbolId();return e?this._scene.getNode(e):null}backingStateGroup(){let e=this.backingSymbol();if(!e)return null;let t=e.parent();return t&&t.isStateGroup()?t.guidStr():null}generateNodeFieldProperties(){return Object.keys(this.nodeChange).sort().map(e=>{let t=this.nodeChange[e];return null==t?null:(0,h.oy)(e,t)}).filter(i.isNotNullish)}isOrphan(){return!!this._scene.isFullFile()&&"DOCUMENT"!==this.nodeType()&&!this.parent()}name(){return this._name??(this._name=(0,o.b)(this.nodeChange.name??"",this._scene.sensitiveTextPolicy))}displayName(){return this._displayName??(this._displayName=(()=>{if("multiplayer_journal"!==this._scene.type)return this.name();let{editScopeInfo:e}=this.nodeChange,t=[];if(e){for(let r of e.snapshots??[])for(let e of r.frames??[])for(let r of e.stack??[])t.push(r);for(let r of e.editScopeStacks??[])for(let e of r.stack??[])t.push(e)}t=l()(t,e=>e.label);let r=["USER","PLUGIN"];return t.sort((e,t)=>Number(r.includes(e.label))-Number(r.includes(t.label))),t.map(e=>e.label).join(", ")||"No edit scopes"})())}text(){return(0,o.b)(this.nodeChange.textData?.characters??"",this._scene.sensitiveTextPolicy)}iconConfig(){return this._scene.shouldShowNodePhases&&this._scene.shouldShowNodeTypes?{phase:this.phase(),type:this.type()}:this._scene.shouldShowNodePhases?this.phase():this.type()}absoluteTransform(){let e=this.transform(),t=this.parent()?.absoluteTransform();if(!e||!t)return s.s.identity().toFigMatrix();{let r=s.s.fromFigMatrix(t);return r.multiply(s.s.fromFigMatrix(e)),r.toFigMatrix()}}styleConsumers(){let e=this.styleId();return e?this._scene.getStyleConsumers(e):[]}variableConsumers(){let e=this.variableId();return e?this._scene.getVariableConsumers(e):[]}variablesInCollection(){let e=this.variableCollectionId();return e?this._scene.getVariablesInCollection(e):[]}nodesWithExplicitModeForCollection(){let e=this.variableCollectionId();return e?this._scene.getNodesWithExplicitModeForVariableSet(e):[]}variablesDirectlyDependedOnByThisVariable(){if(!this.isVariable())return{};let e={},t=this._scene,r=t.getVariableCollection(this.variableCollectionId());return this.nodeChange.variableDataValues?.entries?.forEach(i=>{if(i.modeID){let a=r?.getFriendlyVariableModeString(i.modeID)??d.qJ(i.modeID);e[a]=[],function r(i,a){if(a?.dataType==="ALIAS")!function(r,i){if(!i?.value?.alias)return;let a=n.VariableId.fromKiwi(i.value.alias);if(!a)return;let l=t.getVariable(a);l&&e[r].push(l)}(i,a);else if(a?.dataType==="EXPRESSION")!function(e,t){for(let n of t?.value?.expressionValue?.expressionArguments??[])r(e,n)}(i,a);else if(a?.dataType==="MAP")return function(e,t){for(let n of t?.value?.mapValue?.values??[])r(e,n.value)}(i,a)}(a,i.variableData)}}),e}}},614869:(e,t,r)=>{r.d(t,{M2:()=>d,ZV:()=>u,hy:()=>s,iE:()=>p,wC:()=>o});var n=r(914006),i=r(364898),a=r(236634),l=r(117837),s=(e=>(e.BlobIndex="BlobIndex",e.SensitiveText="SensitiveText",e.Boolean="Boolean",e.Numeric="Numeric",e.String="String",e.Position="Position",e.Color="Color",e.Vector="Vector",e.NodeId="NodeId",e.StyleId="StyleId",e.VariableId="VariableId",e.VariableCollectionId="VariableCollectionId",e.OverrideKey="OverrideKey",e.OverridePath="OverridePath",e.GenericGuid="GenericGuid",e.GenericGuidPath="GenericGuidPath",e.GenericGuidPathMapping="GenericGuidPathMapping",e.Matrix="Matrix",e.ImageHash="ImageHash",e.Bytes="Bytes",e.Metadata="Metadata",e.Error="Error",e.Image="Image",e.EditScope="EditScope",e))(s||{});function o(e,t,r){if((0,a.M_)(t,e))return{type:"BlobIndex",value:t};if((0,a.sX)(t,e))return{type:"SensitiveText",value:t};if((0,a.Lm)(t))return{type:"Boolean",value:t};if((0,a.kf)(t))return{type:"Numeric",value:t};if((0,a.Kg)(t))return("position"===e||"sortPosition"===e)&&(0,i.qO)(t)?{type:"Position",value:t}:{type:"String",value:t};if((0,a._o)(t))return{type:"Color",value:t};if((0,a.WX)(t))return{type:"Vector",value:t};if((0,l.ar)(e)){let e=n.StyleId.fromKiwi(t);if(e)return{type:"StyleId",value:e}}if("variableSetID"===e){let e=n.VariableCollectionId.fromKiwi(t);if(e)return{type:"VariableCollectionId",value:e}}if("id"===e||"alias"===e){let e=n.VariableId.fromKiwi(t);if(e)return{type:"VariableId",value:e}}if((0,a.W_)(t))return"symbolID"===e||"overriddenSymbolID"===e||"endpointNodeID"===e||"currentPage"===e||(0,l.Z7)(e)||"guid"===e&&"diagramParentIndex"===r?{type:"NodeId",value:t}:{type:"GenericGuid",value:t};if((0,a.hV)(t)){let{guids:e}=t;return e?{type:"GenericGuidPath",value:e}:{type:"Error",value:"Invalid Fig.GUIDPath"}}if((0,a.VL)(t)){let e=t.id,r=t?.path?.guids;return e&&r?{type:"GenericGuidPathMapping",from:t.id,to:t.path?.guids}:{type:"Error",value:"Invalid Fig.GUIDPathMapping"}}return(0,a.OA)(t)?{type:"Matrix",value:t}:(0,a.qx)(t,e)?{type:"ImageHash",value:t}:(0,a.aY)(t)?{type:"Bytes",value:t}:(0,a.Rt)(t)?{type:"EditScope",value:t}:void 0}function u(e){return"bigint"==typeof e||e%1==0?e.toString():e.toFixed(4)}let c={String:function(e){return e.value},Numeric:function(e){return u(e.value)},Vector:function(e){return u(e.value.x)+", "+u(e.value.y)}};function d(e){if(!e||!e.type)return"";let t=c[e.type];return t?t(e):(console.warn("No plaintext formatter implemented yet for property type: "+e.type),"")}let h={String:function(e){return{type:"String",value:e}},Numeric:function(e){let t=parseFloat(e);return isNaN(t)?null:{type:"Numeric",value:t}},Vector:function(e){let[t,r]=e.split(",").map(e=>parseFloat(e));return t&&r&&!isNaN(t)&&!isNaN(r)?{type:"Vector",value:{x:t,y:r}}:null}};function p(e,t){if(!e||!t)return null;let r=h[t];return r?r(e):(console.warn("No FigmaScopeValue formatter implemented yet for property type: "+t),null)}},794348:(e,t,r)=>{r.d(t,{Jt:()=>M,Lk:()=>N,Mx:()=>w,Oj:()=>R,PS:()=>P,PT:()=>A,Ro:()=>$,SP:()=>O,St:()=>C,VX:()=>g,Wh:()=>k,_9:()=>I,az:()=>b,cT:()=>_,dL:()=>x,dW:()=>D,f3:()=>L,fG:()=>E,gq:()=>T,lh:()=>B,nn:()=>S,oy:()=>y,q7:()=>V,qU:()=>f,sq:()=>m,tN:()=>U,w_:()=>G,x9:()=>F});var n=r(914006),i=r(693903),a=r(346124),l=r(752795),s=r(966712),o=r(341860),u=r(236634),c=r(752568),d=r(618058),h=r(967527),p=r(614869);function m(e){return M("FigmaScope type",{type:p.hy.String,value:e})}function f(e,t){if(!e.isAsset())return null;let r=e.isSubscribedAsset(),n=[M("Status",{type:p.hy.String,value:r?"Subscribed":"Local"}),M("Key",{type:p.hy.String,value:t??e.key()??"[not computed]"}),M("Version",{type:p.hy.String,value:e.version()??"[unknown]"})];return r&&!(0,s.kc)().ds_publish_file_deprecation&&n.push(M("File",{type:p.hy.String,value:e.publishFile()??"[unknown]"})),{label:"Asset info",children:n,expandByDefault:!1}}function y(e,t,r){let n=(0,p.wC)(e,t,r);if(null!=n)return M(e,n);if(Array.isArray(t))return G({label:e,list:t,buildChild:(e,t)=>y(e,t),expandByDefault:!1});{let r=["connectorStart","connectorEnd","symbolData"].includes(e);return U({label:e,object:t,buildChild:(t,r)=>y(t,r,e),expandByDefault:r})}}function g(e){let t=e.backingSymbol();return t?B("Backing symbol",t):M("Backing symbol ID",{type:p.hy.Error,value:"MISSING"})}function E(e){let t=e.backingSymbol()?.parent();return t&&t.isStateGroup()?B("Backing state group",t):null}function S(e){return G({label:"Other versions",list:e,buildChild:B,expandByDefault:!1})}function v(e,t,r){return G({label:e,list:[...t].sort((e,t)=>{if((e.guidPath?.guids?.length??0)===(t.guidPath?.guids?.length??0)){if("overriddenSymbolID"in e)return -1;if("overriddenSymbolID"in t)return 1;if("componentPropAssignments"in e)return -1;if("componentPropAssignments"in t)return 1}return function(e,t){let r=e.guids??[],n=t.guids??[];for(let e=0;e<Math.min(r.length,n.length);e++){let t=r[e],i=n[e];if(t.sessionID!==i.sessionID)return t.sessionID-i.sessionID;if(t.localID!==i.localID)return t.localID-i.localID}return r.length-n.length}(e.guidPath||{},t.guidPath||{})}),buildChild:(e,{guidPath:t,...n})=>{let i=t?.guids,a=i?r.followOverridePath(i):void 0;return U({label:e,value:i?{type:p.hy.OverridePath,value:i,targetGuid:a?.guid()}:{type:p.hy.Error,value:"No override path"},object:n,buildChild:(e,t)=>null==t?null:y(e,t),expandByDefault:!0})},expandByDefault:!1})}function b(e){let t=e.overridesList();return 0===t.length?null:v("Instance overrides",t,e)}function I(e){let t=e.derivedOverridesList();return 0===t.length?null:v("Instance derived symbol data",t,e)}function C(e,t){let r=e.immutableFrameSublayerOverridesList();return 0===r.length?null:G({label:"Sublayer path overrides",list:r,buildChild:(e,{guidPath:r,...n})=>{let i;let a=r?.guids,l=`[${a?.map(e=>d.qJ(e))?.join(", ")}]`;if(t.has(l)){let e=t.get(l)?.sublayerGuid,r=e?(0,d.wr)(e):void 0;r&&(i=r)}return U({label:e,value:a?{type:p.hy.OverridePath,value:a,targetGuid:i}:{type:p.hy.Error,value:"No override path"},object:n,buildChild:(e,t)=>null==t?null:y(e,t),expandByDefault:!0})},expandByDefault:!1})}function T(e,t){return U({label:"Sublayer path override from containing immutable frame",object:t,buildChild:(e,t)=>null==t?null:y(e,t),expandByDefault:!0})}function N(e){return function({label:e,object:t,buildChild:r,expandByDefault:n}){let i=Object.keys(t).sort().map(e=>r(e,t[e])).filter(l.isNotNullish);return{label:e,value:{type:p.hy.Metadata,value:i.length},children:i,expandByDefault:n}}({label:"Text insertion style",object:e,buildChild:(e,t)=>null==t?null:y(e,t),expandByDefault:!0})}function _(e){return G({label:"Style consumers",list:e,buildChild:B,expandByDefault:!1})}function D(e){return B("Variable collection",e)}function x(e){return G({label:"Variable consumers",list:e,buildChild:B,expandByDefault:!1})}function A(e){return G({label:"Consumed variables",list:e,buildChild:B,expandByDefault:!1})}function O(e){return G({label:"Variables",list:e,buildChild:B,expandByDefault:!1})}function w(e){return G({label:"Explicit mode consumers",list:e,buildChild:B,expandByDefault:!1})}function P(e){return G({label:"Direct dependents on this variable",list:e,buildChild:B,expandByDefault:!1})}function V(e){return U({label:"Variable direct dependencies",object:e,buildChild:(e,t)=>G({label:e,list:t,buildChild:B,expandByDefault:!1}),expandByDefault:!1})}function R(e){return G({label:"Consumed styles",list:e,buildChild:B,expandByDefault:!1})}function k(e){return G({label:"SceneGraph validation errors",list:e,buildChild:(e,t)=>M(e,{type:p.hy.Error,value:t}),expandByDefault:!0})}function F(e){return U({label:"Chunk details",object:e.chunk,buildChild:y,expandByDefault:!1})}function L(e){let t=new c._;for(let[r,n]of e.entries())for(let e of n)t.add(e,r);return[...t.values()].forEach(e=>e.sort()),G({label:"SceneGraph validation errors (Whole File)",list:[...t.entries()],buildChild:(e,[t,r])=>G({label:t,list:r,buildChild:B,expandByDefault:!0}),expandByDefault:!0})}function B(e,t){if(t instanceof h.R4){let r=t.isStyle()?t.styleId():void 0;if(r)return B(e,r);let n=t.isVariable()?t.variableId():void 0;if(n)return B(e,n);let i=t.isVariableCollection()?t.variableCollectionId():void 0;return i?B(e,i):B(e,t.guid())}if("string"==typeof t){let r=n.StyleId.fromString(t);if(r)return M(e,{type:p.hy.StyleId,value:r});let a=n.VariableId.fromString(t);if(a)return M(e,{type:p.hy.VariableId,value:a});let l=n.VariableCollectionId.fromString(t);if(l)return M(e,{type:p.hy.VariableCollectionId,value:l});let s=(0,d.wr)(t)??i.invalidGUID;return M(e,{type:p.hy.NodeId,value:s})}return M(e,{type:p.hy.NodeId,value:t})}function M(e,t,r){return{label:e,value:t,children:[],expandByDefault:!1,onEdit:r}}function G({label:e,value:t,list:r,buildChild:n,expandByDefault:i}){return{label:e,value:t??{type:p.hy.Metadata,value:r.length},children:r.map((e,t)=>{let r=n(`[${t}]`,e,t);return(0,u.jn)(e)&&r?{...r,value:{type:p.hy.OverridePath,value:e.guidPath?.guids}}:r}).filter(l.isNotNullish),expandByDefault:i}}function U({label:e,value:t,object:r,buildChild:n,expandByDefault:i}){return{label:e,value:t,children:Object.keys(r).sort().map(e=>n(e,r[e])).filter(l.isNotNullish),expandByDefault:i}}function $(e,t,r,n){let i={x:t.m02,y:t.m12},l=t.m00*t.m11-t.m01*t.m10,s=Math.atan2(t.m10,t.m00)*(180/Math.PI);s=(0,a.areClose)(s,0,1e-4)?0:-1*s;let u="No";l<0&&(u=(0,a.areClose)(s,0,1e-4)?"Vertically":(0,a.areClose)(Math.abs(s),180,1e-4)?"Horizontally":"Yes");let c=r&&n;return{label:e,children:[M("Offset",{type:p.hy.Vector,value:i},c?e=>{let t=o.q.instance.get(n);t&&(t.relativeTransform={...t.relativeTransform,m02:e.value.x,m12:e.value.y})}:void 0),M("Angle",{type:p.hy.Numeric,value:s},c?e=>{let t=o.q.instance.get(n);if(!t)return;let r=e.value*(Math.PI/180),i=Math.sin(r),a=Math.cos(r),{m00:l,m01:s,m02:u,m10:c,m11:d,m12:h}=t.relativeTransform;t.relativeTransform={m00:a*l+i*s,m01:a*s-i*l,m02:u,m10:a*c+i*d,m11:a*d-i*c,m12:h}}:void 0),M("Scale",{type:p.hy.Numeric,value:l}),M("Mirrored",{type:p.hy.String,value:u})],expandByDefault:!0}}},494299:(e,t,r)=>{r.d(t,{X:()=>s});var n=r(612389),i=r(618058),a=r(967527),l=r(55799);class s{constructor({resource:e,sensitiveTextPolicy:t}){this._shouldShowNodeTypes=!0,this._shouldShowNodePhases=!1,this.resource=e,this.sensitiveTextPolicy=t,window.figmaScopeScene=this}get type(){return this.resource.type}isFullFile(){return(0,n.GP)(this.type)}get shouldShowNodeTypes(){return this._shouldShowNodeTypes}get shouldShowNodePhases(){return this._shouldShowNodePhases}getPages(){return this.filterNodes(e=>"CANVAS"===e.nodeType(),{shouldSkipAfter:e=>"CANVAS"!==e.nodeType()})}getInternalCanvas(){return this.getPages().find(e=>e.isInternalOnly())}forEachNode(e,t={}){return(0,l.zV)(this.getRootNodes(),a.i0,e,{...t,includeSelf:!0})}mapNodes(e,t={}){return(0,l.o6)(this.getRootNodes(),a.i0,e,{...t,includeSelf:!0})}filterNodes(e,t={}){return(0,l.is)(this.getRootNodes(),a.i0,e,{...t,includeSelf:!0})}findNode(e,t={}){return(0,l.cy)(this.getRootNodes(),a.i0,e,{...t,includeSelf:!0})}countNodes(e,t={}){return(0,l.d8)(this.getRootNodes(),a.i0,e,{...t,includeSelf:!0})}someNode(e,t={}){return(0,l.Ng)(this.getRootNodes(),a.i0,e,{...t,includeSelf:!0})}everyNode(e,t={}){return(0,l.AH)(this.getRootNodes(),a.i0,e,{...t,includeSelf:!0})}guidToString(e){return(0,i.qJ)(e)}}},442260:(e,t,r)=>{r.d(t,{V:()=>b});var n=r(914006),i=r(677469),a=r.n(i),l=r(776250),s=r(852438),o=r(693903),u=r(843650),c=r(752568);class d{constructor(){this.children=new Map,this.value=[]}}class h{constructor(){this.root=new d}insert(e,t){let r=this.root;for(let t=0;t<e.length;t++){let n=e.charAt(t),i=r.children.get(n);i||r.children.set(n,i=new d),r=i}r.value.push(t)}prefixFind(e){let t=[];for(let r of this.keysWithPrefix(e)){let e=this.find(r);if(e)for(let r of e)t.push(r)}return t}find(e){let t=this.root;for(let r=0;r<e.length;r++){let n=e.charAt(r),i=t.children.get(n);if(!i)return;t=i}return t.value}keysWithPrefix(e){let t=[],r=this.findNode(e);return this.collect(r,function(e){let t=[];for(let r=0;r<e.length;r++){let n=e.charAt(r);t.push(n)}return t}(e),t),t}collect(e,t,r){if(e)for(let n of(e.value.length>0&&r.push(t.join("")),Array.from(e.children.keys())))t.push(n),this.collect(e.children.get(n),t,r),t.pop()}findNode(e){let t=this.root;for(let r=0;r<e.length;r++){let n=e.charAt(r),i=t.children.get(n);if(!i)return;t=i}return t}}var p=r(983119);class m{constructor({property:e,aliases:t=[]}){this.property=e,this.aliases=t}getValues(e){let t=e[this.property]();return Array.isArray(t)?t:null!=t?[t]:[]}indexNode(e){for(let t of this.getValues(e))this.indexEntry({property:this.property,value:t,node:e})}}class f extends m{constructor(){super(...arguments),this.byKey=new c._}indexEntry(e){let t=e.value.toLowerCase();this.byKey.add(t,e)}search(e){return this.byKey.get(e.rawValue.toLowerCase()).map(e=>({...e,isExact:!0}))}}class y extends m{constructor(){super(...arguments),this.trie=new h}indexEntry(e){this.trie.insert(e.value.toLowerCase(),e)}search(e){if(e.type===p.V.STRICT_STRING)return(this.trie.find(e.value.toLowerCase())??[]).filter(t=>t.value===e.value).map(e=>({...e,isExact:!0}));{let t=String(e.value);return this.trie.prefixFind(t.toLowerCase()).map(e=>({...e,isExact:e.value===t}))}}}class g extends m{constructor(){super(...arguments),this.bySessionId=new c.d,this.byLocalId=new c.d}indexEntry(e){let{sessionID:t,localID:r}=e.value;this.bySessionId.add(t,e),this.byLocalId.add(r,e)}search(e){if(e.type===p.V.GUID)return this.searchGuid(e.value);if(e.type===p.V.INT)return this.searchInt(e.value);if(e.type===p.V.ASSET_REF)return this.searchRef(e.value);if(e.type===p.V.ASSET_ID){let t=e.fns.toGuidObjIfLocal(e.value);if(t)return this.searchGuid(t);let r=e.fns.toRefIfSubscribed(e.value);if(r)return this.searchRef(r)}return[]}searchGuid(e){return Array.from((0,s.iR)(this.bySessionId.get(e.sessionID),this.byLocalId.get(e.localID))).map(e=>({...e,isExact:!0}))}searchRef(e){let t=o.fromString(e.version);return t?this.searchGuid(t):[]}searchInt(e){return Array.from((0,s.gG)(this.bySessionId.get(e),this.byLocalId.get(e))).map(e=>({...e,isExact:!1}))}}class E extends m{constructor({assetIdFns:e,...t}){super(t),this.byAssetId=new c._,this.bySessionId=new c.d,this.byLocalId=new c.d,this.byKey=new c.d,this.byVersion=new c.d,this.assetIdFns=e}indexEntry(e){this.byAssetId.add(e.value,e);let t=this.assetIdFns.toGuidObjIfLocal(e.value);t&&(this.bySessionId.add(t.sessionID,e),this.byLocalId.add(t.localID,e));let r=this.assetIdFns.toRefIfSubscribed(e.value);r&&(this.byKey.add(r.key,e),this.byVersion.add(r.version,e))}search(e){return e.type===p.V.ASSET_ID?this.searchAssetId(e.value):e.type===p.V.GUID?this.searchGuid(e.value,e.rawValue):e.type===p.V.ASSET_REF?this.searchRef(e.value):e.type===p.V.INT?this.searchInt(e.value):[]}searchAssetId(e){return this.byAssetId.get(e).map(e=>({...e,isExact:!0}))}searchGuid(e,t){let r=Array.from((0,s.iR)(this.bySessionId.get(e.sessionID),this.byLocalId.get(e.localID))).map(e=>({...e,isExact:!0})),n=Array.from(this.byVersion.get(t)).map(e=>({...e,isExact:!1}));return r.concat(n)}searchRef(e){return Array.from((0,s.iR)(this.byKey.get(e.key),this.byVersion.get(e.version))).map(e=>({...e,isExact:!0}))}searchInt(e){return Array.from((0,s.gG)(this.bySessionId.get(e),this.byLocalId.get(e))).map(e=>({...e,isExact:!1}))}}class S extends y{constructor(){super({property:"type",aliases:["type","nodeType"]})}getValues(e){let t=e.type();return[t,u.vu[t],e.nodeType()]}}class v extends f{search(e){return e.type!==p.V.HEX_KEY&&e.type!==p.V.INT?[]:super.search(e)}}class b{constructor(){this.indices=[new g({property:"guid",aliases:["id","nodeId"]}),new g({property:"parentGuid",aliases:["parent"]}),new g({property:"overrideKey",aliases:["okey"]}),new g({property:"backingSymbolId",aliases:["symbol","symbolId"]}),new g({property:"publishId"}),new g({property:"consumedStyleIds",aliases:["consumedStyleId","consumedStyle","consumedStyles"]}),new y({property:"name"}),new y({property:"text"}),new S,new v({property:"key"}),new f({property:"version",aliases:["assetVersion","sharedSymbolVersion"]}),new v({property:"publishFile"}),new v({property:"imageHashes"}),new E({assetIdFns:n.SymbolId,property:"symbolId",aliases:["symbol"]}),new E({assetIdFns:n.StateGroupId,property:"stateGroupId",aliases:["stateGroup"]}),new E({assetIdFns:n.StyleId,property:"styleId",aliases:["style"]}),new E({assetIdFns:n.VariableId,property:"variableId",aliases:["variable"]}),new E({assetIdFns:n.VariableCollectionId,property:"variableCollectionId",aliases:["variableSetId","collectionId","variableCollection","variableSet"]})]}indexNode(e){for(let t of this.indices)t.indexNode(e)}indexNodes(e){for(let t of this.indices)for(let r of e)t.indexNode(r)}search(e,t){let r=(0,p._)(e,t);l.az.trackDefinedEvent("figmascope.search",{used_operators:r.length>1||null!=r[0].property});let n=this.searchTokens(r);return n.sort(b.compareResults),n}searchTokens(e){let t;for(let r of e){let e=new Map;for(let t of this.getIndicesToSearchForToken(r))for(let n of t.search(r.value)){let{node:t,property:r,value:i,isExact:a}=n;e.has(t)?e.get(t).matches.push({property:r,value:i,isExact:a}):e.set(t,{node:t,matches:[{property:r,value:i,isExact:a}]})}t=t?(0,s.wD)(t,e,(e,t,r)=>({node:e,matches:t.matches.concat(r.matches)})):e}return t?a()(Array.from(t.values())):[]}get indexedProperties(){return this.indices.map(e=>e.property)}getIndicesToSearchForToken({property:e}){return null==e?this.indices.filter(e=>"parentGuid"!==e.property):(e=e.toLowerCase(),this.indices.filter(t=>{if(t.property.toLowerCase()===e)return!0;for(let r of t.aliases)if(r.toLowerCase()===e)return!0;return!1}))}static compareResults(e,t){let r=e.matches.filter(e=>e.isExact).length;return t.matches.filter(e=>e.isExact).length-r||t.matches.length-e.matches.length}}},983119:(e,t,r)=>{r.d(t,{V:()=>l,_:()=>s});var n=r(914006),i=r(574310),a=r(693903),l=(e=>(e.GUID="GUID",e.ASSET_REF="ASSET_REF",e.ASSET_ID="ASSET_ID",e.INT="INT",e.HEX_KEY="HEX_KEY",e.LOOSE_STRING="LOOSE_STRING",e.STRICT_STRING="STRICT_STRING",e))(l||{});function s(e,t){let r,l=[];e=e.trim();let s=/([a-zA-Z0-9_.]+=)?("[^"]*"|'[^']*'|[^\s]+)/g;for(;r=s.exec(e);){let e=r[1]?.slice(0,-1)||void 0,t=function(e){if(e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"'))return{type:"STRICT_STRING",value:e=e.slice(1,-1),rawValue:e};let t=(0,a.fromString)(e);if(t)return{type:"GUID",value:t,rawValue:e};let r=n.SymbolId.fromString(e);if(r)return{type:"ASSET_ID",value:r,fns:n.SymbolId,rawValue:e};let l=n.StateGroupId.fromString(e);if(l)return{type:"ASSET_ID",value:l,fns:n.StateGroupId,rawValue:e};let s=n.StyleId.fromString(e);if(s)return{type:"ASSET_ID",value:s,fns:n.StyleId,rawValue:e};let o=n.VariableId.fromString(e);if(o)return{type:"ASSET_ID",value:o,fns:n.VariableId,rawValue:e};let u=n.VariableCollectionId.fromString(e);if(u)return{type:"ASSET_ID",value:u,fns:n.VariableCollectionId,rawValue:e};let c=i.AssetRef.fromString(e);if(c)return{type:"ASSET_REF",value:c,rawValue:e};if(/^\d+$/.test(e)){let t=parseInt(e);if(!isNaN(t))return{type:"INT",value:t,rawValue:e}}return/^[0-9a-fA-F]+$/.test(e)?{type:"HEX_KEY",value:e,rawValue:e}:{type:"LOOSE_STRING",value:e,rawValue:e}}(r[2]);l.push({property:e,value:t})}return l.length>1&&(l=function(e){let t=[],r=e[0],n=e[1],i=2;for(;;)if(n){if(r.property||n.property||"STRICT_STRING"===r.value.type||"STRICT_STRING"===n.value.type)t.push(r),r=n,n=e[i++];else{let t=`${r.value.rawValue} ${n.value.rawValue}`;r={property:void 0,value:{type:"LOOSE_STRING",value:t,rawValue:t}},n=e[i++]}}else{t.push(r);break}return t}(l)),l=function(e,t){let r=(0,a.fromString)(t);return r?e.map(e=>"LOOSE_STRING"===e.value.type&&"$0"===e.value.rawValue?{property:e.property,value:{type:"GUID",value:r,rawValue:e.value.rawValue}}:e):e}(l,t)}},853679:(e,t,r)=>{r.d(t,{Oz:()=>d,VT:()=>f,ok:()=>o,s3:()=>p,sg:()=>h,tE:()=>m,zy:()=>u});var n=r(776250),i=r(38580),a=r(374626),l=r(863822),s=r(363960),o=(e=>(e.None="No Diff",e.Layer="Layer Diff",e.Tree="Tree Diff",e.File="File Diff",e))(o||{});let u=(0,i.eU)(null);function c(e){return"Layer Diff"===e?"layer":"tree"}let d=(0,a.FZ)((0,i.eU)(null),(e,t,r)=>{let i,a;let s=new Date;if("clear"===t.type)return e&&n.az.trackDefinedEvent("figmascope.diff_end",{type:c(e.type),duration_seconds:(s.getTime()-e.time.getTime())/1e3}),null;if("start"===t.type?(i=t.guidStr,a=t.diffType):"refresh"===t.type&&e&&(i=e.node.guidStr(),a=e.type),!i||!a)return null;let o=r(l.AC).getNode(i)?.freeze();return o?(n.az.trackDefinedEvent("figmascope.diff_start",{type:c(a)}),{type:a,node:o,time:new Date}):null}),h=(0,i.eU)(e=>{let t=e(u);return t?{type:"File Diff",scene:t}:e(d)??{type:"No Diff"}}),p=(0,i.eU)(e=>{let t=e(s.Nq),r=e(h);switch(r.type){case"Layer Diff":return r.node;case"Tree Diff":{let e=t?.treeDiffKey();return r.node.findDescendant(t=>t.treeDiffKey()===e,{includeSelf:!0})??null}case"File Diff":{let e=t?.treeDiffKey();return r.scene.findNode(t=>t.treeDiffKey()===e)}default:return null}});var m=(e=>(e.Changed="CHANGED",e.ChildChanged="CHILD_CHANGED",e.Added="ADDED",e.Removed="REMOVED",e))(m||{});function f(e,t,r,n){return e?t?r?"CHANGED":n?"CHILD_CHANGED":void 0:"ADDED":"REMOVED"}},863822:(e,t,r)=>{r.d(t,{AC:()=>d,Ah:()=>h,BJ:()=>p,XM:()=>c,_V:()=>u,o3:()=>o,zm:()=>m});var n=r(935283),i=r(966159),a=r(38580),l=r(288706),s=r(586459);let o=(0,a.eU)((0,i.Ok)()),u=(0,l.mg)(o,e=>"SUCCESS"===e.status?e.value.scenes.length:0),c=(0,a.eU)(0),d=(0,a.eU)(e=>{let t=e(o),r=e(c);if(t.status!==s.r.SUCCESS)throw Error("FigmaScope internal code is running before the FigmaScope scene is ready. This is a bug - please report in #figmascope.");return t.value.scenes[r]}),h=(0,l.mg)(o,e=>"SUCCESS"===e.status?e.value.resource:null),p=(0,l.mg)(h,e=>e?function(e){switch(e.type){case"server_file":return{type:"File",properties:{"File Key":e.key}};case"server_checkpoint":return{type:"File checkpoint",properties:{"Checkpoint Key":e.key}};case"server_checkpoint_diff":return{type:"Branching Checkpoint Diff",properties:{"Diff Key":e.key}};case"multiplayer_journal":return{type:"Multiplayer journal",properties:{"File key":e.fileKey,"End sequence number":e.endSequenceNumber??""}};case"multiplayer_journals":return{type:"Multiplayer journals",properties:{"File key":e.fileKey,"Start sequence number":e.startSequenceNumber??"","End sequence number":e.endSequenceNumber??""}};case"local_file":return{type:"Local .fig File",properties:{Filename:e.name}};case"local_diff_file":return{type:"Local .figd File",properties:{Filename:e.name}};case"pasted_data":return{type:"Pasted data",properties:{}};default:(0,n.xb)(e)}}(e):{type:"None",properties:{}}),m=(0,l.mg)(d,e=>e.getRootNodes())},363960:(e,t,r)=>{r.d(t,{AJ:()=>g,JN:()=>f,Nq:()=>E,Sd:()=>y,bA:()=>h,f:()=>d,hh:()=>v,jI:()=>m,vj:()=>S});var n=r(411855),i=r(44948),a=r(38580),l=r(374626),s=r(356390),o=r(618058),u=r(863822),c=r(498549);let d=n.createContext(null),h=(0,a.eU)(e=>e(c.l).followSelection,(e,t,r)=>t(c.l,e=>({...e,followSelection:r}))),{valueAtom:p,undoAtom:m,redoAtom:f,historyAtom:y}=(0,l.xP)("0:0"),g=(0,a.eU)(e=>e(p),(e,t,r)=>{let n=(0,o.SR)(r);n&&t(p,n)}),E=(0,a.eU)(e=>{let t=e(u.AC),r=e(g);return t.getNode(r)});function S({appSelection:e,setAppSelection:t}){let r=(0,l.md)(u.AC),a=(0,l.md)(h),[o,c]=(0,l.fp)(g);n.useEffect(()=>{s.Y5.setFigmascopeSelectedGuidCallback(c)},[c]);let d=o?r.getNode(o):null,p=(0,i.k9)(()=>d?v(d):null,[d]);n.useEffect(()=>{a&&t&&p&&t(p)},[a,t,p]),n.useEffect(()=>{a&&e?.guidStr&&c(e.guidStr)},[a,e?.guidStr,c])}function v(e){if(!e.isInternalOnly())return{selectionType:"canvas",guidStr:e.guidStr()};if(e.isStyle()&&e.isLocalAsset()){let t=e.nodeChange.styleType;if(t)return{selectionType:"local_style",guidStr:e.guidStr(),styleType:t}}return null}},498549:(e,t,r)=>{r.d(t,{h:()=>i,l:()=>a});var n=r(374626),i=(e=>(e.Position="Position",e.Name="Name",e.Memory="Memory",e.NodeId="Node ID",e))(i||{});let a=(0,n.E3)("figmascope-settings",{followSelection:!1,sortOrder:"Position"})},236634:(e,t,r)=>{r.d(t,{Kg:()=>y,Lm:()=>m,M_:()=>d,OA:()=>s,Rt:()=>g,VL:()=>h,WX:()=>o,W_:()=>l,_o:()=>i,aY:()=>u,hV:()=>a,jn:()=>p,kf:()=>f,qx:()=>c,sX:()=>E});var n=r(906087);function i(e){return["r","g","b","a"].every(t=>t in e)}function a(e){return"guids"in e&&e.guids instanceof Array&&e.guids.every(l)}function l(e){return["sessionID","localID"].every(t=>t in e)}function s(e){return["m00","m01","m02","m10","m11","m12"].every(t=>t in e)}function o(e){return["x","y"].every(t=>t in e)}function u(e){return e instanceof Uint8Array}function c(e,t){return e instanceof Uint8Array&&"hash"===t}function d(e,t){return"number"==typeof e&&("commandsBlob"===t||"dataBlob"===t)}function h(e){return"id"in e&&"path"in e&&l(e.id)&&a(e.path)}function p(e){return"object"==typeof e&&"guidPath"in e&&a(e.guidPath)}function m(e){return"boolean"==typeof e}function f(e){return"number"==typeof e||"bigint"==typeof e}function y(e){return"string"==typeof e}function g(e){return"object"==typeof e&&"type"in e&&"label"in e}function E(e,t){return"string"==typeof e&&n.w.has(t)}},752568:(e,t,r)=>{r.d(t,{_:()=>i,d:()=>a});class n{constructor(){this.map=new Map}has(e){return this.map.has(e)}get size(){return this.map.size}keys(){return this.map.keys()}values(){return this.map.values()}entries(){return this.map.entries()}}class i extends n{constructor(e){if(super(),e)for(let t of e)this.add(t[0],t[1])}add(e,t){this.has(e)?this.map.get(e).push(t):this.map.set(e,[t])}get(e){return this.map.get(e)??[]}}class a extends n{constructor(e){if(super(),e)for(let t of e)this.add(t[0],t[1])}add(e,t){this.has(e)?this.map.get(e).add(t):this.map.set(e,new Set([t]))}get(e){return this.map.get(e)??new Set}}},506563:(e,t,r)=>{r.d(t,{e:()=>n});let n="https://go/figmascope-docs"},906087:(e,t,r)=>{r.d(t,{b:()=>a,w:()=>n});let n=new Set(["name","characters","symbolDescription","description","url"]),i=RegExp("^(background|circle|column|component|dialog|document|ellipse|frame|group|icon|image|internal only canvas|line|padding|page|path|polygon|rectangle|row|star|text|union|vector)\\s*[\\d\\.]*$");function a(e,t){if(""===e)return"";if("show"===t)return e;let r='"'===e[0]&&'"'===e[e.length-1],n=r?e.substring(1,e.length-1):e;if(i.test(n.toLowerCase()))return e;let a=r?'"':"";return a+n[0]+n.substring(1,n.length-1).replace(/\S/g,"\u2022")+n[n.length-1]+a}},402759:(e,t,r)=>{r.d(t,{rf:()=>l,tV:()=>s,zG:()=>a});var n=r(411855),i=r(278733);function a(){return n.createElement(s,null,n.createElement("p",null,"Reading file..."))}function l({error:e}){let t="Oops! Something went wrong";return"string"==typeof e?t=e:e instanceof Error&&(t=e.message,console.error(e)),n.createElement(s,null,n.createElement("p",{style:i.sx.colorTextOndanger.colorBgDanger.p16.font20.$},t))}function s({children:e}){return n.createElement("div",{style:i.sx.fillPositionedContainer.flex.itemsCenter.justifyCenter.flexColumn.lh1_5Lines.font16.$},e)}},109022:(e,t,r)=>{r.d(t,{J:()=>r_});var n=r(411855),i=r(829816),a=r(776250),l=r(935283),s=r(189430),o=r(374626),u=r(646240),c=r(498750),d=r(586459),h=r(946689),p=r(762638),m=r(278733),f=r(175290),y=r(809840),g=r(794348),E=r(853679),S=r(863822),v=r(363960),b=r(966159),I=r(38580),C=r(27087),T=r(611978),N=r(752568),_=r(330845),D=(e=>(e[e.Fetched=0]="Fetched",e[e.Fetching=1]="Fetching",e[e.NeverFetched=2]="NeverFetched",e))(D||{});let x=(0,I.eU)(e=>{let t=e(T.OC);return"fullscreen"===t.view?`/api/file/scenegraph_validations/${t.fileKey}`:(0,_.E)(t)&&t.resource?.type==="server_file"?`/api/admin/scenegraph_validations/${t.resource.key}`:null}),A=(0,I.eU)(e=>null!=e(x)),O=(()=>{let e=(0,I.eU)((0,b.Ok)());return(0,I.eU)(t=>t(e),async(t,r)=>{let n;if(t(e).status===d.r.LOADING)return;let i=t(x);if(i){r(e,(0,b.ux)());try{n=await w(i)}catch(t){r(e,(0,b.uW)(t));return}r(e,(0,b.NY)(n))}})})();async function w(e){let t=await (0,C.GD)(e),r=new N._;for(let e of t.data.meta.data.results.violations)if("always-fail-for-testing"!==e.name)for(let t of e.instances)r.add(t.guid,t.message);return r}var P=r(914006),V=r(629019),R=r.n(V),k=r(686759),F=r(618058),L=r(843650);let B=p.cx.inlineBlock.bRadius4.minW40.w40.h16.flex.alignCenter.justifyCenter.fontSemiBold,M={[L.DB.Grouping]:B.colorBgInverse.colorTextOninverse.$,[L.DB.Shape]:B.colorBgSuccess.colorTextOnsuccess.$,[L.DB.DesignSystems]:B.colorBgComponent.colorTextOncomponent.$,[L.DB.ImmutableFrame]:B.colorBgFigjamTertiary.colorText.$,[L.DB.Media]:B.colorBgWarning.colorTextOnwarning.$,[L.DB.Other]:B.colorBgSecondary.colorBgOnselected.$},G={fontSize:9,lineHeight:"16px",fontStyle:"normal"};function U({type:e}){let t=(0,L.p7)(e);return n.createElement("div",{title:e,className:M[t],style:G},L.vu[e])}let $={CREATED:"ADD",MODIFIED:"EDIT",REMOVED:"DEL"},H={CREATED:B.minW36.colorBgSuccess.colorTextOnsuccess.$,MODIFIED:B.minW36.colorBgBrandSecondary.colorTextOnbrandSecondary.$,REMOVED:B.minW36.colorBgDanger.colorTextOndanger.$};function z({phase:e}){return n.createElement("div",{title:e,className:H[e],style:G},$[e])}function K({iconConfig:e}){if("string"!=typeof e)return n.createElement(f.Y,{width:"hug-contents"},n.createElement(z,{phase:e.phase}),"NONE"!==e.type?n.createElement(U,{type:e.type}):n.createElement("div",{className:B.$}));switch(e){case"CREATED":case"MODIFIED":case"REMOVED":return n.createElement(z,{phase:e});default:return n.createElement(U,{type:e})}}function Y({label:e}){return n.createElement("div",{title:e,className:B.b1.colorBorder.colorTextSecondary.$,style:G},e)}let j="figmascope_guid_display--canUnderline--8blSe";function W({guid:e}){let t=(0,o.md)(S.AC).getNode(e);return n.createElement(ec,{type:3,targetNode:t,fallbackCopyOnClickText:(0,F.qJ)(e)},en(e))}function J({styleId:e}){let t=(0,o.md)(S.AC).getStyle(e);return n.createElement(ec,{type:3,targetNode:t,fallbackCopyOnClickText:P.StyleId.toString(e)},ea(e,P.StyleId))}function X({variableId:e}){let t=(0,o.md)(S.AC).getVariable(e);return n.createElement(ec,{type:3,targetNode:t,fallbackCopyOnClickText:P.VariableId.toString(e)},ea(e,P.VariableId))}function q({variableCollectionId:e}){let t=(0,o.md)(S.AC).getVariableCollection(e);return n.createElement(ec,{type:3,targetNode:t,fallbackCopyOnClickText:P.VariableCollectionId.toString(e)},ea(e,P.VariableCollectionId))}function Z({overrideKey:e}){let t=(0,F.dL)(e);return n.createElement(eu,{type:t?2:0},en(e))}function Q({overridePath:e}){let{isValid:t,formatted:r}=ei(e);return n.createElement(eu,{type:t?2:0},r)}function ee({overridePath:e,targetGuid:t}){let{isValid:r,formatted:i}=ei(e),a=(0,o.md)(S.AC).getNode(t);return n.createElement(ec,{type:r?3:0,targetNode:a,fallbackCopyOnClickText:(0,F.bb)(e)},i)}function et({guid:e}){let t=(0,F.dL)(e);return n.createElement(eu,{type:t?1:0},en(e))}function er({guidPath:e}){let{isValid:t,formatted:r}=ei(e);return n.createElement(eu,{type:t?1:0},r)}function en(e){return`(${(0,F.qJ)(e)})`}function ei(e){let t=(0,F.ZJ)(e);return{isValid:e.length>0&&t.every(F.dL),formatted:`[${t.map(e=>`(${(0,F.qJ)(e)})`).join(", ")}]`}}function ea(e,t){let r=t.toGuidStrIfLocal(e);if(r)return en(r);let n=t.toRefIfSubscribed(e);return n?`${n.key.slice(0,5)}...${n.key.slice(-5)}/${n.version}`:"[unknown_asset_id]"}var el=(e=>(e[e.Invalid=0]="Invalid",e[e.Normal=1]="Normal",e[e.Override=2]="Override",e[e.Link=3]="Link",e))(el||{});let es=p.cx.inlineBlock,eo={0:es.colorTextDanger.$,1:es.colorText.fontSemiBold.$,2:es.colorTextSecondary.italic.$,3:es.colorTextFigjam.fontSemiBold.$};function eu({type:e,children:t}){return n.createElement("span",{className:eo[e]},t)}function ec({type:e,targetNode:t,fallbackCopyOnClickText:r,children:i}){let a=(0,u.Xr)(v.AJ),l=t?()=>a(t.guidStr()):()=>{(0,k.Dk)(r).then(()=>window.alert(`Copied ${r} to clipboard`)).catch(()=>window.alert(r))},s=t?e:0;return n.createElement("span",{role:"button",className:R()(p.cx.inlineBlock.$,"figmascope_guid_display--guidLink--UKqmp"),onClick:l},n.createElement(f.Y,{spacing:4},t&&n.createElement(K,{iconConfig:t.iconConfig()}),n.createElement("span",{className:R()(eo[s],j)},i),t&&n.createElement("span",{className:R()(eo[s],j,p.cx.fontNormal.$)},t.name())))}var ed=r(457473),eh=r(806247),ep=r(598045),em=r(459401),ef=r(290357),ey=r(461816),eg=r.n(ey),eE=r(44948),eS=r(96328),ev=r(479118);function eb(e,t,r){let n={...e},i=!1;for(let e of t)i=i||n[e]!==r,n[e]=r;return i?n:e}function eI(e,t){let r={...e},n=!1;for(let e of t)n=n||e in r,delete r[e];return n?r:e}var eC=(e=>(e[e.No=0]="No",e[e.Yes=1]="Yes",e))(eC||{});function eT(e,t,r,n=1){let i=[t,...r];return e[t]?n?eI(e,i):eb(e,i,!1):eb(e,i,!0)}function eN(e=1){let t=(0,I.eU)({});return(0,I.eU)(e=>e(t),(r,n,i,a)=>n(t,eT(r(t),i,a??[],e)))}let e_=(e,t)=>e.getNode(t)?.mapAncestors(e=>e.guidStr())??[],eD=(e,t)=>e.getNode(t)?.mapDescendants(e=>e.guidStr())??[],ex=(0,o.FZ)((0,I.eU)({}),(e,t,r)=>{let n=r(S.AC);switch(t.type){case"toggleNodeExpanded":return eT(e,t.guidStr,t.toggleSubtree?eD(n,t.guidStr):[]);case"expandNodeAncestors":return eb(e,e_(n,t.guidStr),!0);case"expandNodeDescendants":return eb(e,[t.guidStr,...eD(n,t.guidStr)],!0);case"collapseNodeDescendants":return eI(e,[t.guidStr,...eD(n,t.guidStr)])}});var eA=r(498549);let eO=(0,I.eU)(e=>e(eA.l).sortOrder,(e,t,r)=>t(eA.l,e=>({...e,sortOrder:r}))),ew=(0,I.eU)(e=>{let t=[eA.h.Position,eA.h.Name,eA.h.NodeId];return e(S.zm)[0]?.treeMemoryUsage!=null&&t.push(eA.h.Memory),t.sort(),t}),eP=(0,I.eU)(e=>{switch(e(eO)){case eA.h.Position:return eV;case eA.h.Name:return eR;case eA.h.Memory:return ek;case eA.h.NodeId:return eF}});function eV(e,t){let r=e.nodeChange.parentIndex?.position,n=t.nodeChange.parentIndex?.position;return null==r&&null==n?0:null==n?1:null==r||r<n?-1:r>n?1:eF(e,t)}function eR(e,t){return e.displayName().localeCompare(t.displayName())||eF(e,t)}function ek(e,t){return(t.treeMemoryUsage??0)-(e.treeMemoryUsage??0)||eF(e,t)}function eF(e,t){let{sessionID:r,localID:n}=e.guid(),{sessionID:i,localID:a}=t.guid();return r-i||n-a}var eL=r(602126),eB=r(268537),eM=r(939863);let eG=eB.ms,eU=eB.c$,e$=eB.wv;function eH({contextMenuData:{guidStr:e,position:t},onClose:r}){let i=n.useContext(v.f),a=n.useRef(null);(0,eL.ww)(a,r);let l=(0,o.md)(S.AC).getNode(e),[s,c]=(0,o.fp)(E.Oz),d=(0,u.Xr)(ex);if(null==l)return null;let h=e=>()=>{e(),r()},p=l.children().length>0,f=(()=>{if(i){let e=(0,v.hh)(l);if(e)return h(()=>i(e))}})(),y=l.isInternalOnly()||"DOCUMENT"===l.nodeType()||"CANVAS"===l.nodeType(),g=e=>h(()=>ep.glU.triggerAction(e,{guid:l.guidStr()})),b=s?.node.guidStr()===l.guidStr();return n.createElement(eG,{style:{...m.sx.fixed.$,...t}},n.createElement("div",{ref:a},f&&n.createElement(eU,{onClick:f},"Jump to node"),p&&n.createElement(eU,{onClick:h(()=>d({type:"expandNodeDescendants",guidStr:e}))},"Expand descendants"),p&&n.createElement(eU,{onClick:h(()=>d({type:"collapseNodeDescendants",guidStr:e}))},"Collapse descendants"),(f||p)&&n.createElement(e$,null),b&&n.createElement(eU,{onClick:h(()=>c({type:"clear"}))},"Stop diffing against this node"),(!b||s.type!==E.ok.Layer)&&n.createElement(eU,{onClick:h(()=>c({type:"start",diffType:E.ok.Layer,guidStr:e}))},"Layer diff against this node"),(!b||s.type!==E.ok.Tree)&&n.createElement(eU,{onClick:h(()=>c({type:"start",diffType:E.ok.Tree,guidStr:e}))},"Tree diff against this node"),!y&&n.createElement(e$,null),!y&&f&&"DOCUMENT"!==l.nodeType()&&"CANVAS"!==l.nodeType()&&n.createElement(eU,{onClick:g("debug-print-as-test-code")},(0,eM.tx)("fullscreen_actions.debug-print-as-test-code")),!y&&f&&"VECTOR"===l.nodeType()&&n.createElement(eU,{onClick:g("debug-print-vector-network-as-test-code")},(0,eM.tx)("fullscreen_actions.debug-print-vector-network-as-test-code"))))}var ez=r(358145),eK=r(723325),eY=r(904794);let ej=n.createContext(()=>!1);function eW({children:e,className:t,style:r}){let i=n.useRef(null),a=n.useCallback(()=>!!i.current?.contains(document.activeElement),[]);return n.createElement(eK.dP,{ref:i,className:t,style:r,allowVim:!0},n.createElement(ej.Provider,{value:a},e))}let eJ="figmascope_tree_item--expansionToggle--cDA3p";function eX({children:e,diffType:t,isExpanded:r,isLeaf:i,isPinned:a,isSelected:l,isChanging:s,indent:o,style:u,keyboardNavigationPath:c,toggleExpanded:d,togglePinned:h,select:p,onContextMenu:m,onMouseEnter:f,onMouseLeave:y,isEditing:g,setIsEditing:E}){let{setKeyboardNavigationElement:S,keyboardNavigationItem:v,isFocused:b}=(0,eK.M3)({path:c}),I=n.useContext(ej),C=(0,ez.ZC)(l);n.useEffect(()=>{!C&&l&&!b&&I()&&v?.focus()},[b,C,l,v,I]);let T=n.useRef(!1),N=n.useCallback(e=>e.target instanceof Element&&"BUTTON"===e.target.tagName,[]),_=n.useCallback(e=>!!(e.target instanceof Element&&(e.target.classList.contains(eJ)||e.target.parentElement?.classList.contains(eJ))),[]);return n.createElement("button",{ref:S,style:u,className:R()("figmascope_tree_item--treeItem--zf8eH",{"figmascope_tree_item--selected--eG-Br":l||b,"figmascope_tree_item--changing--5zuTD":s,"figmascope_tree_item--disableHover--y2Gw5":g}),onFocus:p,onMouseDown:g?void 0:e=>{(N(e)||_(e))&&e.detail>1&&e.preventDefault(),_(e)?T.current=e.detail>1:T.current=!0},onClick:g?void 0:e=>{T.current?T.current=!1:d(e.metaKey||e.altKey),e.currentTarget.focus()},onMouseEnter:f,onMouseLeave:y,onDoubleClick:e=>{_(e)||(E?E(!0):d(e.metaKey))},onKeyDown:e=>{(r&&(0,eK.yn)(e.code,!0)||!r&&(0,eK.lv)(e.code,!0))&&d(e.metaKey)},onContextMenu:m},n.createElement(eY.Y,null,n.createElement(eq,{indent:o,isLeaf:i,isExpanded:r}),e,h&&!g&&n.createElement(eQ,{isPinned:!!a,togglePinned:h}),t&&n.createElement(eZ,{diffType:t}),!1===g&&E&&n.createElement(e0,{onClick:()=>{E(!0)}})))}function eq({indent:e,isLeaf:t,isExpanded:r}){return n.createElement("div",{className:R()(eJ,!t&&"figmascope_tree_item--clickable--y04JT"),style:{paddingLeft:14*e,width:14,minHeight:14}},n.createElement("span",null,t?"":r?"\u25BC":"\u25B6"))}function eZ({diffType:e}){return n.createElement("div",{title:e,className:p.cx.minW16.h16.bRadius2.ml8.font12.fontBold.lh16.alignCenter.cursorDefault.match(e,{[E.tE.Changed]:p.cx.colorBgBrandSecondary.colorTextOnbrandSecondary,[E.tE.ChildChanged]:p.cx.colorBgBrand.colorTextOnbrand,[E.tE.Added]:p.cx.colorBgSuccess.colorTextOnsuccess,[E.tE.Removed]:p.cx.colorBgDanger.colorTextOndanger}).$},e===E.tE.Added&&"+",e===E.tE.Removed&&"-",(e===E.tE.Changed||e===E.tE.ChildChanged)&&"\u2732")}function eQ({isPinned:e,togglePinned:t}){return n.createElement("span",{onClick:t,className:e?"figmascope_tree_item--unpinToggle--X5czi figmascope_tree_item--_pinToggleBase--aafwk":"figmascope_tree_item--pinToggle--XSk0J figmascope_tree_item--_pinToggleBase--aafwk"},e?"Unpin":"Pin")}function e0({onClick:e}){return n.createElement("span",{onClick:e,className:"figmascope_tree_item--editButton--Gt2bw figmascope_tree_item--_pinToggleBase--aafwk"},"Edit")}let e1=n.memo(function({diffType:e,guidStr:t,iconConfig:r,indent:i,index:a,isExpanded:l,isLeaf:s,isOrphan:o,isSelected:u,isStack:c,memoryPercent:d,name:h,overrideKeyStr:m,pageSyncingStatus:y,style:g,validationInfo:E,select:S,toggle:v,showContextMenu:b}){let I=n.useCallback(e=>{e.preventDefault(),b({guidStr:t,position:{left:e.clientX,top:e.clientY}})},[t,b]);return n.createElement(eX,{diffType:e,keyboardNavigationPath:[a],isSelected:u,isLeaf:s,isExpanded:l,indent:i,style:g,select:()=>S(t),toggleExpanded:e=>v(t,e),onContextMenu:I,onMouseEnter:()=>{ep.Ez5&&ep.Ez5.editorState().figmaScopeHighlightedNode.set(t)},onMouseLeave:()=>{ep.Ez5&&ep.Ez5.editorState().figmaScopeHighlightedNode.set("")}},n.createElement(K,{iconConfig:r}),n.createElement(et,{guid:t}),o&&n.createElement("span",{className:p.cx.ml4.colorTextWarning.$},"(Orphan)"),m&&n.createElement(Z,{overrideKey:m}),n.createElement("div",{title:h,className:p.cx.ellipsis.noWrap.overflowHidden.$},h),n.createElement(f.M,null),c&&n.createElement(Y,{label:"STACK"}),n.createElement(e6,{info:E}),null!=y&&n.createElement(e4,{status:y}),null!=d&&n.createElement("span",{className:p.cx.colorTextSecondary.$,title:"Node memory usage"},d))});function e6({info:e}){if(void 0===e||0===e.forSelf&&0===e.forChildren)return null;let t=[];e.forSelf&&t.push(`${(0,eS.td)(e.forSelf,"scenegraph validation error")} for this node`),e.forChildren&&t.push(`${(0,eS.td)(e.forChildren,"scenegraph validation error")} in this node's children`);let r=p.cx.flex.alignCenter.justifyCenter.if(0===e.forSelf,p.cx.colorTextWarning,p.cx.colorTextDanger.fontSemiBold).$;return n.createElement("div",{title:t.join(", "),className:r},e.forSelf?(0,eS.td)(e.forSelf,"error"):(0,eS.LD)(e.forChildren,"Child error"))}function e8({style:e,data:{displayedLayers:t,pagesList:r,selectedGuid:i,...a},index:l}){let s=t[l],o=(0,eE.zN)(e),u=null;return s.isCanvas&&r&&(u=(0,ev.Fy)(r,s.guidStr)),n.createElement(e1,{...s,...a,isSelected:i===s.guidStr,style:o,index:l,pageSyncingStatus:u})}function e5({pagesList:e}){let t=(0,o.md)(e9),[r,i]=(0,o.fp)(v.AJ),[a,l]=n.useState(null),s=n.useRef(null);n.useEffect(()=>{let e=t.findIndex(e=>e.guidStr===r);e>=0&&s.current?.scrollToItem(e,"smart")},[t,r]);let c=(0,u.Xr)(ex);n.useEffect(()=>{c({type:"expandNodeAncestors",guidStr:r})},[c,r]);let d=n.useCallback((e,t)=>{c({type:"toggleNodeExpanded",guidStr:e,toggleSubtree:t})},[c]);return 0===t.length?n.createElement("div",null,"Empty Scene"):n.createElement(n.Fragment,null,n.createElement(ed.A,{disableWidth:!0},({height:a})=>n.createElement(eh.Y1,{itemSize:18,itemCount:t.length,height:a,ref:s,itemData:{displayedLayers:t,selectedGuid:r,pagesList:e,select:i,toggle:d,showContextMenu:l},width:"100%"},e8)),a&&n.createElement(eH,{contextMenuData:a,onClose:()=>{l(null)}}))}function e4({status:e}){let t=p.cx.cursorDefault.font14.lh0.$;switch(e){case ep.xal.NOT_LOADED:return n.createElement("span",{className:t,title:"Page not loaded due to incremental loading"},"\u2601\uFE0F");case ep.xal.REQUESTED:return n.createElement("span",{className:t,title:"Page loading in progress"},"\u26C5");case ep.xal.LOADED:return null}}let e3=(0,I.eU)(e=>{let t=e(S.AC),r=e(O),n=new Map;if(r.status!==d.r.SUCCESS)return n;let i=e=>{let t=n.get(e);if(t)return t;let r={forSelf:0,forChildren:0};return n.set(e,r),r};for(let e of r.value.keys()){i(e).forSelf++;let r=t.getNode(e)?.parent();for(;r&&!n.has(r.guidStr());)i(r.guidStr()).forChildren++,r=r.parent()}return n}),e9=(0,I.eU)(e=>{let t=e(S.AC),r=t.getRootNodes(),n=e(E.sg),i=e(ex),a=e(eP),l=e(e3),s=(()=>{switch(n.type){case E.ok.Tree:return[n.node];case E.ok.File:return n.scene.getRootNodes();default:return[]}})(),o="multiplayer_journal"===t.type,u={sortFn:a,expandedGuids:i,guidToValidationInfo:l,showOverrideKeys:!o,computeChildren:!o};return eg()(r,e=>{if(!e)return[];if(0===s.length)return e2(e,0,u);let t=te(e,s);return t?e7(e,t,0,u):function e(t,r,n,i){let a=t.guidStr(),l=i.computeChildren?t.children():[],s=0===l.length,o=!!i.expandedGuids[a],u=!1,c=eg()(l,t=>{let a=(()=>{let a=te(t,r);if(a)return e7(t,a,n+1,i);let l=r.filter(e=>e.ancestorPathStr().includes(t.guidStr()));return l.length>0?e(t,l,n+1,i):e2(t,n+1,i)})();return u=u||a[0]?.diffType!=null,a}),d={diffType:u?E.tE.ChildChanged:void 0,validationInfo:i.guidToValidationInfo.get(a),guidStr:a,iconConfig:t.iconConfig(),indent:n,isExpanded:o,isLeaf:s,isOrphan:t.isOrphan(),name:t.displayName(),overrideKeyStr:i.showOverrideKeys?t.overrideKeyStr():"",memoryPercent:t.memoryPercentStr(),isStack:t.isStack(),isCanvas:t.isCanvas()};return o?[d,...c]:[d]}(e,s,0,u)})});function e2(e,t,r){let n=e.guidStr(),i=r.computeChildren?e.children():[],a=0===i.length,l=!!r.expandedGuids[n],s={diffType:void 0,validationInfo:r.guidToValidationInfo.get(n),guidStr:n,iconConfig:e.iconConfig(),indent:t,isExpanded:l,isLeaf:a,isOrphan:e.isOrphan(),name:e.displayName(),overrideKeyStr:r.showOverrideKeys?e.overrideKeyStr():"",memoryPercent:e.memoryPercentStr(),isStack:e.isStack(),isCanvas:e.isCanvas()};return l?[s,...eg()(tt(i,r.sortFn),e=>e2(e,t+1,r))]:[s]}function e7(e,t,r,n){let i=e??t;if(!i)throw Error("Diffing two nothings");if(e&&t&&e.treeDiffKey()!==t.treeDiffKey())throw Error("Diffing nodes with mismatched keys");let a=i.guidStr(),l=tt(e?.children()??[],n.sortFn),s=tt(t?.children()??[],n.sortFn),o=n.computeChildren?(0,em.mergeArrays)(l,s,e=>e.treeDiffKey()):[],u=!1,c=eg()(o,({left:e,right:t})=>{let i=e7(e,t,r+1,n);return u=u||i[0]?.diffType!=null,i}),d=e&&t&&(0,ef.diff)(e.nodeChange,t.nodeChange,(e,t)=>"commandsBlob"===t),h=(0,E.VT)(e,t,!!d,u),p=e?.name(),m=t?.name(),f=null!=p&&null!=m&&p!==m?`${p} <=> ${m}`:i.name(),y=!!n.expandedGuids[a],g={diffType:h,validationInfo:n.guidToValidationInfo.get(a),guidStr:a,iconConfig:i.iconConfig(),indent:r,isExpanded:y,isLeaf:0===o.length,isOrphan:!!e?.isOrphan(),name:f,overrideKeyStr:n.showOverrideKeys?i.overrideKeyStr():"",memoryPercent:i.memoryPercentStr(),isStack:i.isStack(),isCanvas:i.isCanvas()};return y?[g,...c]:[g]}function te(e,t){let r=e.treeDiffKey();return t.find(e=>e.treeDiffKey()===r)}function tt(e,t){return e.slice().sort(t)}var tr=r(865618),tn=r(752795),ti=r(297666),ta=r(111161),tl=r(614869),ts=r(364898),to=r(428654),tu=r(906087),tc=r(91408),td=r(275725),th=r(620722),tp=r(860168);let tm=(0,tc.jz)(tp.HJx),tf=(0,tc.jz)(tp.EJM),ty=new WeakMap;function tg(e){let t=ty.get(e);if(void 0!==t)return t;let[r,n]=ep.Vzr.generateThumbnailForNode((0,F.qJ)(e),4*tf,4*tm,4,{forceContentsOnly:!0,isDetatchedComponentScene:!1});if(!n||0===n.length||!r)return ty.set(e,null),null;let{width:i,height:a}=r,l={url:URL.createObjectURL(new Blob([n])),renderWidth:i/4,renderHeight:a/4};return ty.set(e,l),l}let tE=(0,tc.jz)(tp.HJx),tS=(0,tc.jz)(tp.EJM);function tv({thumbnailInput:e}){let t=tg(e),r=(0,td.c6)((0,F.qJ)(e));return t?n.createElement("div",{className:p.cx.wFull.flex.flexShrink1.itemsCenter.justifyCenter.$,style:r},n.createElement(th.J,{className:"figmascope_thumbnail_preview_panel--thumbnailPreview--UmQa0",src:t.url,width:t.renderWidth>tS?tS:t.renderWidth,height:t.renderHeight>tE?tE:t.renderHeight})):n.createElement("span",{className:p.cx.noWrap.colorTextDesign.$},"Error generating thumbnail")}function tb({value:e}){switch(e.type){case tl.hy.BlobIndex:return n.createElement(tF,{index:e.value});case tl.hy.SensitiveText:return n.createElement(tA,{value:e.value});case tl.hy.Boolean:return n.createElement(tD,{value:e.value});case tl.hy.Numeric:return n.createElement(tP,{value:e.value});case tl.hy.String:return n.createElement(tx,{value:e.value});case tl.hy.Position:return n.createElement(tO,{value:e.value});case tl.hy.Color:return n.createElement(tw,{value:e.value});case tl.hy.Vector:return n.createElement(tV,{value:e.value});case tl.hy.Matrix:return n.createElement(tR,{value:e.value});case tl.hy.NodeId:return n.createElement(W,{guid:e.value});case tl.hy.StyleId:return n.createElement(J,{styleId:e.value});case tl.hy.VariableId:return n.createElement(X,{variableId:e.value});case tl.hy.VariableCollectionId:return n.createElement(q,{variableCollectionId:e.value});case tl.hy.OverrideKey:return n.createElement(Z,{overrideKey:e.value});case tl.hy.OverridePath:return e.targetGuid?n.createElement(ee,{overridePath:e.value,targetGuid:e.targetGuid}):n.createElement(Q,{overridePath:e.value});case tl.hy.GenericGuid:return n.createElement(et,{guid:e.value});case tl.hy.GenericGuidPath:return n.createElement(er,{guidPath:e.value});case tl.hy.GenericGuidPathMapping:return n.createElement(n.Fragment,null,n.createElement(et,{guid:e.from})," \u21D4 ",n.createElement(er,{guidPath:e.to}));case tl.hy.ImageHash:return n.createElement(tL,{value:e.value});case tl.hy.Bytes:return n.createElement(tk,{value:e.value});case tl.hy.Metadata:return n.createElement(tG,{value:e.value});case tl.hy.Error:return n.createElement(tU,{value:e.value});case tl.hy.Image:return n.createElement(tv,{thumbnailInput:e.value});case tl.hy.EditScope:return n.createElement(tM,{value:e.value});default:(0,l.xb)(e)}}let tI=p.cx.noWrap,tC=tI.colorTextDesign,tT=tI.colorTextSuccess,tN=tI.colorTextDanger,t_=tI.colorTextSecondary;function tD({value:e}){return n.createElement("span",{className:tT.$},e?"TRUE":"FALSE")}function tx({value:e}){return n.createElement("span",{className:tC.$},'"',e,'"')}function tA({value:e}){let t=(0,o.md)(S.AC).sensitiveTextPolicy;return n.createElement("span",{className:tC.$},'"',(0,tu.b)(e,t),'"')}function tO({value:e}){return n.createElement(f.Y,{width:"hug-contents"},n.createElement("span",{className:tC.$},(0,ts.PZ)(e)),n.createElement("span",{className:t_.$},"(compressed: `",e,"`)"))}function tw({value:e}){let t=to.F.format(e);return n.createElement(f.Y,{width:"hug-contents"},n.createElement("span",{className:p.cx.inlineBlock.w12.h12.bRadius2.$,style:{backgroundColor:t}}),n.createElement("span",{className:tC.$},t))}function tP({value:e}){return n.createElement("span",{className:tT.$},(0,tl.ZV)(e))}function tV({value:e}){return n.createElement("span",{className:tT.$},`<${(0,tl.ZV)(e.x||0)}, ${(0,tl.ZV)(e.y||0)}>`)}function tR({value:e}){let{m00:t,m01:r,m02:i,m10:a,m11:l,m12:s}=e;return n.createElement("div",{className:tT.$},"[",[[t,r,i],[a,l,s]].map(e=>`[${e.map(tl.ZV).join(", ")}]`).join(", "),"]")}function tk({value:e}){return n.createElement("span",{className:tT.$},t$(e))}function tF({index:e}){let t=(0,o.md)(S.AC).getBlobByIndex(e);return t?n.createElement("span",{className:tT.$},"Blob ",e," ::"," ","string"==typeof t?t:t$(t.bytes)):n.createElement(tU,{value:`Blob ${e} :: [MISSING]`})}function tL({value:e}){let t=tH(e,"");return n.createElement(n.Fragment,null,n.createElement("span",{className:tT.$},t),n.createElement("span",null,n.createElement(tB,{hash:t,name:"staging"})," | ",n.createElement(tB,{hash:t,name:"prod"})))}function tB({hash:e,name:t}){return n.createElement("a",{href:`https://${"staging"===t?"staging-":""}admin.figma.com/admin/image/${e}`},t)}function tM({value:e}){return n.createElement(f.Y,{width:"hug-contents"},n.createElement("span",{className:tT.$},e.type),n.createElement("span",{className:tC.$},e.label),e.editorType&&n.createElement("span",{title:"The editor type active when this scope was opened",className:t_.$},"(",e.editorType.toLowerCase(),")"))}function tG({value:e}){return n.createElement("span",{className:t_.$},"(",e,")")}function tU({value:e}){return n.createElement("span",{className:tN.$},e)}function t$(e){return`binary[${e.length}] = ${tH(e," ")}`}function tH(e,t){let r="";for(let n=0;n<e.length;++n){if(n>=30){r+="...";break}r+=function(e){let t=e.toString(16);return 1===t.length?"0"+t:t}(e[n])+t}return r}function tz({searchRef:e}){let t=(0,o.md)(S.AC),[r,i]=(0,o.fp)(v.AJ),a=(0,o.md)(v.Sd),l=n.useMemo(()=>a.map(e=>t.getNode(e)).filter(tn.isNotNullish).map(e=>({node:e,matches:[{property:"guid",value:e.guid(),isExact:!0},{property:"name",value:e.name(),isExact:!0}]})).reverse(),[t,a]),{searchState:s,requestSearch:u,clearSearchResults:c,showRecentSelections:d,indexingCount:h}=function(e,t,r){let[i,a]=n.useState({status:"initial"}),l=n.useRef(0),[s,o]=n.useState(0),u=n.useMemo(()=>(0,ti.s)((t,r)=>{let n=++l.current,i=new TaskController({priority:"user-visible"});scheduler.postTask(()=>a({status:"indexing"}),{signal:i.signal,delay:300}).catch(()=>{}),e.search(t,r,o).then(e=>{i.abort(),n===l.current&&a({status:"success",results:e})}).catch(e=>{i.abort(),n===l.current&&a({status:"failure",error:e})})}),[e]),c=n.useCallback(()=>a({status:"initial"}),[]),d=n.useCallback(()=>a({status:"recent",results:r}),[r]);return{searchState:i,requestSearch:n.useCallback(e=>{c(),u(e,t)},[c,u,t]),showRecentSelections:d,clearSearchResults:c,indexingCount:s}}(t,r,l),m=n.useRef(null);(0,eL.ww)(m,c);let f=n.useCallback(e=>{c(),i(e.node.guid())},[c,i]);return n.createElement(eK.dP,{className:p.cx.flex1.$,ref:m,allowVim:!0},n.createElement(tK,{searchRef:e,requestSearch:u,showRecentSelections:d}),"initial"!==s.status&&n.createElement(tY,{searchState:s,selectResult:f,indexingCount:h,sensitiveTextPolicy:t.sensitiveTextPolicy}))}function tK({searchRef:e,requestSearch:t,showRecentSelections:r}){let{setKeyboardNavigationElement:i}=(0,eK.M3)({path:[0,0],id:"input"}),a=e=>{let n=e.target.value;n?t(n):r()};return n.createElement("input",{ref:t=>{i(t),e.current=t},type:"text",placeholder:"Search (hover the ? for details)",className:"figmascope_layer_search_bar--searchBar--xYknN",onFocus:a,onChange:a})}function tY({searchState:e,selectResult:t,indexingCount:r,sensitiveTextPolicy:i}){return n.createElement("div",{className:p.cx.absolute.zIndexModal.colorBg.b1.colorBorder.mt2.overflowAuto.$,style:{maxHeight:450,minWidth:500,boxShadow:"0px 2px 14px var(--color-shadow, rgba(0, 0, 0, 0.15))"}},"indexing"===e.status&&n.createElement(tj,{text:`Indexing search results (this may take a moment)... ${r?`[${r}/???]`:""}`}),"failure"===e.status&&n.createElement(tj,{text:`Error: ${e.error}.`}),"recent"===e.status&&e.results.map((e,r)=>n.createElement(tW,{key:r,result:e,index:r,onClick:()=>t(e)})),"success"===e.status&&(0===e.results.length?n.createElement(tj,{text:["No results.","With view-only permissions, nodes are not loaded until their page is opened.","show"===i?"":"Searching by name or text is disabled because text is being redacted."]}):e.results.map((e,r)=>n.createElement(tW,{key:r,result:e,index:r,onClick:()=>t(e)}))))}function tj({text:e}){return n.createElement(n.Fragment,null,(Array.isArray(e)?e:[e]).map((e,t)=>n.createElement("div",{key:t,className:p.cx.colorBg.colorTextSecondary.px8.py4.$},e)))}function tW({result:e,index:t,onClick:r}){let{node:i,matches:a}=e,{setKeyboardNavigationElement:l,keyboardNavigationItem:s,isFauxFocused:o}=(0,eK.M3)({path:[1,t],id:i.guidStr()});return n.useEffect(()=>{s&&0===t&&s.fauxFocus()},[s,t]),n.createElement("button",{ref:l,className:R()(p.cx.block.wFull.px4.py8.colorText.flex.itemsCenter.alignLeft.$,"figmascope_layer_search_bar--searchResult--tW-6s",o&&"figmascope_layer_search_bar--fauxFocus--pmMRc"),onClick:r},n.createElement(f.Y,{spacing:4},n.createElement(K,{iconConfig:e.node.iconConfig()}),n.createElement(et,{guid:e.node.guid()}),n.createElement(ta.R,{className:p.cx.overflowHidden.$,text:i.nameWithPage()}),n.createElement(f.M,null),a.filter(({property:e})=>!["guid","name","type"].includes(e)).map(({property:e,value:t},r)=>{let i=(0,tl.wC)(e,t);return n.createElement(f.Y,{key:r,spacing:4,width:"hug-contents"},n.createElement("div",null,e,":"),i&&n.createElement(tb,{value:i}))})))}var tJ=r(574176);function tX({children:e}){return n.createElement("div",{className:p.cx.colorBorder.px8.py4.bb1.bSolid.$},n.createElement(f.Y,null,e))}function tq(e){let t={className:"figmascope_toolbar_components--iconButton--cvjWZ",children:n.createElement(tJ.B,{svg:e.svg}),title:e.label,"aria-label":e.label};return"href"in e?n.createElement("a",{...t,href:e.href,target:"blank"}):n.createElement("button",{...t,onClick:e.onClick,disabled:e.disabled})}var tZ=r(444890),tQ=r(816679),t0=r(167198),t1=r(247866);function t6({searchRef:e}){let t=(0,o.md)(A),[r,i]=(0,o.fp)(v.jI),[l,s]=(0,o.fp)(v.JN),u=!!n.useContext(v.f),[c,d]=(0,o.fp)(v.bA),[h,p]=(0,o.fp)(eO),m=(0,o.md)(ew);return n.createElement(tX,null,n.createElement(tz,{searchRef:e}),n.createElement("select",{name:"sort",title:"Sets the layers panel sort order",onChange:e=>{let t=e.target.value;a.az.trackDefinedEvent("figmascope.sort_order_change",{order:function(e){switch(e){case eA.h.Position:return"position";case eA.h.Name:return"name";case eA.h.Memory:return"memory";case eA.h.NodeId:return"node_id"}}(t)}),p(t)},defaultValue:h},m.map(e=>n.createElement("option",{key:e,value:e},e))),n.createElement(tq,{label:"Select Previous",onClick:()=>{i(),a.az.trackDefinedEvent("figmascope.select_prev_next",{direction:"prev",source:"button"})},disabled:!r,svg:tZ.A}),n.createElement(tq,{label:"Select Next",onClick:()=>{s(),a.az.trackDefinedEvent("figmascope.select_prev_next",{direction:"next",source:"button"})},disabled:!l,svg:tQ.A}),n.createElement(tr.S,{label:"Follow selection",disabled:!u,checked:!!u&&c,onChange:e=>{u&&d(e.currentTarget.checked)}}),t&&n.createElement(t8,null))}function t8(){let[e,t]=(0,o.fp)(O),r=e.status===d.r.LOADING;return n.useEffect(()=>{t()},[t]),n.createElement(tq,{label:r?"Fetching scene graph validation failures":"Refetch scenegraph validation failures",onClick:t,svg:r?t0.A:t1.A})}var t5=r(402759),t4=r(841563),t3=r.n(t4),t9=r(531664),t2=r(860601),t7=r(659838),re=r(498606),rt=r(864362);let rr=(0,tc.jz)(tp.hVg),rn=(0,tc.jz)(tp.k$X),ri=eN(eC.No),ra=eN(),rl=n.memo(function({panel:e,items:t,diffItems:r}){let[i,a]=(0,o.fp)(ri),[l,s]=(0,o.fp)(ra),u=n.useMemo(()=>{let e=[],n=rp(t,void 0,l),a=null!=r,s=rp(r??[],void 0,l);for(let t of(0,em.mergeArrays)(n,s,e=>rd(e,void 0)))e=a?e.concat(ry(t.left,t.right,0,void 0,i,l)):e.concat(rf(t.left??t.right,0,void 0,i,l));return e},[t,r,i,l]),c=n.createRef();function d(e){if(void 0!==u[e]){let t=u[e].value;if(t&&t.type===tl.hy.Image){let e=tg(t.value);if(e)return e.renderHeight+rn}}return rr}return n.useEffect(()=>{c.current?.resetAfterIndex(0)},[c,u]),n.createElement(ed.A,{disableWidth:!0},({height:t})=>n.createElement(eh._m,{ref:c,itemSize:d,itemCount:u.length,height:t,itemKey:e=>u[e].expansionKey,itemData:{panel:e,displayedProperties:u,togglePropertyExpanded:a,togglePropertyPinned:s},width:"100%"},rs))});function rs({style:e,index:t,data:{panel:r,displayedProperties:i,togglePropertyExpanded:a,togglePropertyPinned:l}}){let s=i[t],o=(0,ez.ZC)(s),[u,c]=n.useState(!1),d=n.useRef(void 0);n.useEffect(()=>(o&&!(0,t9.c2)(s.value,o.value)&&(clearTimeout(d.current),c(!0),d.current=setTimeout(()=>{c(!1)},250)),t2.lQ),[s,o]),n.useEffect(()=>()=>clearTimeout(d.current),[]);let h=(0,eE.zN)(e);return n.createElement(ru,{...s,style:h,isChanging:u,panel:r,index:t,togglePropertyExpanded:a,togglePropertyPinned:l})}let ro=n.memo(function({diffValue:e,value:t}){return n.createElement(n.Fragment,null,null!=e&&n.createElement(tb,{value:e}),null!=e&&n.createElement("span",null,"\u21E8"),null!=t&&n.createElement(tb,{value:t}))}),ru=n.memo(function({childExpansionKeys:e,expansionKey:t,indent:r,isExpanded:i,isChanging:l,isPinned:s,isLeaf:o,isImage:u,label:c,index:d,style:h,value:m,diffValue:y,diffType:g,panel:E,togglePropertyExpanded:S,togglePropertyPinned:v,onEdit:b}){let[I,C]=n.useState(!1),T=m&&b?I:void 0,N=I&&m&&b;return n.createElement(eX,{keyboardNavigationPath:[d],isLeaf:o,isExpanded:i,isChanging:l,indent:u?0:r,style:u?{...h,height:"fit-content",width:"100%",alignItems:"flex-start"}:h,toggleExpanded:r=>{C(!1),i||a.az.trackDefinedEvent("figmascope.expand_row",{field:c,panel:E}),S(t,r?e:[])},isPinned:s,togglePinned:u?void 0:()=>{s||a.az.trackDefinedEvent("figmascope.pin_row",{field:c,panel:E}),v(t)},diffType:g,setIsEditing:e=>{m&&b&&(C(e),a.az.trackDefinedEvent("figmascope.edit_property",{field:c}))},isEditing:T},u?n.createElement(ro,{diffValue:y,value:m}):n.createElement(n.Fragment,null,n.createElement("span",{className:p.cx.colorText.$},c),n.createElement("div",{className:p.cx.ellipsis.noWrap.overflowHidden.alignCenter.$},N?n.createElement(rc,{onEdit:b,onFinish:()=>{C(!1)},valueForEditing:m}):n.createElement(ro,{diffValue:y,value:m}))),n.createElement(f.M,null))});function rc({onFinish:e,onEdit:t,valueForEditing:r}){let[i,a]=n.useState(!1),l=(0,tl.M2)(r),[s,o]=n.useState(l||""),u=()=>{if(t&&r){let n=(0,tl.iE)(s,r.type);if(!n){a(!0);return}try{t(n)}catch(e){a(!0);return}e()}};return n.createElement(n.Fragment,null,n.createElement(t7.L,{name:"figmaScopeTreeItem",value:s,type:"string",className:R()("figmascope_properties_panel--editingInput--yqWcf",{"figmascope_properties_panel--editingInputError--rY95m":i}),required:!0,onChange:e=>{a(!1),o(e.target.value)},onKeyDown:t=>{13===t.keyCode?u():27===t.keyCode&&e()},autoFocus:!0}),n.createElement("button",{className:"figmascope_properties_panel--editingInputButtonCancel--cJrnv figmascope_properties_panel--_editingInputButtonBase--CKA0R",onClick:e},"Cancel"),n.createElement("button",{className:"figmascope_properties_panel--editingInputButtonDone--M4EHU figmascope_properties_panel--_editingInputButtonBase--CKA0R",onClick:()=>{u()}},"Done"),n.createElement("div",{className:"figmascope_properties_panel--editingWarningIcon--lTGoK","data-tooltip-type":re.Ib.TEXT,"data-tooltip":"Editing this field will use the plugin API under-the-hood. This may behave differently\n          compared to modifying this field using the UI or Selection Properties.","data-tooltip-offset-y":12},n.createElement(tJ.B,{svg:rt.A,height:"12px",width:"12px",autosize:!0})))}let rd=(e,t)=>{let r=e.key??e.label;return t?[t,r].join("."):r},rh=(e,t)=>!!t[e],rp=(e,t,r)=>[...e.filter(e=>rh(rd(e,t),r)),...e.filter(e=>!rh(rd(e,t),r))],rm=(e,t,r,n)=>{if(e)return!1;let i=n[t];return null!=i?i:r},rf=(e,t,r,n,i)=>{let a=rd(e,r),l=0===e.children.length,s=e.value?.type===tl.hy.Image,o=rm(l,a,e.expandByDefault,n),u=eg()(rp(e.children??[],a,i),e=>rf(e,t+1,a,n,i)),c={label:e.label,value:e.value,isExpanded:o,isLeaf:l,isImage:s,indent:t,expansionKey:a,childExpansionKeys:eg()(u,e=>[e.expansionKey,...e.childExpansionKeys]),isPinned:rh(a,i),onEdit:e.onEdit};return o?[c,...u]:[c]},ry=(e,t,r,n,i,a)=>{let l=e??t;if(!l)throw Error("Nothing to diff");if(e&&t&&rd(e,n)!==rd(t,n))throw Error("Mismatched keys");let s=rd(l,n),o=rp(e?.children??[],s,a),u=rp(t?.children??[],s,a),c=(0,em.mergeArrays)(o,u,e=>rd(e,s)),d=!1,h=eg()(c,({left:e,right:t})=>{let n=ry(e,t,r+1,s,i,a);return d=d||null!=n[0].diffType,n}),p=0===c.length,m=!t3()(e?.value,t?.value),f=(0,E.VT)(e,t,m,d),y=rm(p,s,l.expandByDefault,i),g=l.value?.type===tl.hy.Image,S={label:l.label,value:l.value,diffValue:e&&t&&m?t?.value:void 0,isExpanded:y,isLeaf:p,isImage:g,indent:r,expansionKey:s,childExpansionKeys:eg()(h,e=>[e.expansionKey,...e.childExpansionKeys]),isPinned:rh(s,a),diffType:f};return y?[S,...h]:[S]};var rg=r(506563),rE=r(91365),rS=r(630834);function rv({selectedNode:e,diffNode:t,onClose:r}){return n.createElement(tX,null,e?n.createElement(rb,{selectedNode:e,diffNode:t}):n.createElement(f.M,null),n.createElement(tq,{label:"Help",href:rg.e,svg:rE.A}),r&&n.createElement(tq,{label:"Close FigmaScope",onClick:r,svg:rS.default}))}function rb({selectedNode:e,diffNode:t}){let[r,i]=(0,o.fp)(E.Oz),a=(0,u.Xr)(v.AJ);return n.createElement("div",{className:p.cx.flex1.ml10.my4.$},n.createElement("div",null,t&&n.createElement("span",{className:p.cx.colorTextSecondary.$},"Diffing "),n.createElement("span",{className:p.cx.fontSemiBold.$},e.nameWithPage()),t&&n.createElement("span",{className:p.cx.colorTextSecondary.$}," against "),t&&n.createElement("span",{className:p.cx.fontSemiBold.$},t.nameWithPage())),r&&n.createElement("div",{className:p.cx.colorTextSecondary.mt8.$},n.createElement(f.Y,{spacing:8,width:"hug-contents",height:"hug-contents",verticalAlignItems:"start"},n.createElement("span",null,"Snapshot of"," ",n.createElement(h.CY,{onClick:()=>a(r.node.guidStr()),className:p.cx.colorTextFigjam.fontSemiBold.$,trusted:!0},r.node.name()),r.type===E.ok.Tree&&" and full subtree"," was taken at"," ",r.time.toLocaleTimeString("en-US")),n.createElement(h.CY,{onClick:()=>i({type:"refresh"}),className:p.cx.colorTextDesign.$,trusted:!0},"Refresh"),n.createElement(h.CY,{onClick:()=>i({type:"clear"}),className:p.cx.colorTextDanger.$,trusted:!0},"Finish"))))}function rI(){let e=(0,o.md)(S.o3),[t,r]=(0,o.fp)(S.XM),i=n.useRef(null);if(e.status!==d.r.SUCCESS)return n.createElement("div",null,"Loading...");function a(t){return e.status!==d.r.SUCCESS?0:16*Object.keys(e.value.scenes[t].getResourceMetadataDisplayInfo()).length+16+8}return n.createElement(n.Fragment,null,n.createElement(ed.A,{disableWidth:!0},({height:l})=>n.createElement(eh._m,{itemSize:a,itemCount:e.value.scenes.length,height:l,ref:i,itemData:{scenes:e.value.scenes,activeSceneIndex:t,setActiveSceneIndex:r},width:"100%"},rC)))}function rC({style:e,data:{scenes:t,activeSceneIndex:r,setActiveSceneIndex:i},index:a}){let l=t[a],s=(0,eE.zN)(e);return n.createElement(rT,{style:s,scene:l,selected:a===r,setSelected:()=>{i(a)}})}function rT(e){let{style:t,scene:r,selected:i,setSelected:a}=e,l=r.getResourceMetadataDisplayInfo();return n.createElement("button",{style:t,onClick:a,className:R()("figmascope_scene_switcher--item--Ufk-a",i&&"figmascope_scene_switcher--selected--DWHuZ")},n.createElement(f.Y,{direction:"vertical",width:"fill-parent",padding:8,spacing:4},Object.entries(l).map(([e,t])=>n.createElement("span",{key:e},n.createElement(y.E,{color:"secondary"},e,": "),n.createElement(y.E,{color:"secondary",fontFamily:"monospace",fontWeight:"bold"},t)))))}let rN="figmascope_main_view--left--CUYrg",r_=n.memo(function({embedded:e=!1,emptyStateContent:t,onClose:r,appSelection:i,setAppSelection:a,pagesList:l}){let s=(0,o.md)(S.o3);switch(s.status){case d.r.INIT:return t??n.createElement(t5.zG,null);case d.r.LOADING:return n.createElement(t5.zG,null);case d.r.FAILURE:return n.createElement(t5.rf,{error:s.error});case d.r.SUCCESS:{let t=n.createElement(rx,{embedded:e,appSelection:i,setAppSelection:a,onClose:r,pagesList:l});return e?t:n.createElement(rD,null,t)}}});function rD({children:e}){let t=(0,o.md)(S.BJ);return n.createElement("div",{className:p.cx.hFull.$},n.createElement(f.Y,{direction:"vertical",width:"fill-parent",height:"fill-parent",padding:0,spacing:0},n.createElement(f.Y,{direction:"horizontal",width:"fill-parent",height:32,padding:8,spacing:32,backgroundColor:"toolbar"},n.createElement(y.E,{fontWeight:"bold",color:"toolbar"},t.type),Object.entries(t.properties).map(([e,t])=>n.createElement("span",{key:e},n.createElement(y.E,{color:"toolbar-secondary"},e,": "),n.createElement(y.E,{color:"toolbar",fontFamily:"monospace",fontWeight:"bold"},t))),"File"===t.type&&n.createElement(h.vx,{href:`/admin/figmascope/multiplayer_journals/${t.properties["File Key"]}`,target:"_blank"},"View multiplayer journals")),e))}function rx({embedded:e,onClose:t,appSelection:r,setAppSelection:h,pagesList:p}){(0,v.vj)({appSelection:r,setAppSelection:h});let f=(0,o.md)(S._V),y=n.useRef(null),b=n.useRef(null),{windowInnerWidth:I}=(0,s.l)(),[C,T]=n.useState("15%"),[N,_]=n.useState("35%"),[D,x]=n.useState("50%"),A=n.useRef(null),[w,P]=(0,i.i)({onDrag(e){let t=e.clientX/I;T(`${(100*t).toFixed(2)}%`)}}),[V,R]=(0,i.i)({onDrag(e){let t=A.current?A.current.getBoundingClientRect().right:0,r=(e.clientX-t)/I;_(`${(100*r).toFixed(2)}%`)}}),[k,F]=(0,i.i)({onDrag(e){let t=b.current;if(!t)return;let r=(e.clientX-t.getBoundingClientRect().left)/t.clientWidth;x(`${(100*r).toFixed(2)}%`)}}),L=(0,u.Xr)(v.jI),B=(0,u.Xr)(v.JN),M=n.useCallback(e=>{let t=y.current;document.activeElement!==t&&(e.keyCode===c.Uz.FORWARD_SLASH&&t?(t.focus(),e.preventDefault()):e.keyCode===c.Uz.BRACKET_LEFT?(a.az.trackDefinedEvent("figmascope.select_prev_next",{direction:"prev",source:"keyboard"}),L()):e.keyCode===c.Uz.BRACKET_RIGHT&&(a.az.trackDefinedEvent("figmascope.select_prev_next",{direction:"next",source:"keyboard"}),B()))},[L,B]),G=(0,o.md)(v.AJ),U=(0,o.md)(v.Nq),$=(0,o.md)(E.s3),H=(0,o.md)(O),z=n.useMemo(()=>{let e;if(U&&(e=U.computedProperties(),H.status===d.r.SUCCESS)){if("DOCUMENT"===U.nodeType())e=[...e,(0,g.f3)(H.value)];else{let t=H.value.get(U.guidStr());t&&t.length&&(e=[...e,(0,g.Wh)(t)])}}return e??[]},[U,H]),K=(0,o.md)(S.Ah);return(n.useEffect(()=>{K&&a.az.trackDefinedEvent("figmascope.used",{scene_type:(()=>{switch(K.type){case"server_checkpoint":return"checkpoint";case"server_checkpoint_diff":case"local_diff_file":return"diff";case"multiplayer_journal":case"multiplayer_journals":return"multiplayer_journal";case"server_file":case"local_file":case"pasted_data":break;default:(0,l.j)(K)}return"file"})(),embedded:!!e,backend:"backend"in K?K.backend:"unknown"})},[K,e]),(0,o.md)(S.zm))?n.createElement(v.f.Provider,{value:h??null},n.createElement("div",{className:"figmascope_main_view--root--Bd-g1",style:m.sx.if(w||V||k,{cursor:"ew-resize"}).$,onKeyDown:M},f>1&&n.createElement("div",{className:rN,style:{width:C}},n.createElement(eW,{className:"figmascope_main_view--sceneSwitcherPanel--JLcE9"},n.createElement("div",{ref:A,...P({style:{position:"absolute",top:0,bottom:0,right:"-3px",width:"5px",gridArea:"center",cursor:"ew-resize",zIndex:9}})}),n.createElement(rI,null))),n.createElement("div",{className:rN,style:{width:N}},n.createElement(t6,{searchRef:y}),n.createElement(eW,{className:"figmascope_main_view--layersPanel---8k3A"},n.createElement("div",{...R({style:{position:"absolute",top:0,bottom:0,right:"-3px",width:"5px",gridArea:"center",cursor:"ew-resize",zIndex:9}})}),n.createElement(e5,{pagesList:p}))),n.createElement("div",{className:"figmascope_main_view--right--7jX1p"},n.createElement(rv,{selectedNode:U,diffNode:$,onClose:t}),U&&n.createElement("div",{className:"figmascope_main_view--rightContents--iSsTw",ref:b},n.createElement(eW,{className:"figmascope_main_view--nodeFieldsPanel--spSyC",style:{width:D}},n.createElement("div",{...F({style:{position:"absolute",top:0,bottom:0,right:"-3px",width:"5px",gridArea:"center",cursor:"ew-resize",zIndex:9}})}),U?n.createElement(rl,{panel:"middle",items:U.nodeFieldProperties(),diffItems:$?.nodeFieldProperties(),key:G}):n.createElement("h1",null,"Node not found: ",n.createElement(et,{guid:G}))),n.createElement(eW,{className:"figmascope_main_view--computedPropertiesPanel--No2ua"},U&&n.createElement(rl,{panel:"right",items:z,diffItems:$?.computedProperties(),key:G})))))):n.createElement(t5.rf,{error:"This scene has no root nodes. This is likely a bug in FigmaScope."})}}}]);

//# debugId=2104bc07-b32d-5c3f-8e38-24667fd85acd

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/2ad91fba139714194528b11b3ab2661a6e421be0/5246-57554e4d0b3794a3.min.js.map