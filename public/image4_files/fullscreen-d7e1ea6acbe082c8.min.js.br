"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="3479f7ff-37f2-5d04-ae27-fda4aee535a9")}catch(e){}}();
(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[8840],{15344:(e,t,n)=>{n.d(t,{CU:()=>o,Yg:()=>r,lI:()=>a,yu:()=>i});let a="mfa_required--ctaButton--PSKI-",o="mfa_required--learnMoreLink--17Yuc",i="mfa_required--switchAccountLink--BAgB-",r="mfa_required--secondaryText--eCIsl"},759822:(e,t,n)=>{n.d(t,{u4:()=>d,$$:()=>p});var a=n(411855),o=n(629019),i=n.n(o);let r="lazy_input--lazyInput--uH0Ln";class l extends a.PureComponent{constructor(e){super(e),this.procrastinating=!1,this.procrastinationTimer=null,this.onLazyUpdate=()=>{this.procrastinating=!1,this.updateIfNotLazy(this.state.requestedValue)},this.onChange=e=>{this.procrastinate(),this.setState({value:e.target.value}),this.props.onChange(e)},this.state={value:this.props.value}}componentDidMount(){this.props.autoFocus&&this.props.innerRef?.current&&this.props.innerRef.current.focus()}UNSAFE_componentWillReceiveProps(e){this.updateIfNotLazy(e.value)}componentWillUnmount(){this.procrastinationTimer&&(clearTimeout(this.procrastinationTimer),this.procrastinating=!1)}updateIfNotLazy(e){this.procrastinating?this.setState({requestedValue:e}):this.state.value!==e&&this.setState({value:e,requestedValue:void 0})}procrastinate(){this.procrastinating=!0,this.procrastinationTimer&&clearTimeout(this.procrastinationTimer),this.procrastinationTimer=setTimeout(this.onLazyUpdate,this.props.delay)}getProps(){let e={...this.props};return delete e.delay,delete e.innerRef,e.value=this.state.value,e.onChange&&(e.onChange=this.onChange),null==e.value&&(e.value=void 0),e.className?e.className=`${e.className} ${r}`:e.className=r,e}render(){return a.createElement("input",{...this.getProps(),ref:this.props.innerRef,dir:"auto"})}}l.displayName="LazyInput",l.defaultProps={type:"text",delay:1e3};let s=a.forwardRef((e,t)=>a.createElement(l,{...e,innerRef:t}));var c=n(3453);class d extends a.Component{constructor(){super(...arguments),this.onKeyDown=e=>{this.props.onKeyDown&&this.props.onKeyDown(e),27===e.keyCode&&e.target.blur()},this.onClick=e=>{this.props.onClick&&this.props.onClick(e)}}render(){let e={...this.props};e.className=`${this.props.defaultClass} ${this.props.className||""}`;let t=this.props.dataTestId;return delete e.defaultClass,delete e.dataTestId,this.props.onClick&&(e.onClick=this.onClick),a.createElement("button",{onKeyDown:this.onKeyDown,...e,"data-testid":t},this.props.children)}}d.displayName="ButtonBase";class p extends a.Component{render(){let{fullWidth:e,...t}=this.props;return a.createElement(d,{defaultClass:i()(c.xZ,e&&c.Ij),...t})}}p.displayName="ButtonPrimary";class u extends a.Component{render(){let e=this.props;return a.createElement(d,{defaultClass:c.HM,type:"button",...e})}}u.displayName="ButtonSecondary",a.forwardRef(function({className:e,...t},n){return a.createElement(s,{className:i()(c._Z,e),...t,ref:n})});class m extends a.PureComponent{constructor(e){super(e),this.documentKeyDown=e=>{9===e.keyCode&&this.setState({showFocus:!0})},this.documentMouseDown=()=>{this.setState({showFocus:!1})},this.onFocus=e=>{this.state.showFocus||e.target.blur()},this.classNameForInput=()=>{let e=`${c.kv} ${this.props.className||""}`;return this.state.showFocus&&(e+=` ${c.hP}`),e},this.state={showFocus:!1}}componentDidMount(){document.addEventListener("keydown",this.documentKeyDown),document.addEventListener("mousedown",this.documentMouseDown)}componentWillUnmount(){document.removeEventListener("keydown",this.documentKeyDown),document.removeEventListener("mousedown",this.documentMouseDown)}render(){let e=this.props.classOverride||this.classNameForInput(),t={...this.props,className:e};return delete t.classOverride,a.createElement("input",{type:"checkbox",onFocus:this.onFocus,...t})}}m.displayName="Checkbox"},840083:(e,t,n)=>{n.d(t,{G:()=>m,Q:()=>u});var a=n(411855),o=n(629019),i=n.n(o),r=n(966712),l=n(374626),s=n(192437),c=n(259927),d=n(977230),p=n(726732),u=(e=>(e.FILE_BROWSER="file_browser",e))(u||{});function m({entryPoint:e}){return a.createElement(s.tH,{boundaryKey:"figment-debugger",fallback:a.createElement("div",null)},a.createElement(_,{entryPoint:e}))}function _({entryPoint:e}){let[t,n]=(0,l.fp)(d.eE);return(0,a.useEffect)(()=>{n(!!(0,p.wh)())},[]),t&&(0,r.kc)().figment_debugger?a.createElement("div",{className:i()("file_browser"===e?"figment_debugger--fileBrowserContainer--KNMPr figment_debugger--container--4qsMx":"figment_debugger--container--4qsMx",c.s4,c.Dm)},a.createElement(g,null)):null}function g(){let[e,t]=(0,l.fp)(d.a4),[n,o]=(0,a.useState)([]),i=(0,a.useRef)(null),r=i.current&&i.current.value.length>0,s=r?n:e;return a.createElement("div",{className:"figment_debugger--mainWrapper--Tty8t",tabIndex:0,"data-fullscreen-intercept":!0},a.createElement(E,null,a.createElement("input",{ref:i,placeholder:"\u{1F50E} Event name",className:"figment_debugger--searchBar--uECKp",onInput:t=>{let n=t.target.value.toLowerCase();n.length<3&&o([]),o(e.filter(e=>e.requestJson.event.toLowerCase().includes(n)))}})),a.createElement(E,null,a.createElement("button",{onClick:()=>{t("clear")}},"[clear]")),r&&a.createElement(E,null,"Showing "+s.length+" of "+e.length+" most recent events"),s.map(e=>a.createElement(f,{key:e.requestJson.figment_debugger_uuid,req:e})))}function E(e){return a.createElement("div",{className:"figment_debugger--sectionWrapper--Zr0-r","data-fullscreen-intercept":!0},e.children)}function f({req:e}){let[t,n]=(0,a.useState)(!1),[o,i]=(0,a.useState)(!1),r=e.requestJson,l=(0,a.useMemo)(()=>t&&null!=r.properties?Object.entries(r.properties).map(([e,t])=>a.createElement("div",{key:e},e,": ",JSON.stringify(t))):[],[r,t]);return a.createElement(a.Fragment,null,a.createElement("div",{className:"figment_debugger--logrow--dxWpW",tabIndex:0,role:"button",onClick:()=>{n(!t),i(!1)},"data-fullscreen-intercept":!0},a.createElement("span",null,t?"\uFF0D":"\uFF0B"),"\xa0",a.createElement("span",null,e.networkState===d.tM.SUCCESS?"\u{1F49A}":e.networkState===d.tM.FAILURE?"\u{1F494}":"\u{1F9E1}"),"\xa0",a.createElement("span",{className:"figment_debugger--timestamp--BaHtN"},r.sentAt.slice(11,16)),"\xa0",r.event),t&&a.createElement("div",{className:"figment_debugger--propertiesWrapper--hZGnc"},a.createElement("div",{className:"figment_debugger--propertiesButtonsRow--ZL1rH"},a.createElement("button",{onClick:()=>{navigator.clipboard.writeText(JSON.stringify(e.requestJson.properties)),i(!0)}},"[",o?"copied":"copy","]")),l))}},355025:(e,t,n)=>{n.d(t,{K:()=>l});var a=n(411855),o=n(966712),i=n(374626),r=n(515823);function l(){let e=(0,i.md)(r._),[t,n]=a.useState(!1);return a.useLayoutEffect(()=>{e&&n(!0)},[e]),!!(0,o.kc)().mfa_for_guests&&t}},549189:(e,t,n)=>{n.r(t),n.d(t,{FullscreenPageView:()=>iu,LibraryAssetsReduxSyncing:()=>i_,onFullscreenViewRender:()=>ig}),n(137592);var a=n(411855),o=n(188507),i=n(603625),r=n(243742),l=n(627776),s=n(966712),c=n(498750),d=n(563706);let p=new Set(["-","="]),u=new Set(["-","=","f","o","p","r","s"]);function m(e){if(!u.has(e.key))return;let t=d.Ay.mac?c.xH.META:c.xH.CONTROL;(0,c.vN)(e,t)?e.preventDefault():p.has(e.key)&&(t|=c.xH.SHIFT,(0,c.vN)(e,t)&&e.preventDefault())}var _=n(794272),g=n(99380),E=n(218881),f=n(286640),y=n(179479),h=n(69961),v=n(414441),b=n(863359),N=n(201547);function I(e){return(0,v.TR)()?a.createElement(T,{...e}):a.createElement(a.Fragment,null,e.children)}function T({name:e,trackingEnabled:t,alsoTrack:n,children:o}){let i=(0,y.F)(n),r=(0,v.U2)({name:e,trackingEnabled:t,alsoTrackRef:i,isNamespace:!0,autoTrackable:!1}),{trackablePath:l,error:s}=r,c=(0,v.MF)(()=>(0,v.ET)(l)),d=(0,h.o3)(h.nt.trackableDebug),p=(0,v.MF)(()=>(0,v.R8)({componentName:"TrackableNamespace",name:e,error:s,alsoTrackedProperties:c()}));return o=(0,N.C)({children:o,isDebugMode:d,name:e,color:s?"red":"purple",depth:l.length,getTooltipText:p}),a.createElement(b.f.Provider,{value:r},o)}var x=n(192437),A=n(256975),w=n(609219),S=n(293017),P=n(986270),C=n(931828),O=n(696097),k=n(672517),D=n(720289),L=n(126049),M=n(776250),R=n(809831),V=n(988022),U=n(661843),K=n(611720),F=n(516398),B=n(288536),W=n(692609),G=n(297666),z=n(517333),H=n(529529),Y=n(325680),q=n(756085),J=n(886119),X=n(697551),$=n(384792);let j=(0,G.s)((e,t)=>{z.eD.updateFullscreenMenuState({pluginMenuData:e,widgetMenuData:t})},250);var Z=n(497306),Q=n(488983),ee=n(669178),et=n(694687),en=n(860178),ea=n(309798),eo=n(940596),ei=n(598045),er=n(588169),el=n(939863),es=n(392592),ec=n(22774),ed=n(356390),ep=n(272042),eu=n(245389);let em="keyboard-layout-preference",e_=(e,t,n)=>{t&&e(ec.FU({tab:t})),n||ed.Y5.triggerAction("toggle-keyboard-shortcuts")},eg=(e,t,n,a)=>{e(C.b({keyboard_manual_supported_bell:!0})),e(es.F.enqueue({message:(0,el.t)("keyboard_settings.new_keyboard_name_keyboard_shortcuts_are_available",{newKeyboardName:(0,er.As)(t)}),button:{text:(0,el.t)("keyboard_settings.update_keyboard_shortcuts"),action:()=>e_(e,"layout",a)},type:em,onDismiss:()=>{e(C.b({keyboard_manual_supported_bell:!0}))},timeoutOverride:2e4})),(0,er.CZ)({layout:n,detectedLayout:t,eventName:"manual_supported_keyboard_detected"})},eE=(e,t,n)=>{e(C.b({keyboard_generic_supported_first_bell:!0})),e(es.F.enqueue({message:(0,el.t)("keyboard_settings.new_keyboard_name_keyboard_shortcuts_are_now_available",{newKeyboardName:(0,er.As)(t)}),button:{text:(0,el.t)("keyboard_settings.enable_and_show_new_shortcuts"),action:()=>{e_(e,"layout",n),(0,er.rd)({layout:t})}},type:em,onDismiss:()=>{}})),(0,er.CZ)({layout:ei.aTn.UNKNOWN,detectedLayout:t,eventName:"first_generic_detected_supported_keyboard"})};async function ef(e,t){if(!z.eD)return null;let n=await z.eD.getKeyboardLayout();if(!n)return null;if(t===n)return n;let a=(0,eu.pB)(n),o=(0,er.v7)();return a===o||e(a,o,n,null!=t),n}async function ey(e,t){if(!window.isSecureContext||window.top!==window.self)return null;let n=navigator.keyboard;if(!n||!n.getLayoutMap)return null;let a=await n.getLayoutMap();if(function(e,t){for(let[n,a]of e)if(t?.get(n)!==a)return!1;return!0}(a,t))return t;let{layoutJSON:o,detectedLayoutsWeb:i}=(0,ep.$$)(a),r=(0,ep.ZN)({layoutJSON:o,detectedLayouts:i,desktopLayout:null}),l=(0,er.v7)();return r===l||e(r,l,JSON.stringify(o),null!=t),a}var eh=n(974105),ev=n(27703),eb=n(336599),eN=n(388094),eI=n(58032),eT=n(743415),ex=n(705129),eA=n(933342),ew=n(535257),eS=n(691205),eP=n(830524),eC=n(331626),eO=n(239671),ek=n(294662),eD=n(143678),eL=n(280945),eM=n(88823),eR=n.n(eM),eV=n(646240),eU=(e=>(e.NOT_INITIALIZED="not_initialized",e.ACTIVE_FIRST_TIME="active_first_time",e.ACTIVE_AFTER_IDLE="active_after_idle",e.IDLE_DUE_TO_INACTIVITY="idle_due_to_inactivity",e.IDLE_DUE_TO_TAB_SWITCH="idle_due_to_tab_switch",e))(eU||{}),eK=n(38580),eF=n(529928);let eB=(0,eK.eU)(eU.NOT_INITIALIZED),eW=(0,eF.bt)(e=>({state:e,fileKey:e.openFile?.key})),eG=[eU.ACTIVE_AFTER_IDLE,eU.ACTIVE_FIRST_TIME],ez=(0,eK.eU)(null,(e,t,n)=>{let{state:a,fileKey:o}=e(eW),i=e(eB);if((i&&eG.includes(i)?"start":"end")!=(n&&eG.includes(n)?"start":"end")){let e="";switch(n){case eU.ACTIVE_AFTER_IDLE:case eU.ACTIVE_FIRST_TIME:e="active";break;case eU.IDLE_DUE_TO_INACTIVITY:case eU.IDLE_DUE_TO_TAB_SWITCH:e="inactive";break;default:e="non-initialized"}(0,V.ds)("active_time_spent_event",o,a,{currentState:e,activeState:n},{forwardToDatadog:!0,batchRequest:!1})}t(eB,n)}),eH=["mousemove","mousedown","keydown","touchstart","touchmove","wheel"];var eY=n(915440),eq=n(279453),eJ=n(355025),eX=n(629019),e$=n.n(eX),ej=n(168198),eZ=n(762638),eQ=n(565872),e0=n(759822),e1=n(929018),e2=n(737947),e3=n(761870),e4=n(195847),e6=n(332473),e5=n(322611);function e7(e){let t=(0,o.wA)(),n=(0,o.d4)(e=>e.auth);return(0,a.useEffect)(()=>{t(e3.Ts({origin:"request_permissions_entry",redirectUrl:e2.Ay.location.pathname,formState:e4.qB.ACCOUNT_PICKER,accountPickerData:e.accountPickerData}))},[t,e.accountPickerData]),a.createElement(e5.u,{useOriginalSrcFills:!0,onBackClick:()=>{n.formState===e4.qB.ACCOUNT_PICKER?e.closeAuth():t(e3.Ts({origin:"request_permissions_entry",redirectUrl:e2.Ay.location.pathname,formState:e4.qB.ACCOUNT_PICKER,accountPickerData:e.accountPickerData}))}},a.createElement("div",{className:"request_permissions_app--authViewContainer--1XJOG"},a.createElement(e6.Ob,{id:"request-permissions-app",modal:!0,auth:n})))}var e8=n(15344);function e9(e){let t=(0,o.wA)(),n=(0,o.d4)(e=>e.visualBell),i=(0,R.lg)(),r=e.pageType||i,l=((0,o.d4)(e=>e.authedUsers)??{}).byId??{},s=e.authedUsers??Object.values(l),[c,d]=(0,a.useState)(!1);return a.createElement(ej.w,{pageType:r},c?a.createElement(e7,{accountPickerData:{authed_users:s,authed_user_access_reason:{},destination_name:(0,el.t)("mfa_required_modal.account_switcher.destination")},closeAuth:()=>{d(!1)}}):a.createElement(e1.H,{org:e.org,switchAccountsSection:a.createElement(function(){let e=(0,en.iZ)();return e?a.createElement("div",{className:e$()(eZ.cx.mt24.$,e8.Yg)},(0,el.tx)("mfa_required_modal.account_switcher.text",{userEmail:e.email,link:a.createElement(e0.u4,{defaultClass:e8.yu,onClick:()=>{d(!0)}},(0,el.tx)("mfa_required_modal.account_switcher.switch_accounts"))})):null},null),fileKey:e.fileKey}),a.createElement(eQ.h,{dispatch:t,progress:{},visualBell:n}))}var te=n(358145),tt=n(838e3),tn=n(662275),ta=n(650769),to=n(198371),ti=n(408405),tr=n(737499),tl=n(335682),ts=n(227338),tc=n(977466),td=n(799569),tp=n(67833),tu=n(321112);function tm(e){let{onDismiss:t,canUpgrade:n}=e;return a.createElement(k.fu,{name:"Workshop Expired File Banner"},a.createElement("div",{className:`workshop_expiry_footer--banner--ELf7G ${tu.yl}`},a.createElement("div",{className:"workshop_expiry_footer--bannerContent--w2Lw1"},a.createElement(tp.oS,{className:"workshop_expiry_footer--icon--mM-A8",type:tp.y1.WHITEBOARD}),a.createElement("div",{className:"workshop_expiry_footer--textContent--TN7cv"},a.createElement("span",{className:"workshop_expiry_footer--title--cmlOu text--fontPos13Whyte--VhWqH text--_fontBaseWhyte--efAjI"},(0,el.tx)("whiteboard.open_sessions.expiry_banner_title")),n&&a.createElement("span",{className:"workshop_expiry_footer--subtitle--jmRvc text--fontPos13Whyte--VhWqH text--_fontBaseWhyte--efAjI"},(0,el.tx)("whiteboard.open_sessions.expiry_banner_prompt")))),a.createElement(td.Jn,{onClick:t,className:"workshop_expiry_footer--closeButton--L8lrO"})))}var t_=n(974898),tg=n(279080);function tE(e){let{onWorkshopExpired:t}=e;!function(){let e=(0,o.wA)(),t=(0,en.iZ)(),n=!t,i=(0,to.nF)(),r=i.enabled,l=i.enabled?i.id:null,s=(0,o.d4)(e=>e.progressBarState.mode),c=(0,o.d4)(e=>e.openFile?.isTryFile),d=(0,a.useMemo)(()=>{if(!t||null==l)return!1;if(c)return!0;let e=(0,f.DN)();try{return e.get((0,tg.v6)(l)).includes(t.email)}catch(e){return!1}},[t,l,c]),p=t?.email;(0,a.useEffect)(()=>{p&&l&&c&&(0,tg.kO)(l,p)},[p,l,c]);let u=(0,tl.MY)();(0,a.useEffect)(()=>{if(r&&!(0,ti.T)(s)&&"loaded"===u.status){let t=localStorage.getItem((0,ts.K)(l));n?t?(0,ta.QA)(t):e(tn.$O({type:t_.e})):u.data?.canEdit||d||e(tn.$O({type:t_.e}))}},[e,n,r,l,s,d,u]);let m=(0,o.d4)(e=>e.openFile?.key),_=(0,o.d4)(e=>e.openFile?.name);(0,a.useEffect)(()=>{if(r&&!(0,ti.T)(s)&&n&&c&&m&&_===(0,el.t)("fullscreen.fullscreen_view_selector.untitled")){let t=localStorage.getItem((0,ts.K)(l));t&&e(tt.S({userName:t,file_key:m}))}},[r,s,l,n,c,m,_,e])}();let{showEditFileFooter:n,userCanSeeEditButton:i,dismissEditFileFooter:r}=function(e){let[t,n]=(0,a.useState)(!1),i=(0,o.wA)(),r=(0,en.iZ)(),l=(0,o.d4)(e=>e.openFile?.name),s=!r,c=(0,o.d4)(e=>e.openFile),{userCanEditFile:d,userCanSeeEditButton:p}=(0,a.useMemo)(()=>s?{userCanEditFile:!1,userCanSeeEditButton:!1}:c?{userCanEditFile:c.canEdit,userCanSeeEditButton:c.showEditButton}:{userCanEditFile:!1,userCanSeeEditButton:!1},[s,c]),u=(0,tr.Kx)(),m=(0,to.nF)(),_=m.enabled,g=(0,te.ZC)(_),E=m.enabled?m.until.valueOf():null,f=(0,a.useRef)(null),y=(0,a.useCallback)(()=>{if(!s){ei.h3O?.reconnect(!1),d||n(!0);return}i(e3.Ts({origin:"logged_out_footer",formState:e4.qB.SIGN_UP,redirectUrl:e2.Ay.location.pathname})),u?.updateFigJamTryExpiration?m.enabled&&m.until?u.updateFigJamTryExpiration(m.until):u.updateFigJamTryExpiration(new Date):i(tn.to({type:tc.x,data:{headerText:(0,el.t)("whiteboard.open_sessions.expiry_modal_title",{file_name:l||""}),subtitle:(0,el.t)("whiteboard.open_sessions.expiry_modal_subtext"),disableHiding:!0}})),e()},[i,e,s,d,l,u,m]);return(0,a.useEffect)(()=>{if(_&&E){let e=Math.max(E-Date.now(),0);f.current=setTimeout(()=>{f.current=null,y()},e)}return()=>{f.current&&clearTimeout(f.current)}},[i,_,E,y]),(0,a.useEffect)(()=>{null!=g&&_!==g&&(_?ei.h3O?.reconnect(!1):(f.current&&clearTimeout(f.current),y()))},[i,_,g,y]),{showEditFileFooter:t,dismissEditFileFooter:(0,a.useCallback)(()=>{n(!1)},[]),userCanSeeEditButton:p}}(t);return n?a.createElement(tm,{onDismiss:r,canUpgrade:i}):null}var tf=n(717156),ty=n(726864),th=n(788811),tv=n(29680),tb=n(279145),tN=n(334290),tI=n(979686),tT=n(750252),tx=n(214673),tA=n(503316),tw=n(742482),tS=n(144119),tP=n(632544),tC=n(479296),tO=n(59779),tk=n(590843),tD=n(7860),tL=n(374626),tM=n(877723),tR=n(410424),tV=n(74021),tU=n(271245),tK=n(632430),tF=n(715879),tB=n(114716),tW=n(860707),tG=n(661060),tz=n(964881),tH=n(617453),tY=n(991820);function tq(){let e=!!(0,tz.hA)(),t=(0,tH.UX)(),n=(0,ty.xn)();return a.createElement("div",{className:"positioned_design_toolbelt--root--INYO4",style:{marginBottom:n,marginRight:e?t:0}},a.createElement(tY.M,null))}var tJ=n(893606),tX=n(987850),t$=n(239737),tj=n(503457),tZ=n(554630);let tQ=new tZ.b({name:"sites_external",dependencies:[],exports:["atoms.ts","components.ts","figma_api.ts","fullscreen.tsx","hooks.ts","html_widget.ts","is_sites.ts","open_html_preview.ts","sites_fullscreen_view.ts","utils.ts"],friendFiles:[],routeHints:["sites_external"]}).createLazyComponent(()=>n.e(9293).then(n.bind(n,954539)).then(e=>e.SitesFullscreenViewInner),{loading:tj.H4.NONE,error:tj.H4.NONE,componentName:"LazySitesFullscreenViewInner"}),t0=new tZ.b({name:"slides",dependencies:[],exports:["ai/slides_ai_permissions.ts","atoms.ts","behaviors/slide_deck_add_behavior.ts","behaviors/slide_deck_reorder_row_behavior.ts","file_browser/new_slides_action.tsx","flapps/common/themed_flapp_config_data.ts","flapps/flapp_overlay.tsx","flapps/youtube/youtube_oembed.ts","hooks/experiments.ts","hooks/is_slides_hooks.ts","hooks/use_selected_slide.ts","hooks/use_selected_slide_like_nodes.ts","hooks/use_slide_like_node_ids.ts","is_slides.ts","left_panel/carousel.tsx","left_panel/generate_thumbnail.ts","left_panel/single_slide_view_utils.ts","left_panel/thumbnail_generator.tsx","onboarding/onboarding_keys.ts","onboarding/slides_ai_welcome.tsx","onboarding/slides_ten_release_announcement_overlay.tsx","presenter_view_app/audience_view_header.tsx","presenter_view_app/modal/slides_desktop_presenter_view_update.tsx","presenter_view_app/presenter_view_entry.tsx","properties_panel/color_controls/slides_color_picker.tsx","properties_panel/color_controls/slides_color_picker_context_menu.tsx","properties_panel/rewrite_controls/slides_rewrite_modal.tsx","properties_panel/rewrite_controls/slides_rewrite_text_utils.tsx","properties_panel/rewrite_controls/slides_rewrite_utils.tsx","properties_panel/slides_align_panel.tsx","properties_panel/slides_animation_panel.tsx","properties_panel/slides_border_panel.tsx","properties_panel/slides_corner_panel.tsx","properties_panel/slides_embeddable_prototype_panel.tsx","properties_panel/slides_fill_panel.tsx","properties_panel/slides_instance_panel.tsx","properties_panel/slides_interactive_widget_panel.tsx","properties_panel/slides_link_panel.tsx","properties_panel/slides_opacity_panel.tsx","properties_panel/slides_presentation_presets_entrypoint.tsx","properties_panel/slides_shadow_panel.tsx","properties_panel/slides_theme_panel.tsx","properties_panel/slides_type_panel.tsx","properties_panel/type_panel_controls/slides_text_style_actions.tsx","slide_presentation/audience_view.tsx","slide_presentation/audience_view_entry.tsx","slides_bindings.ts","slides_fullscreen_view.ts","slides_ui.ts","slides_ui.tsx","speaker_notes/speaker_notes_generate.ts","speaker_notes/speaker_notes_overlay.tsx","templates/modal/slides_template_theme_picker_modal.tsx","templates/template_atoms.ts","templates/template_hooks.ts","templates/template_publish.ts","templates/use_slides_template_publish.ts","themes/theme_atoms.ts","themes/theme_id_hooks.ts","themes/theme_utils.ts","toolbars/copy_presentation_link.tsx","toolbars/slide_view_toggle.tsx","toolbars/slides_browse_resource_modal.tsx","toolbars/slides_design_toggle.tsx","toolbars/slides_editor_toolbar.tsx","toolbars/slides_insert_embed_modal.tsx","toolbars/slides_insert_shape_modal.tsx","toolbars/slides_toolbelt.tsx","utils/slides_creation_helpers.ts","utils/slides_local_storage.ts","utils/slides_logging.ts","utils/slides_mode_toggle.ts","utils/slides_panel_helpers.ts","utils/slides_select_view_helpers.ts","utils/slides_selection.ts","utils/slides_tone_dial_menu.ts"],friendFiles:[],routeHints:["slides"]}).createLazyComponent(()=>Promise.all([n.e(2399),n.e(1398),n.e(8662),n.e(1876),n.e(3036),n.e(4195),n.e(441),n.e(8547),n.e(4586),n.e(7054),n.e(214),n.e(4920),n.e(3779),n.e(6739),n.e(9682),n.e(6829)]).then(n.bind(n,779750)).then(e=>e.SlidesFullscreenViewInner),{componentName:"LazySlidesFullscreenViewInner",error:tj.H4.NONE,loading:tj.H4.NONE});var t1=n(809511),t2=n(830646);function t3(e){let t=e.search(/</),n=e.search(/>/);return e.substring(t,n+1)}var t4=n(170960),t6=n(100197),t5=n(338400),t7=n(801605),t8=n(152811),t9=n(363668),ne=n(548377),nt=n(690003),nn=n(933484),na=n(973801),no=n(319008),ni=n(165195),nr=n(286886),nl=n(359919),ns=n(696963),nc=n(477759),nd=n(304657),np=n(10706),nu=n(82963),nm=n(287832);function n_({children:e}){return a.createElement(nm.G.Provider,{value:{loggerEventName:"design_navigate"}},e)}var ng=n(999004),nE=n(46843),nf=n(425542);let ny=a.memo(({shouldShowDragAndDropBorder:e})=>{let t=(0,tv.p8)("isReadOnly"),n=(0,o.d4)(e=>e.progressBarState),i=(0,tv.p8)("loadingEmbeds"),r=(0,t6.ut)(ei.Ez5?.uiState().showCanvasSearch,!1),l=(0,t5.Lk)(),c=(0,a.useRef)(null),d=(0,o.d4)(e=>e.userFlags),p=!!(0,s.kc)().internal_only_debug_tools||!!d.has_cursor_bot_onboarding_v2,u=(0,o.d4)(e=>e.openFile),m=u?u.key:"",_=(0,o.d4)(e=>e.universalInsertModal),g=(0,o.wA)();return(0,tK.Gb)(m),(0,t4.W)(),!function(){let e=a.useRef(document.activeElement),t=(0,t2.j)("Focus changed"),n=a.useCallback(()=>{let n=document.activeElement;n!==e.current&&(t({previousActiveElement:t3(e.current?.outerHTML||""),newActiveElement:t3(n?.outerHTML||"")}),e.current=n)},[t]);a.useEffect(()=>{if((0,s.kc)().eu_focus_logging)return document.addEventListener("focusin",n),()=>{document.removeEventListener("focusin",n)}},[n])}(),a.createElement(n_,null,a.createElement(B.ED,null),a.createElement(ng.sk,null,n.mode!==t1.Oin.OFF&&a.createElement("div",{className:nf._q}),a.createElement(t8.pO,{initialFilterState:{currentPage:!1}},i.map(e=>a.createElement(nn._,{key:`loading-embed-${e}`,nodeId:e})),a.createElement(nE.qn,null),a.createElement(nu.u,null),r&&a.createElement(nl.n,null),(0,s.kc)().ce_al_experiments_on&&a.createElement(nl.n,null),a.createElement(nt.GR,null),a.createElement(nt.bu,null),a.createElement(nc.J,null),a.createElement(nE.XI,{commentsDetailContainerRef:c}),(0,s.kc)().cursor_bot&&p&&a.createElement(ni.S,null),a.createElement(na.X,null),a.createElement(t9.J,null),a.createElement(no.Nz,null),a.createElement("div",{ref:c}),a.createElement(nE.uU,null),!t&&a.createElement(ns.E,null),a.createElement(ne.G,null),e&&a.createElement(no.X5,null)),a.createElement(t7.A,{isFigjamEditor:!1,isDesignEditor:!0,openFile:u}),_.showing&&a.createElement(x.tH,{boundaryKey:"FdBrowseResourceModal",onError:()=>{g(es.F.enqueue({message:"Unable to open inserts menu",type:"react-error"}))},fallback:x.H4.NONE_I_KNOW_WHAT_IM_DOING},a.createElement(nd.k,null))),l&&a.createElement(nr.K,{className:nf.PA},a.createElement(np.s,null)))});var nh=n(346124),nv=n(574176),nb=n(308977),nN=n(393812),nI=n(239349),nT=n(92597),nx=n(843495),nA=n(980150),nw=n(564092);let nS="dev_handoff_canvas_pill--dimension--WEwpp",nP="dev_handoff_canvas_pill--size--9ZpSZ";var nC=n(419902);function nO(e){return e===ei.mKm.HUG_CONTENT?"Auto":e===ei.mKm.FILL_CONTAINER?"100%":"Fixed"}function nk(e){let t=(0,nI.mJ)(e);if(!t)return null;let n="INSTANCE"===t.type||"SYMBOL"===t.type||t.isStateGroup||t.isInstanceSublayer||t.isSymbolSublayer,a=!0;return"TEXT"===t.type&&(t.autoRename||t.characters.substring(0,10)===t.name.substring(0,10))&&(a=!1),{guid:t.guid,name:t.name,showName:a,type:t.type,isFigmaPurple:n,boundingBox:t.absoluteBoundingBox,hasEnabledStaticImagePaint:t.hasEnabledStaticImagePaint,isState:t.isState,isStateGroup:t.isStateGroup,isUIElement:(0,nN.$F)(t)&&!t.isStateGroup,stackCounterAlignItems:t.stackCounterAlignItems,stackMode:t.stackMode,isGroup:t.isGroup,canHaveStatus:t.canHaveStatus,hasStatus:t.hasStatus,horizontalSizeMode:nO(ei.Qa7.stackHorizontalSize(t.guid)),verticalSizeMode:nO(ei.Qa7.stackVerticalSize(t.guid)),size:t.size,objectsPanelThumbnailId:t.objectsPanelThumbnailId}}function nD(e){let t=(0,nh.lerp)(0,2,(e-.1)*5);return(0,nh.clamp)(t,0,2)}function nL(e){let t=nk(e.guid),n=(0,t6.J2)((0,tH.UK)().showGuids),o=(0,nI.uQ)(),i=a.useRef(null),r=a.useCallback(e=>-nD(e),[]),l=t&&(t.hasStatus||t.canHaveStatus&&t.guid===o)?e=>e-20:void 0;return t&&"SECTION"!==t.type?a.createElement(nA.M,{ref:i,node:t,key:e.guid,offsetX:-2,offsetY:r,largeBorderRadius:!0,maxWidth:l,dataTestId:"devHandoffLayerNamePill"},a.createElement("div",{className:"dev_handoff_canvas_pill--layerName--eX5Zu"},a.createElement(nA.T,{node:t}),t.showName&&a.createElement("span",{className:"dev_handoff_canvas_pill--pillText--7B3-h ellipsis--ellipsis--Tjyfa"},t.name,n&&` (${e.guid})`))):null}let nM=e=>e.toLocaleString("en",{maximumFractionDigits:5,useGrouping:!1});function nR(e,t=0){let n=(0,nb.v4)(),a=(0,nT.qM)(n,t,nM),{variable:o,variableDisplayName:i,isSuggested:r}=(0,nw.xp)(e,t);return o?{value:i,isSuggested:r}:{value:a}}function nV(e){let t=nk(e.guid),{value:n,isSuggested:o}=nR("WIDTH",t?.size.x??0),{value:i,isSuggested:r}=nR("HEIGHT",t?.size.y??0),l=a.useCallback(e=>nD(e),[]);return t&&t.isUIElement?a.createElement(nA.M,{node:t,key:e.guid,dataTestId:"devHandoffSizePill",centered:!0,bottom:!0,offsetY:l,largeBorderRadius:!0},a.createElement("div",{className:"dev_handoff_canvas_pill--sizeInfo--pKiuc text--fontPos11--2LvXf text--_fontBase--QdLsd"},a.createElement("span",{className:nS},(0,el.tx)("fullscreen.properties_panel.transform_panel.w")),a.createElement("span",null,t.horizontalSizeMode),a.createElement("span",{className:nP,"data-testid":"canvasPillWidth"},n),a.createElement("span",null,o&&a.createElement(nv.B,{svg:nC.A})),a.createElement("span",{className:nS},(0,el.tx)("fullscreen.properties_panel.transform_panel.h")),a.createElement("span",null,t.verticalSizeMode),a.createElement("span",{className:nP,"data-testid":"canvasPillHeight"},i),a.createElement("span",null,r&&a.createElement(nv.B,{svg:nC.A})))):null}function nU(){let{hoveredNode:e,selection:t}=(0,_.R)(e=>{let t=Object.keys(e.mirror.sceneGraphSelection)[0],n=e.mirror.appModel.hoveredNode;return{hoveredNode:n===nx.Hr?null:n,selection:t===nx.Hr?null:t}}),[n,o]=a.useState(!1),i=a.useCallback(e=>{e.altKey!==n&&o(e.altKey)},[n]);return(a.useEffect(()=>(document.addEventListener("pointermove",i),document.addEventListener("keyup",i),document.addEventListener("keydown",i),()=>{document.removeEventListener("pointermove",i),document.removeEventListener("keyup",i),document.removeEventListener("keydown",i)})),n)?null:a.createElement(a.Fragment,null,t&&e===t&&a.createElement(nV,{guid:t}),e&&a.createElement(nL,{guid:e}))}var nK=n(593392),nF=n(109388),nB=n(752795),nW=n(939683),nG=n(153234),nz=n(975350),nH=n(949632),nY=n(779709),nq=n(630331),nJ=n(457630),nX=n(601607),n$=n(319882),nj=n(767129),nZ=n(844519),nQ=n(882316),n0=n(663668),n1=n(860601),n2=n(812115),n3=n(522739),n4=n(966981),n6=n(259927),n5=n(798099),n7=n(662531),n8=n(341860),n9=n(498606),ae=n(100303),at=n(233890),an=n(869156),aa=n(788612),ao=n(712685);let ai="annotation--annotationContainer--k4xiM",ar="annotation--wrapperEditing--C2Zlx",al="annotation--createAnnotation--tWKSM annotation--_annotationBase--MPByC",as="annotation--contentContainer--vSuqs",ac="annotation--properties--1p6UF",ad="annotation--noValue--HHQOU",ap="annotation--propertyOptionIconSvg--LypST",au="annotation--icon--w1enR",am="annotation--chit--3je6E",a_="annotation--solidPaint--ClR6h",ag="annotation--solidPaintValue--9PQMf annotation--_ellipsis--8F1VE",aE="annotation--variablePill--VNxoI";function af({valueProps:e,isHovered:t,variableContainerClassName:n}){if("mixed"===e.format){let o=e.value.some(e=>!!e.variable);return a.createElement("div",{className:e$()("annotation--multipleVariableWrapper--OW3M1",o&&"annotation--vertical--zmpVv")},e.value.map((i,r)=>a.createElement("div",{key:r,className:"annotation--multipleVariableValue--5-5xk"},a.createElement(af,{valueProps:i,isHovered:t,variableContainerClassName:n}),r<e.value.length-1&&!o&&a.createElement("span",null,", "))))}let o=`${(0,aa.m3)(e)}`;return e.variable?a.createElement(ao.w,{dataTestId:"styledValueVariable",containerClassName:e$()(aE,n),text:e.variable,disableHover:!0,isHovered:t,isInferred:e.isSuggestedVariable,tooltip:e.isSuggestedVariable?(0,el.t)("dev_handoff.variables.inferred_value",{value:o}):o}):a.createElement(a.Fragment,null,o)}var ay=n(221537);function ah({svg:e}){return a.createElement(nv.B,{svg:e,className:e$()(au,ap)})}var av=n(258890),ab=n(996620),aN=n(957069);function aI({node:e,variable:t,isPreview:n=!1}){return t?n?a.createElement(a.Fragment,null,t.name):a.createElement(ao.w,{containerClassName:aE,text:t.name,disableHover:!0}):(0,ay.rO)(e.stackPrimaryAlignItems)?(0,el.tx)("dev_handoff.annotations.auto"):a.createElement(a.Fragment,null,(0,aa.nd)(e.stackSpacing,"px"))}function aT({node:e,isPreview:t=!1}){let n=(0,an.u)(e.boundVariables?.itemSpacing?.id);return a.createElement("div",{className:n?void 0:"annotation--spacingProperty--RCjSM annotation--coloredProperty--OTQ6l"},a.createElement("span",null,a.createElement(aI,{node:e,variable:n,isPreview:t})))}function ax({rawValues:e,variables:t,isPreview:n=!1}){if(e.length!==t.length)throw Error("<ManySidedProperty /> must have the same number of rawValues and variables");let o=t.map((t,n)=>({value:e[n],format:"pixels",variable:t?.name})),i=o[0]?.variable;for(let e of o)if(e.variable!==i){if(n)return(0,el.tx)("fullscreen.mixed");return a.createElement(af,{variableContainerClassName:aE,valueProps:{format:"mixed",value:o}})}return i?n?a.createElement(a.Fragment,null,i):a.createElement(af,{variableContainerClassName:aE,valueProps:o[0]}):e.some(t=>t!==e[0])?n?(0,el.tx)("fullscreen.mixed"):a.createElement(af,{variableContainerClassName:aE,valueProps:{format:"pixels",value:e}}):a.createElement(af,{variableContainerClassName:aE,valueProps:{format:"pixels",value:e[0]}})}function aA({node:e,isPreview:t=!1}){let{stackTopPadding:n,stackRightPadding:o,stackBottomPadding:i,stackLeftPadding:r}=e,l=(0,an.u)(e.boundVariables?.paddingTop?.id),s=(0,an.u)(e.boundVariables?.paddingRight?.id),c=(0,an.u)(e.boundVariables?.paddingBottom?.id),d=(0,an.u)(e.boundVariables?.paddingLeft?.id),p=[l,s,c,d].some(e=>!!e);return a.createElement("div",{className:e$()(p?void 0:"annotation--paddingProperty--ckvG6 annotation--coloredProperty--OTQ6l")},a.createElement("span",null,a.createElement(ax,{rawValues:[n,o,i,r],variables:[l,s,c,d],isPreview:t})))}function aw({node:e}){if("WRAP"===e.stackWrap)return a.createElement(ah,{svg:aN.A});switch(e.stackMode){case"HORIZONTAL":return a.createElement(ah,{svg:av.A});case"VERTICAL":return a.createElement(ah,{svg:ab.A});default:return null}}function aS({node:e}){if("WRAP"===e.stackWrap)return(0,el.tx)("fullscreen.properties_panel.stack_panel.wrap");switch(e.stackMode){case"HORIZONTAL":return(0,el.tx)("dev_handoff.annotations.autolayout_horizontal");case"VERTICAL":return(0,el.tx)("dev_handoff.annotations.autolayout_vertical");default:return null}}function aP({node:e}){if("NONE"===e.stackMode)return null;if("HORIZONTAL"===e.stackMode)switch(e.stackPrimaryAlignItems){case"MIN":switch(e.stackCounterAlignItems){case"MIN":return(0,el.tx)("dev_handoff.annotations.alignment.top_left");case"CENTER":return(0,el.tx)("dev_handoff.annotations.alignment.left");case"MAX":return(0,el.tx)("dev_handoff.annotations.alignment.bottom_left");case"BASELINE":return(0,el.tx)("dev_handoff.annotations.alignment.baseline_left")}case"CENTER":case"SPACE_BETWEEN":case"SPACE_EVENLY":switch(e.stackCounterAlignItems){case"MIN":return(0,el.tx)("dev_handoff.annotations.alignment.top_center");case"CENTER":return(0,el.tx)("dev_handoff.annotations.alignment.center");case"MAX":return(0,el.tx)("dev_handoff.annotations.alignment.bottom_center");case"BASELINE":return(0,el.tx)("dev_handoff.annotations.alignment.baseline_center")}case"MAX":switch(e.stackCounterAlignItems){case"MIN":return(0,el.tx)("dev_handoff.annotations.alignment.top_right");case"CENTER":return(0,el.tx)("dev_handoff.annotations.alignment.right");case"MAX":return(0,el.tx)("dev_handoff.annotations.alignment.bottom_right");case"BASELINE":return(0,el.tx)("dev_handoff.annotations.alignment.baseline_right")}}switch(e.stackPrimaryAlignItems){case"MIN":switch(e.stackCounterAlignItems){case"MIN":return(0,el.tx)("dev_handoff.annotations.alignment.top_left");case"CENTER":return(0,el.tx)("dev_handoff.annotations.alignment.top_center");case"MAX":return(0,el.tx)("dev_handoff.annotations.alignment.top_right");case"BASELINE":return null}case"CENTER":case"SPACE_BETWEEN":case"SPACE_EVENLY":switch(e.stackCounterAlignItems){case"MIN":return(0,el.tx)("dev_handoff.annotations.alignment.left");case"CENTER":return(0,el.tx)("dev_handoff.annotations.alignment.center");case"MAX":return(0,el.tx)("dev_handoff.annotations.alignment.right");case"BASELINE":return null}case"MAX":switch(e.stackCounterAlignItems){case"MIN":return(0,el.tx)("dev_handoff.annotations.alignment.bottom_left");case"CENTER":return(0,el.tx)("dev_handoff.annotations.alignment.bottom_center");case"MAX":return(0,el.tx)("dev_handoff.annotations.alignment.bottom_right");case"BASELINE":return null}}}var aC=n(416095),aO=n(750029),ak=n(428877),aD=n(991443),aL=n(238093);function aM(e,t){let n=(0,o.d4)(e=>e.library),a=(0,aL.f$)(e),i=(0,nI.mJ)(a);if(!e||!a||!i)return null;let r=(0,aC.Gp)(e.key,[a],n);if(!r)return null;let l=r.value;return"DANGLING"===r.kind&&(l.style_type=t),l.description=i.description,l.name=i.name,l.isLocal="LOCAL"===r.kind,l}function aR(e,t){if(1===t)return e;let n=(100*t).toLocaleString("en",{maximumFractionDigits:2})+"%";return`${e} \xb7 ${n}`}function aV(e,t,n){let{opacity:a=1}=e;switch(e.type){case"SOLID":{if(!e.color)return null;let{color:o}=e,{a:i=1}=o,r=n({...o,a:i*a},{alphaInPercent:!0});return t?t.name:r}case"GRADIENT_LINEAR":return aR((0,el.t)("dev_handoff.selection_colors.gradient_linear"),a);case"GRADIENT_ANGULAR":return aR((0,el.t)("dev_handoff.selection_colors.gradient_angular"),a);case"GRADIENT_DIAMOND":return aR((0,el.t)("dev_handoff.selection_colors.gradient_diamond"),a);case"GRADIENT_RADIAL":return aR((0,el.t)("dev_handoff.selection_colors.gradient_radial"),a);case"IMAGE":return aR((0,el.t)("dev_handoff.annotations.image"),a);case"VIDEO":return aR((0,el.t)("dev_handoff.annotations.video"),a);default:return null}}function aU({paints:e,styleRef:t,variables:n}){let o=n?.[0],i=(0,ak.Ig)(),r=(0,an.u)(o?.id),l=aM(t,"FILL");return 0===e.length?null:l?a.createElement(a.Fragment,null,l.name):e.length>1?(0,el.tx)("dev_handoff.annotations.multiple"):a.createElement(a.Fragment,null,aV(e[0],r,i))}function aK({paints:e}){let t=e[0];return a.createElement(aO.J,{className:am,tabIndex:-1,paint:t,allowMouseDownPropagation:!0})}function aF({paint:e,variableAlias:t}){let n=(0,ak.Ig)(),o=(0,an.u)(t?.id),i=aV(e,o,n);return i?a.createElement("div",{className:a_},a.createElement(aO.J,{className:am,paint:e,tabIndex:-1,allowMouseDownPropagation:!0}),a.createElement("span",{className:ag,title:i},o?a.createElement(ao.w,{containerClassName:aE,text:i,disableHover:!0}):i)):null}function aB({styleRef:e,styleType:t,hideIcon:n=!1}){let i=aM(e,t);return(!function(e){let t=(0,o.d4)(e=>e.library),n=(0,aL.f$)(e),a=n?(0,aC.Gp)(e.key,[n],t):void 0;(0,aC.w$)(a)}(e),i)?a.createElement("div",{className:a_},!n&&a.createElement("div",{className:e$()("annotation--styleChit--yCQ3O annotation--chit--3je6E",au)},a.createElement(aD.zi,{dsStyle:i})),a.createElement("span",{className:ag,title:i.name},i.name)):null}function aW({paints:e,styleRef:t,variables:n}){let{data:o}=e;return t?a.createElement(aB,{styleRef:t,styleType:"FILL"}):0===o.length?null:a.createElement("div",{className:"annotation--mixedValues--Z0qIk"},o.map((e,t)=>a.createElement(aF,{key:t,paint:e,variableAlias:n?.[t]})))}var aG=n(798558),az=n(723081),aH=n(666139);function aY({effects:e}){if(0===e.length)return null;if(e.length>1)return(0,el.tx)("fullscreen.mixed");switch(e[0].type){case"DROP_SHADOW":return(0,el.tx)("dev_handoff.annotations.shadow");case"BACKGROUND_BLUR":return(0,el.tx)("fullscreen.properties_panel.effects.background_blur");case"FOREGROUND_BLUR":return(0,el.tx)("fullscreen.properties_panel.effects.layer_blur");case"INNER_SHADOW":return(0,el.tx)("fullscreen.properties_panel.effects.inner_shadow");case void 0:return null}}function aq({effects:e,styleRef:t}){return a.createElement(a.Fragment,null,e.map((e,n)=>a.createElement(aX,{effect:e,styleRef:t,key:n})))}let aJ=new az.SU;function aX({effect:e,styleRef:t}){let n=(0,ak.Ig)(),o=t&&a.createElement(a$,{styleRef:t});switch(e.type){case"DROP_SHADOW":case"INNER_SHADOW":{let{color:t}=e,i=t?n(t,{alphaInPercent:!0}):null,r=[e.offset?.x,e.offset?.y,e.radius,e.spread].filter(e=>void 0!==e).join(", ");return a.createElement("div",null,o,a.createElement("span",null,a.createElement(aY,{effects:[e]})),t&&a.createElement(a.Fragment,null,a.createElement("span",null),a.createElement("div",{className:a_},a.createElement(aO.J,{className:e$()(am,"annotation--chitInline--vG6cM"),color:t,allowMouseDownPropagation:!0}),a.createElement("span",{className:ag,title:i||void 0},i))),a.createElement("span",null),a.createElement("span",null,r),e.blendMode&&"NORMAL"!==e.blendMode&&a.createElement(a.Fragment,null,a.createElement("span",null),a.createElement("span",null,aJ.format(e.blendMode))))}case"BACKGROUND_BLUR":case"FOREGROUND_BLUR":return a.createElement("div",null,o,a.createElement("span",null,a.createElement(aY,{effects:[e]})),void 0!==e.radius&&a.createElement("span",null,` ${(0,aa.nd)(e.radius,"px")}`));case void 0:return null}}function a$({styleRef:e}){let t=(0,aL.f$)(e),n=(0,nI.mJ)(t);return t&&n?a.createElement("div",null,n.name):null}var aj=n(142284);let aZ=e=>{switch(e){case"RIGHT":return(0,el.t)("inspect_panel.typography.align_right");case"CENTER":return(0,el.t)("inspect_panel.typography.align_center");case"JUSTIFIED":return(0,el.t)("inspect_panel.typography.align_justified");case"LEFT":return(0,el.t)("dev_handoff.annotations.align_left")}};function aQ(){return a.createElement(nv.B,{svg:aj.A,className:e$()(au,ap)})}function a0({textAlignHorizontal:e}){return a.createElement(a.Fragment,null,aZ(e))}function a1({lineHeightOrMixed:e,variableAlias:t,isPreview:n}){let o=(0,an.u)(t?.id);if("mixed"===e)return(0,el.tx)("fullscreen.mixed");if(o&&n)return a.createElement(a.Fragment,null,o.name);if("PERCENT"===e.units&&100===e.value)return(0,el.tx)("dev_handoff.annotations.auto");let i="RAW"===e.units?{value:100*e.value,units:"PERCENT"}:e;return a.createElement(aa.lN,{variableContainerClassName:aE,valueProps:{format:"fig_number",value:i,variable:o?.name}})}function a2({fontNameOrMixed:e,variableAlias:t,isPreview:n}){let o=(0,an.u)(t?.id);return"mixed"===e?(0,el.tx)("fullscreen.mixed"):o&&n?a.createElement(a.Fragment,null,o.name):a.createElement(aa.lN,{variableContainerClassName:aE,valueProps:{value:e.family,variable:o?.name}})}function a3({fontWeightOrMixed:e,variableAlias:t,isPreview:n}){let o=(0,an.u)(t?.id);return"mixed"===e?(0,el.tx)("fullscreen.mixed"):(o&&o.resolvedType!==ei.rXF.FLOAT&&(o=null),o&&n)?a.createElement(a.Fragment,null,o.name):a.createElement(aa.lN,{variableContainerClassName:aE,valueProps:{value:e,variable:o?.name}})}var a4=n(313888),a6=n(595869),a5=n(560185),a7=n(30562),a8=n(438806),a9=n(904595),oe=n(235107),ot=n(58502),on=n(144919);function oa({node:e}){let{symbolId:t}=e;if(!t)return a.createElement(a.Fragment,null);let n=n8.q.instance.get(t);if(!n)return a.createElement(a.Fragment,null);if(n.isState){let e=n.parentNode?.name;return a.createElement(a.Fragment,null,`${e} (${n.name})`)}return a.createElement(a.Fragment,null,n.name)}let oo=new Map([[ei.L5V.HEIGHT,{label:(0,el.tx)("fullscreen.properties_panel.transform_panel.height"),category:"dimension",Icon:()=>a.createElement(ah,{svg:a8.A}),PreviewValue:({node:e})=>a.createElement(op,{value:e.size.y,variableAlias:e.boundVariables.height,isPreview:!0}),DisplayValue:({node:e})=>a.createElement(op,{value:e.size.y,variableAlias:e.boundVariables.height}),index:0}],[ei.L5V.MIN_HEIGHT,{label:(0,el.tx)("fullscreen.properties_panel.stack_panel.minmax.min_height_tt"),category:"dimension",Icon:()=>a.createElement(ah,{svg:a8.A}),PreviewValue:({node:e})=>a.createElement(op,{value:e.minHeight,variableAlias:e.boundVariables.minHeight,isPreview:!0}),DisplayValue:({node:e})=>a.createElement(op,{value:e.minHeight,variableAlias:e.boundVariables.minHeight}),index:0}],[ei.L5V.MAX_HEIGHT,{label:(0,el.tx)("fullscreen.properties_panel.stack_panel.minmax.max_height_tt"),category:"dimension",Icon:()=>a.createElement(ah,{svg:a8.A}),PreviewValue:({node:e})=>a.createElement(op,{value:e.maxHeight,variableAlias:e.boundVariables.maxHeight,isPreview:!0}),DisplayValue:({node:e})=>a.createElement(op,{value:e.maxHeight,variableAlias:e.boundVariables.maxHeight}),index:0}],[ei.L5V.WIDTH,{label:(0,el.tx)("fullscreen.properties_panel.transform_panel.width"),category:"dimension",Icon:()=>a.createElement(ah,{svg:oe.A}),PreviewValue:({node:e})=>a.createElement(op,{value:e.size.x,variableAlias:e.boundVariables.width,isPreview:!0}),DisplayValue:({node:e})=>a.createElement(op,{value:e.size.x,variableAlias:e.boundVariables.width}),index:0}],[ei.L5V.MIN_WIDTH,{label:(0,el.tx)("fullscreen.properties_panel.stack_panel.minmax.min_width_tt"),category:"dimension",Icon:()=>a.createElement(ah,{svg:oe.A}),PreviewValue:({node:e})=>a.createElement(op,{value:e.minWidth,variableAlias:e.boundVariables.minWidth,isPreview:!0}),DisplayValue:({node:e})=>a.createElement(op,{value:e.minWidth,variableAlias:e.boundVariables.minWidth}),index:0}],[ei.L5V.MAX_WIDTH,{label:(0,el.tx)("fullscreen.properties_panel.stack_panel.minmax.max_width_tt"),category:"dimension",Icon:()=>a.createElement(ah,{svg:oe.A}),PreviewValue:({node:e})=>a.createElement(op,{value:e.maxWidth,variableAlias:e.boundVariables.maxWidth,isPreview:!0}),DisplayValue:({node:e})=>a.createElement(op,{value:e.maxWidth,variableAlias:e.boundVariables.maxWidth}),index:0}],[ei.L5V.CORNER_RADIUS,{label:(0,el.tx)("fullscreen.properties_panel.transform_panel.corner_radius"),category:"dimension",Icon:()=>a.createElement(ah,{svg:a6.A}),PreviewValue:({node:e})=>a.createElement(ol,{node:e,isPreview:!0}),DisplayValue:({node:e})=>a.createElement(ol,{node:e}),index:0}],[ei.L5V.STACK_MODE,{label:(0,el.tx)("dev_handoff.annotations.autolayout_mode"),category:"stack",Icon:({node:e})=>a.createElement(aw,{node:e}),PreviewValue:({node:e})=>a.createElement(aS,{node:e}),DisplayValue:({node:e})=>a.createElement(aS,{node:e}),index:0}],[ei.L5V.STACK_ALIGNMENT,{label:(0,el.tx)("dev_handoff.annotations.alignment"),category:"stack",Icon:({node:e})=>a.createElement(ah,{svg:(0,aG.GN)(e)}),PreviewValue:({node:e})=>a.createElement(aP,{node:e}),DisplayValue:({node:e})=>a.createElement(aP,{node:e}),index:0}],[ei.L5V.STACK_SPACING,{label:(0,el.tx)("inspect_panel.properties.gap"),category:"stack",Icon:({node:e})=>a.createElement(ah,{svg:"HORIZONTAL"===e.stackMode?a5.A:a7.A}),PreviewValue:({node:e})=>a.createElement(aT,{node:e,isPreview:!0}),DisplayValue:({node:e})=>a.createElement(aT,{node:e}),index:0}],[ei.L5V.STACK_PADDING,{label:(0,el.tx)("inspect_panel.properties.padding"),category:"stack",Icon:()=>a.createElement(ah,{svg:a9.A}),PreviewValue:({node:e})=>a.createElement(aA,{node:e,isPreview:!0}),DisplayValue:({node:e})=>a.createElement(aA,{node:e}),index:0}],[ei.L5V.TEXT_STYLE,{label:(0,el.tx)("dev_handoff.annotations.text_style"),category:"text",Icon:aQ,PreviewValue:({node:e})=>a.createElement(om,{styleRef:e.inheritedTextStyle}),DisplayValue:({node:e})=>a.createElement(aB,{styleRef:e.inheritedTextStyle,styleType:"TEXT",hideIcon:!0}),index:0}],[ei.L5V.FONT_FAMILY,{label:(0,el.tx)("inspect_panel.typography.font"),category:"text",Icon:aQ,PreviewValue:({node:e})=>a.createElement(a2,{fontNameOrMixed:e.fontNameOrMixed,variableAlias:e.boundVariables.fontFamily?.[0],isPreview:!0}),DisplayValue:({node:e})=>a.createElement(a2,{fontNameOrMixed:e.fontNameOrMixed,variableAlias:e.boundVariables.fontFamily?.[0]}),index:0}],[ei.L5V.FONT_STYLE,{label:(0,el.tx)("inspect_panel.code.font_style"),category:"text",Icon:aQ,PreviewValue:({node:e})=>a.createElement(a.Fragment,null,e.fontName.style),DisplayValue:({node:e})=>a.createElement(a.Fragment,null,e.fontName.style),index:0}],[ei.L5V.FONT_SIZE,{label:(0,el.tx)("dev_handoff.annotations.font_size"),category:"text",Icon:aQ,PreviewValue:({node:e})=>a.createElement(op,{value:e.fontSizeOrMixed,variableAlias:e.boundVariables.fontSize?.[0],isPreview:!0}),DisplayValue:({node:e})=>a.createElement(op,{value:e.fontSizeOrMixed,variableAlias:e.boundVariables.fontSize?.[0]}),index:0}],[ei.L5V.LINE_HEIGHT,{label:(0,el.tx)("fullscreen.type_panel.line_height"),category:"text",Icon:aQ,PreviewValue:({node:e})=>a.createElement(a1,{lineHeightOrMixed:e.lineHeightOrMixed,variableAlias:e.boundVariables.lineHeight?.[0],isPreview:!0}),DisplayValue:({node:e})=>a.createElement(a1,{lineHeightOrMixed:e.lineHeightOrMixed,variableAlias:e.boundVariables.lineHeight?.[0]}),index:0}],[ei.L5V.LETTER_SPACING,{label:(0,el.tx)("fullscreen.type_panel.letter_spacing"),category:"text",Icon:aQ,PreviewValue:({node:e})=>a.createElement(ou,{value:e.letterSpacingOrMixed,variableAlias:e.boundVariables.letterSpacing?.[0],isPreview:!0}),DisplayValue:({node:e})=>a.createElement(ou,{value:e.letterSpacingOrMixed,variableAlias:e.boundVariables.letterSpacing?.[0]}),index:0}],[ei.L5V.TEXT_ALIGN_HORIZONTAL,{label:(0,el.tx)("dev_handoff.annotations.text_align"),category:"text",Icon:aQ,PreviewValue:({node:e})=>a.createElement(a0,{textAlignHorizontal:e.textAlignHorizontal}),DisplayValue:({node:e})=>a.createElement(a0,{textAlignHorizontal:e.textAlignHorizontal}),index:0}],[ei.L5V.FONT_WEIGHT,{label:(0,el.tx)("inspect_panel.typography.weight"),category:"text",Icon:aQ,PreviewValue:({node:e})=>a.createElement(a3,{fontWeightOrMixed:e.fontWeightOrMixed,variableAlias:e.boundVariables.fontStyle?.[0],isPreview:!0}),DisplayValue:({node:e})=>a.createElement(a3,{fontWeightOrMixed:e.fontWeightOrMixed,variableAlias:e.boundVariables.fontStyle?.[0]}),index:0}],[ei.L5V.FILL,{label:(0,el.tx)("fullscreen.properties_panel.fill.fill"),category:"paint",Icon:({node:e})=>a.createElement(aK,{paints:e.fillPaints.data}),PreviewValue:({node:e})=>a.createElement(aU,{paints:e.fillPaints.data,variables:e.boundVariables.fills,styleRef:e.inheritedFillStyle}),DisplayValue:({node:e})=>a.createElement(aW,{paints:e.fillPaints,styleRef:e.inheritedFillStyle,variables:e.boundVariables.fills}),index:0}],[ei.L5V.STROKE,{label:(0,el.tx)("fullscreen.properties_panel.fill.stroke"),category:"paint",Icon:({node:e})=>a.createElement(aK,{paints:e.strokePaints.data}),PreviewValue:({node:e})=>a.createElement(aU,{paints:e.strokePaints.data,variables:e.boundVariables.strokes,styleRef:e.inheritedFillStyle}),DisplayValue:({node:e})=>a.createElement(aW,{paints:e.strokePaints,styleRef:e.inheritedFillStyleForStroke,variables:e.boundVariables.strokes}),index:0}],[ei.L5V.STROKE_WIDTH,{label:(0,el.tx)("fullscreen.properties_panel.borders.stroke_width"),category:"paint",Icon:()=>a.createElement(ah,{svg:ot.A}),PreviewValue:({node:e})=>a.createElement(os,{node:e,isPreview:!0}),DisplayValue:({node:e})=>a.createElement(os,{node:e}),index:0}],[ei.L5V.EFFECT,{label:(0,el.tx)("inspect_panel.code.effect"),category:"paint",Icon:function(){return a.createElement(ah,{svg:aH.A})},PreviewValue:({node:e})=>a.createElement(aY,{effects:e.effects.filter(e=>e.visible)}),DisplayValue:({node:e})=>a.createElement(aq,{effects:e.effects.filter(e=>e.visible),styleRef:e.inheritedEffectStyle}),index:0}],[ei.L5V.OPACITY,{label:(0,el.tx)("fullscreen.scrubbable.opacity"),category:"paint",Icon:()=>a.createElement(ah,{svg:on.A}),PreviewValue:({node:e})=>a.createElement(or,{node:e,isPreview:!0}),DisplayValue:({node:e})=>a.createElement(or,{node:e}),index:0}],[ei.L5V.COMPONENT,{label:(0,el.tx)("dev_handoff.annotations.component"),category:"component",Icon:()=>a.createElement(ah,{svg:a4.A}),PreviewValue:oa,DisplayValue:oa,index:0}]]),oi=0;function or({node:e,isPreview:t=!1}){let n=e.boundVariables.opacity,o=(0,an.u)(n?.id??void 0);return o&&t?a.createElement(a.Fragment,null,o.name):a.createElement(af,{variableContainerClassName:aE,valueProps:{format:"percent",value:e.opacity,variable:o?.name}})}function ol({node:e,isPreview:t=!1}){let{rectangleTopLeftCornerRadius:n,rectangleTopRightCornerRadius:o,rectangleBottomRightCornerRadius:i,rectangleBottomLeftCornerRadius:r}=e,l=(0,an.u)(e.boundVariables?.topLeftRadius?.id),s=(0,an.u)(e.boundVariables?.topRightRadius?.id),c=(0,an.u)(e.boundVariables?.bottomRightRadius?.id),d=(0,an.u)(e.boundVariables?.bottomLeftRadius?.id);return a.createElement(ax,{rawValues:[n,o,i,r],variables:[l,s,c,d],isPreview:t})}function os({node:e,isPreview:t=!1}){return e.borderStrokeWeightsIndependent?a.createElement(od,{node:e,isPreview:t}):a.createElement(oc,{node:e,isPreview:t})}function oc({node:e,isPreview:t}){let n=(0,an.u)(e.boundVariables.strokeWeight?.id);return n&&t?a.createElement(a.Fragment,null,n.name):a.createElement(af,{variableContainerClassName:aE,valueProps:{value:e.strokeWeight,variable:n?.name,format:"pixels"}})}function od({node:e,isPreview:t}){let{borderTopWeight:n,borderRightWeight:o,borderBottomWeight:i,borderLeftWeight:r}=e,l=(0,an.u)(e.boundVariables.strokeTopWeight?.id),s=(0,an.u)(e.boundVariables.strokeRightWeight?.id),c=(0,an.u)(e.boundVariables.strokeBottomWeight?.id),d=(0,an.u)(e.boundVariables.strokeLeftWeight?.id);return a.createElement(ax,{rawValues:[n,o,i,r],variables:[l,s,c,d],isPreview:t})}function op({value:e,variableAlias:t,isPreview:n}){let o=(0,an.u)(t?.id);return null===e?null:"mixed"===e?(0,el.tx)("fullscreen.mixed"):o&&n?a.createElement(a.Fragment,null,o.name):a.createElement(af,{variableContainerClassName:aE,valueProps:{value:(0,aa.nd)(e,"px"),variable:o?.name}})}function ou({value:e,variableAlias:t,isPreview:n}){let o=(0,an.u)(t?.id);return"mixed"===e?(0,el.tx)("fullscreen.mixed"):o&&n?a.createElement(a.Fragment,null,o.name):a.createElement(af,{variableContainerClassName:aE,valueProps:{format:"fig_number",value:e,variable:o?.name}})}function om({styleRef:e}){let t=(0,aL.f$)(e),n=(0,nI.mJ)(t);return n?a.createElement(a.Fragment,null,n.name):null}function o_(){let e=(0,nW.IL)(),t=(0,eV.Xr)(n$.J),n=!!(0,tz.hA)();return a.useCallback(a=>{n7.l7.user("clear-annotations",()=>{a.setAnnotation(null);let o=(0,Z.kh)(n8.q.instance,a.guid);e("delete_annotation",{nodeId:a.guid,nodeType:a.type,tlfId:o?.guid,isDevModeFocusView:n}),t(!1),(0,nH.d)().lockMouseMoves.set(!1),ed.Y5.triggerAction("commit")})},[t,e,n])}oo.forEach(e=>{e.index=oi++});var og=n(462166),oE=n(560945),of=n(956521),oy=n(592096),oh=n(91408),ov=n(860168);let ob=(0,oh.jz)("220px"),oN=(0,oh.jz)(ov.KwN),oI=(0,oh.jz)(ov.RHC);var oT=(e=>(e[e.ALIGNED=0]="ALIGNED",e[e.ABOVE=1]="ABOVE",e[e.BELOW=2]="BELOW",e))(oT||{});function ox(e,t,n){let{x:a,y:o,w:i,h:r}=e.absoluteBoundingBox,{x:l,w:s}=t.absoluteBoundingBox,{offsetX:c,offsetY:d,zoomScale:p}=n,u=a-l,m=l+s-(a+i),_=u<m,g=Math.min(Math.max(20*p,5),20);return _?{lineWidth:u*p+g,offsetX:(l-c)*p-g,offsetY:(o+r/2-d)*p,isLeftAligned:_}:{lineWidth:m*p+g,offsetX:(l+s-c)*p+g,offsetY:(o+r/2-d)*p,isLeftAligned:_}}function oA(e,t,n){let a=[];for(let t of e){let e=(n||t.height)+8;for(a.push({basis:t.offsetY-e/2,length:1,height:e});a.length>1&&function(e,t){let n=e.basis+e.height-t.basis;return!(n<=0)&&(e.height+=t.height,e.length+=t.length,e.basis-=n*t.height/e.height,!0)}(a[a.length-2],a[a.length-1]);)a.pop()}let o=0;for(let i of a){let{basis:a}=i;for(let r=0;r<i.length;r++){let i=e[o],r=(n||i.height)+8;t[i.node.guid]=a+r/2,a+=r,o++}}}function ow(e,t,n){let a=[],o=[],i={};for(let e of t)e.isLeftAligned?a.push(e):o.push(e);return oA(a,i,n?6:void 0),oA(o,i,n?6:void 0),t.map(t=>{let{y:n,h:a,w:o}=t.node.absoluteBoundingBox,r=i[t.node.guid],l=(n-e.offsetY)*e.zoomScale,s=t.lineWidth,c=0,d=0,p=t.lineWidth;return r<l?(c=1,d=l-r,p+=o/2*e.zoomScale):r>(n+a-e.offsetY)*e.zoomScale&&(c=2,d=r-(n+a-e.offsetY)*e.zoomScale,p+=o/2*e.zoomScale),{...t,offsetY:r,lineAlignment:c,lineHeight:d,lineWidth:p,originalLineWidth:s}})}function oS({node:e,setDimensions:t,offsetX:n,offsetY:i,lineWidth:l,originalLineWidth:s,lineHeight:c,lineAlignment:d,isLeftAligned:p,viewportInfo:u,shouldMinimize:m,canOverlapNode:_=!1,children:g}){let E=(0,nW.IL)(),f=(0,a.useRef)(null),y=(0,oE.w)(m?void 0:f),h=(0,o.d4)(e=>e.mirror.appModel.hoveredNode),[v,b]=(0,a.useState)(!1),N=(0,A._I)(),I=(0,of.T)("quick_handoff"),T=(0,tv.dH)(),x="ui3"===(0,r.DP)().version,w=e.guid===h||v,S=(0,nI.uQ)(),P=(0,tL.md)(n$.J),C=P&&S===e.guid,O=m&&!C,k=T===t1.NLJ.ANNOTATE&&!w&&null!==S&&S!==e.guid,D=C||u.zoomScale>=.05&&(e.guid===S||e.annotations.length>0),L=(0,oy.LO)(),M=a.useCallback(e=>{(0,nH.d)().lockMouseMoves.set(e)},[]);(0,a.useLayoutEffect)(()=>{y&&t(e.guid,y)},[e.guid,y,t]);let R={top:`${u.y+u.height/2}px`,left:`${u.x+u.width/2}px`,transform:`translate(${n}px, calc(${i}px - 50%))`};return a.createElement("div",{ref:f,className:e$()("annotation--annotationWrapper--pKMw2",{"annotation--wrapperMinimized--UOExu":O&&!w,[ar]:C}),style:R,"data-testid":"annotationWrapper"},D&&a.createElement(a.Fragment,null,a.createElement("div",{className:e$()("annotation--annotationLine--jr4Mc",{"annotation--annotationLineLeftAligned--W-1DZ":p,"annotation--annotationLineAboveNode--WwqWD":d===oT.ABOVE,"annotation--annotationLineBelowNode--JeafT":d===oT.BELOW}),style:{width:l,height:c}},a.createElement("div",{className:e$()("annotation--annotationLineStartDot--x6RNc",{"annotation--annotationLineStartDotHovered--Chqa7":!N&&w})}),a.createElement("div",{className:"annotation--annotationLineEndDot--Lsq0a"})),a.createElement("div",{onClick:N?void 0:I,onMouseOut:()=>{M(!1),b(!1)},onMouseOver:()=>{P||(M(!0),nx.Uc(e.guid),O&&!v&&E("hover_minimized_annotation",{nodeId:e.guid,nodeType:e.type}),b(!0))},className:e$()({"annotation--annotationLeftAligned--FHQRp":p,"annotation--annotationRightAligned--VrH8e":!p,"annotation--annotationHovered--QUHJv":!C&&w}),style:{transform:function(e,t,n,a,o,i,r,l){let s=ei.Ez5.isFullscreenYScrollbarNeeded()&&(!l||!ei.Ez5.isUI3EdgeToEdgeCanvasEnabled());if(n){let n=`calc(${-a}px - ${e.width/2}px + ${r.left}px + 4px)`,l=i?`calc(${o+t*e.zoomScale}px - 100% - 8px)`:`calc(${o}px - 100% - 8px)`;return`translate(min(${l}, max(-100%, ${n})), 0)`}{let n=i?`calc(-${o+t*e.zoomScale}px + 8px)`:`calc(-${o}px + 8px)`,c=`calc(${e.width/2}px - ${a}px - 100% - ${r.right}px - ${s?l?oI:oN:4}px)`;return`translate(max(${n}, min(0px, ${c})), 0)`}}(u,e.absoluteBoundingBox.w,p,n,s,_,L,x)}},a.createElement("div",{className:e$()("annotation--annotationHoverTarget--4y3Xc",{"annotation--annotationHoverTargetLeftAligned--G1twU":p})}),N&&(!O||w)&&g(k))))}var oP=n(501191);function oC({viewportInfo:e,nodeInfo:t,setDimensions:n}){let o=function(){let e=(0,nW.IL)(),{Sprig:t}=(0,n4.A)(),n=!!(0,tz.hA)();return a.useCallback((a,o,i)=>{n7.l7.user(i?"edit-annotation":"create-annotation",()=>{a.setAnnotation(o);let r=(0,Z.kh)(n8.q.instance,a.guid),l={nodeType:a.type,nodeId:a.guid,tlfId:r?.guid??a.guid,hasText:!!o.label,numProperties:o.properties.length,isDevModeFocusView:n};i?e("edit_annotation",l):(e("create_annotation",l),t("track","create_annotation")),ed.Y5.triggerAction("commit")})},[t,e,n])}(),i=o_(),r=(0,eV.Xr)(n$.J),{node:l}=t,s=l.annotations[0],[c,d]=a.useState(s?.label??""),[p,u]=a.useState(s?.properties??[]),m=a.useCallback(()=>{let e=s&&(""!==s.label||s.properties.length>0),t=0===(0,n0.A)(c).length;t&&0===p.length?s&&i(l):o(l,{label:t?"":c,properties:p},e),r(!1),(0,nH.d)().lockMouseMoves.set(!1)},[s,c,p,i,l,o,r]);return a.createElement(a.Fragment,null,a.createElement(oM,{viewportInfo:e,onPointerDown:m}),a.createElement(oS,{key:t.node.guid,node:t.node,viewportInfo:e,shouldMinimize:!1,offsetX:t.offsetX,offsetY:t.offsetY,lineWidth:t.lineWidth,originalLineWidth:t.originalLineWidth,lineHeight:t.lineHeight,lineAlignment:t.lineAlignment,isLeftAligned:t.isLeftAligned,setDimensions:n,canOverlapNode:!0},()=>a.createElement(oO,{node:t.node,saveAnnotation:m,inputText:c,setInputText:d,inputProperties:p,setInputProperties:u})))}function oO({node:e,saveAnnotation:t,inputText:n,setInputText:o,inputProperties:i,setInputProperties:r}){let l=(0,nW.IL)(),s=o_(),[c,d]=a.useState(-1),[p,u]=a.useState(!1),[m,_]=a.useState(!1),g=a.useRef(null),E=a.useRef(null),f=a.useRef(null),{availableProperties:y,selectedProperties:h}=a.useMemo(()=>{let t=[],n=[];for(let a of ok)i.some(e=>e.type===a.type)?n.push(a):(0,og.J)(e,a.type,!0)&&t.push(a);return{availableProperties:t,selectedProperties:n}},[e,i]);a.useEffect(()=>{l("show_annotation_dialog",{nodeId:e.guid,nodeType:e.type})},[l,e.guid,e.type]);let v=a.useCallback(()=>{g.current?.focus()},[]),b=a.useCallback(e=>{d(-1),u(!1),r([...i,{type:e}])},[r,i]);function N(e){r(i.filter(t=>t.type!==e)),v()}let I=a.useCallback(()=>{(0,nH.d)().lockMouseMoves.set(!1)},[]),T=a.useCallback((e,t)=>{if(d(e),_(t),t&&E.current){for(let t of E.current.children)if(t.getAttribute("data-property-type")===`property-${y[e]}`){t.focus();break}}},[d,_,y]),x=a.useCallback(()=>{p?(u(!1),d(-1),f.current?.focus()):t()},[p,t]),A=a.useCallback(()=>{p&&(-1===c?T(y.length-1,!0):c>0&&T(c-1,!0))},[y.length,c,T,p]),w=a.useCallback((e,t)=>{if(p){-1===c?T(0,!0):c<y.length-1&&T(c+1,!0);return}e&&!t&&(u(!0),T(0,!0))},[y.length,p,c,T]),S=(0,nG.v_)("createAnnotation","keydown",(0,a.useCallback)(e=>{"Escape"===e.key?x():"ArrowUp"===e.key?(A(),e.stopPropagation()):"ArrowDown"===e.key?(w(e.ctrlKey||e.metaKey,e.shiftKey),e.stopPropagation()):("Enter"===e.key||" "===e.key)&&c>=0&&c<y.length&&(b(y[c].type),e.preventDefault(),f.current?.focus())},[y,w,A,x,c,b]));a.useEffect(()=>(document.addEventListener("keydown",S),()=>{document.removeEventListener("keydown",S)}),[S]);let P=nG.qP("annotationLabelInput","submit",o),C=nG.qP("annotationLabelInput","enter",t),O=e=>{u(!p),e?T(0,!0):d(-1)},k=0===n.length&&0===h.length;return a.createElement(at.vL,{name:"create-annotation",focusOnMount:!0,handleKeyDown:e=>{let{event:n}=e;"Escape"===n.key&&(e.accept(),t())}},a.createElement("div",{onPointerDown:n5.dG},a.createElement("div",{className:e$()(al,n6.Dm)},a.createElement("div",{className:e$()(as,{"annotation--contentContainerNoProperties--pc2WE":0===h.length})},a.createElement("div",{dir:"auto"},a.createElement(n2.X,{fallback:null,errorFallback:null,mountBehavior:"focus",placeholder:(0,el.t)("dev_handoff.annotations.add_annotation"),defaultValue:n,onInputChange:P,onBlur:n1.lQ,hideToolbar:!0,onEnterKeyPressed:C})),h.length>0&&a.createElement("div",{className:ac},h.map(t=>a.createElement(oL,{key:`selected-${t.type}`,onRemoveProp:N,node:e,property:t})))),a.createElement("div",{className:"annotation--authoringRow--cIo3-"},a.createElement(n3.GG,{className:e$()("annotation--addPropertyButton--67vPO",{"annotation--active--Q00x6":p}),forwardedRef:f,onMouseDown:e=>O((0,ae.SK)(e)),onKeyDown:e=>{p||"Enter"!==e.code&&"Space"!==e.code||(O(!0),e.preventDefault(),e.stopPropagation())},tabIndex:0,"data-tooltip-type":n9.Ib.TEXT,"data-tooltip":(0,el.t)("dev_handoff.annotations.pin_properties_tooltip"),recordingKey:"createAnnotationPinPropertyButton"},a.createElement(nv.B,{className:"annotation--plusIcon--Ove-l",svg:oP.A,width:"16",height:"16"}),(0,el.tx)("dev_handoff.annotations.pin_properties_label")),a.createElement(nj.K,{actionOnPointerDown:!0,onClick:()=>{s(e),I()},disabled:k,"aria-label":(0,el.t)("dev_handoff.annotations.delete"),recordingKey:"createAnnotationTrashIcon",htmlAttributes:{"data-tooltip":(0,el.t)("dev_handoff.annotations.delete"),"data-tooltip-type":n9.Ib.TEXT}},a.createElement(nZ.i,null)))),p&&a.createElement("div",{onMouseLeave:()=>T(-1,!1),ref:E,onBlur:e=>{e.relatedTarget?.getAttribute("data-property-type")||u(!1)},className:e$()(al,"annotation--dropdown--WLrjl")},0===y.length&&a.createElement("div",{className:"annotation--allPropertiesAdded--KzT8m"},(0,el.tx)("dev_handoff.annotations.all_properties_added")),y.map((t,n)=>a.createElement(a.Fragment,{key:`option-${t.type}`},n>0&&t.config.category!==y[n-1].config.category&&a.createElement("div",{className:"annotation--propertyDivider--Q3tgS"}),a.createElement(oD,{node:e,property:t,isHovered:c===n,autoFocus:c===n&&m,onMouseOver:()=>T(n,!1),onMouseDown:e=>{b(t.type),e.preventDefault()}}))))))}let ok=Array.from(oo.entries()).map(([e,t])=>({type:e,config:t}));function oD({node:e,property:t,isHovered:n,autoFocus:o,onMouseDown:i,onMouseOver:r}){let l=t.config.PreviewValue,s=t.config.Icon;return a.createElement(n3.GG,{className:e$()("annotation--propertyOption--GJWeu text--fontPos12--YsUAh text--_fontBase--QdLsd",{"annotation--hoveredProperty--ZOJgv":n}),onMouseDown:i,onMouseOver:r,role:"menuitem",autoFocus:o,"data-property-type":`property-${t.type}`,tabIndex:-1,recordingKey:`createAnnotationOptionButton-${t.type}`},a.createElement("div",{className:"annotation--propertyOptionIconLabel--vFND-"},a.createElement("div",{className:"annotation--propertyOptionIcon---NJse"},a.createElement(s,{node:e})),t.config.label),a.createElement("div",{className:e$()("annotation--preview--SrnLk","annotation--propertyValue--yhAB- annotation--_ellipsis--8F1VE")},a.createElement(l,{node:e})))}function oL({node:e,onRemoveProp:t,property:n}){let o=n.config.DisplayValue,i=(0,og.J)(e,n.type,!1);return a.createElement(a.Fragment,null,a.createElement("span",{className:"annotation--selectedPropertyDisplayLabel--AtFEJ"},n.config.label),a.createElement("div",{className:"annotation--selectedPropertyValueWrapper--OyM0X"},a.createElement("span",{className:e$()("annotation--selectedPropertyValue--wwu2U",{[ad]:!i})},i?a.createElement(o,{node:e}):(0,el.tx)("dev_handoff.annotations.no_value")),a.createElement("span",{className:"annotation--selectedPropertyDelete--DMdrA"},a.createElement(n3.GG,{className:"annotation--selectedPropertyDeleteButton--rko2T",recordingKey:`removeAnnotation${n.type}`,"data-tooltip-type":n9.Ib.TEXT,"data-tooltip":(0,el.t)("dev_handoff.annotations.remove_property"),onClick:n7.nc.user("remove-annotation",()=>{t(n.type)}),onKeyDown:n7.nc.user("remove-annotation",e=>{t(n.type),e.preventDefault()})},a.createElement(nQ.f,null)))))}function oM({viewportInfo:e,onPointerDown:t}){return a.createElement(n3.D8,{className:`${ar} ${n6.Dm} ${n6.Uu}`,recordingKey:"annotationDialogBackground",style:{position:"absolute",left:e.x,top:e.y,width:e.width,height:e.height},onPointerDown:t})}var oR=n(693903),oV=n(686759),oU=n(278312),oK=n(698993);function oF({viewportInfo:e,nodeInfo:t,setDimensions:n}){return a.createElement(oS,{key:t.node.guid,node:t.node,viewportInfo:e,shouldMinimize:t.shouldMinimize,offsetX:t.offsetX,offsetY:t.offsetY,lineWidth:t.lineWidth,originalLineWidth:t.originalLineWidth,lineHeight:t.lineHeight,lineAlignment:t.lineAlignment,isLeftAligned:t.isLeftAligned,setDimensions:n},e=>a.createElement(oB,{node:t.node,isFadedOut:e}))}function oB({node:e,isFadedOut:t}){let n=(0,nW.IL)(),o=(0,nI.uQ)(),i=(0,tv.dH)(),r=o===e.guid,l=(0,eV.Xr)(n$.J),s=o_(),c=(0,a.useMemo)(()=>ei.w3z.isReadOnly(ei.SES.ANNOTATIONS),[]),d=(0,t6.J2)(ei.Ez5.devHandoffState().selectedMeasurementId),p=!!(0,tz.hA)(),u=e=>{e&&(nx.wr(),(0,oK.S)("annotations"),nx.Dh([e]))},m=a.useCallback(t=>{!c&&r&&d===oR.invalidGUIDStr&&(document.activeElement?.classList.contains("focus-target")||(0,oU.t)(document.activeElement)||document.activeElement?.classList.contains(ai))&&("Backspace"===t.key||"Delete"===t.key)&&s(e)},[c,r,d,s,e]);a.useEffect(()=>(document.addEventListener("keydown",m),()=>document.removeEventListener("keydown",m)),[m]);let _=a.useCallback(()=>{let e=window.getSelection()?.toString()||"";e&&(0,oV.Dk)(e,{withLineBreaks:!0})},[]);if(0===e.annotations.length)return null;let g=e.annotations[0],{label:E,properties:f}=g,y=[...f].sort((e,t)=>oo.get(e.type).index-oo.get(t.type).index);return a.createElement(n3.D8,{className:e$()("annotation--viewAnnotation--cA-c1 annotation--_annotationBase--MPByC",as,{"annotation--viewAnnotationSelected--UApdn":r,"annotation--canSelect--zG4JI":!r,"annotation--viewAnnotationFadedOut--7LQPE":t}),role:"button",tabIndex:0,onMouseDown:()=>{r||(u(e.guid),n("click_annotation_content",{nodeId:e.guid,nodeType:e.type,hasText:!!g.label,numProperties:g.properties.length,currentTool:i,isDevModeFocusView:p}))},"data-testid":"annotationDisplay",recordingKey:`viewAnnotationContainer-${e.name}`,onDoubleClick:()=>{c||(r||u(e.guid),l(!0))},onCopy:_},E&&a.createElement(n2.R,{value:E,fallback:null,errorFallback:null,quillClassName:"annotation--label--Tf5gK"}),y&&y.length>0&&a.createElement("div",{className:ac},y.map((t,n)=>a.createElement(oW,{key:n,node:e,property:t}))))}function oW({node:e,property:t}){let n=oo.get(t.type),o=n.DisplayValue,i=e&&e.isAlive(),r=(0,og.J)(e,t.type,!1);return a.createElement(a.Fragment,null,a.createElement("span",{className:"annotation--propertyDisplayLabel--PQ2vF"},n.label),a.createElement("span",{className:e$()("annotation--propertyDisplayValue--bxdp7",{[ad]:!r}),"data-testid":`annotationPropertyValue-${t.type.toString()}`},i&&r?a.createElement(o,{node:e}):(0,el.tx)("dev_handoff.annotations.no_value")))}var oG=n(688553),oz=n(565727),oH=n(107047),oY=n(236238),oq=n(163771);function oJ(e){let{children:t}=e,n=(0,a.useRef)(null),[o,i]=(0,a.useState)(null);return(0,a.useEffect)(()=>{if(n.current){let e=n.current.attachShadow({mode:"open"}),t=document.createElement("style");t.innerHTML=[oG.Nz,oH.Nz,oz.Nz,oq.Nz,"/** @postcss-export-raw */\n\n/**\n * ellipsis.css\n *\n * Add an ellipsis if text is too long.\n *\n * The element that composes this mixin MUST have a defined width or max-width in pixels.\n * - Only works on a single line of text. See below for multi-line ellipses\n */\n\n.ellipsis--ellipsis--Tjyfa {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/**\n * Add an ellipsis after n lines of text.\n * https://developer.mozilla.org/en-US/docs/Web/CSS/-webkit-line-clamp\n *\n * The element that composes this mixin MUST:\n * - Have a defined width or max-width in pixels.\n * - Have a defined fallback height or max-height set to `line-height * n`,\n *     in case browsers do not support -webkit-line-clamp or box-orient\n *     at least the container size will be correct (with no ellipses)\n *\n * TODO(golf): start using `line-clamp` instead of -webkit-line-clamp once browsers start supporting it\n */\n\n.ellipsis--_ellipsisAfterNLines--LzI7k {\n  display: -webkit-inline-box;\n  overflow: hidden;\n\n  /* https://github.com/postcss/autoprefixer/issues/776#issuecomment-297734206 */\n  /* autoprefixer: off */\n  -webkit-box-orient: vertical;\n  /* autoprefixer: on */\n}\n\n.ellipsis--ellipsisAfter2Lines--Qo-Xh {\n  -webkit-line-clamp: 2;\n}\n\n.ellipsis--ellipsisAfter3Lines--h405C {\n  -webkit-line-clamp: 3;\n}\n\n.ellipsis--ellipsisAfter6Lines--2UA7M {\n  -webkit-line-clamp: 6;\n}\n\n.ellipsis--ellipsisAfter8Lines--WZFi8 {\n  -webkit-line-clamp: 8;\n}\n","/** @postcss-export-raw */\n/* Keep in line with FGDevHandoffHelpers.h */\n.annotation--annotationContainer--k4xiM {\n  position: relative;\n  /* Make all z indexes in this file relative to the parent.\n     We want all annotations to render underneath comments */\n  z-index: 0;\n}\n.annotation--_ellipsis--8F1VE {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.annotation--annotationWrapper--pKMw2 {\n  position: absolute;\n  pointer-events: none;\n  width: max-content;\n}\n.annotation--annotationWrapper--pKMw2,\n.annotation--wrapperMinimized--UOExu:hover {\n  z-index: 1;\n}\n.annotation--wrapperEditing--C2Zlx {\n  z-index: 2;\n}\n.annotation--wrapperMinimized--UOExu {\n  z-index: 0;\n}\n.annotation--annotationLine--jr4Mc {\n  position: absolute;\n  top: 50%;\n  border-top: 1px dashed var(--color-icon-handoff);\n  /* Push to left of annotation box */\n  transform: translate(-100%, -50%);\n}\n.annotation--annotationLineStartDot--x6RNc {\n  position: absolute;\n  top: -6.5px;\n  left: 100%;\n\n  width: 12px;\n  height: 12px;\n\n  background: color-mix(in srgb, var(--color-icon-handoff) 45%, transparent);\n  border: 1px solid var(--color-icon-success);\n  border-radius: 100%;\n  box-sizing: border-box;\n}\n.annotation--annotationLineStartDot--x6RNc:before {\n  content: '';\n\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n\n  width: 2px;\n  height: 2px;\n\n  background: var(--color-text-onbrand);\n  border-radius: 100%;\n  box-sizing: border-box;\n}\n.annotation--annotationLineStartDotHovered--Chqa7 {\n  background: var(--color-icon-handoff);\n}\n.annotation--annotationLineEndDot--Lsq0a {\n  position: absolute;\n  top: -3.5px;\n  left: -3px;\n\n  width: 6px;\n  height: 6px;\n\n  background: var(--color-icon-handoff);\n  border-radius: 100%;\n  box-sizing: border-box;\n}\n.annotation--annotationLineLeftAligned--W-1DZ {\n  transform: translate(0, -50%);\n}\n.annotation--annotationLineLeftAligned--W-1DZ .annotation--annotationLineStartDot--x6RNc {\n  left: auto;\n  right: 100%;\n}\n.annotation--annotationLineLeftAligned--W-1DZ .annotation--annotationLineEndDot--Lsq0a {\n  left: auto;\n  right: -3px;\n}\n.annotation--annotationLineAboveNode--WwqWD:not(.annotation--annotationLineLeftAligned--W-1DZ) {\n  border-left: 1px dashed var(--color-icon-handoff);\n  transform: translate(-100%, -0.5px);\n}\n.annotation--annotationLineBelowNode--JeafT .annotation--annotationLineStartDot--x6RNc {\n  top: auto;\n  bottom: -6.5px;\n}\n.annotation--annotationLineAboveNode--WwqWD .annotation--annotationLineEndDot--Lsq0a {\n  top: auto;\n  bottom: -3.5px;\n}\n.annotation--annotationLineBelowNode--JeafT:not(.annotation--annotationLineLeftAligned--W-1DZ) {\n  border-left: 1px dashed var(--color-icon-handoff);\n  border-bottom: 1px dashed var(--color-icon-handoff);\n  border-top: 0 none;\n\n  transform: translate(-100%, calc(-100% + 0.5px));\n}\n.annotation--annotationLineLeftAligned--W-1DZ.annotation--annotationLineAboveNode--WwqWD {\n  border-right: 1px dashed var(--color-icon-handoff);\n  transform: translate(0, -0.5px);\n}\n.annotation--annotationLineBelowNode--JeafT.annotation--annotationLineLeftAligned--W-1DZ {\n  border-right: 1px dashed var(--color-icon-handoff);\n  border-bottom: 1px dashed var(--color-icon-handoff);\n  border-top: 0 none;\n\n  transform: translate(0, calc(-100% + 0.5px));\n}\n.annotation--_annotationBase--MPByC {\n  background: var(--color-bg);\n  color: var(--color-text);\n\n  pointer-events: auto;\n\n  border-radius: 6px;\n  box-shadow: var(--elevation-200-canvas);\n  position: relative;\n  display: inline-block;\n  box-sizing: border-box;\n\n  font-family: Inter;\n  font-size: 11px;\n  font-weight: 400;\n}\n.annotation--viewAnnotation--cA-c1 {\n\n  /* This avoids a size shift when adding a border */\n  border: 1px solid transparent;\n\n  -webkit-user-select: text;\n\n          user-select: text;\n}\n/* This is when the node is hovered (not annotation).\n   Clicking an already selected node does nothing so has no hover state. */\n.annotation--annotationHovered--QUHJv .annotation--viewAnnotation--cA-c1:not(.annotation--viewAnnotationSelected--UApdn),\n\n.annotation--viewAnnotation--cA-c1.annotation--canSelect--zG4JI:hover {\n  background: var(--color-bg-hover);\n}\n.annotation--viewAnnotationSelected--UApdn {\n  border: 1px solid var(--color-border-selected-strong);\n}\n.annotation--viewAnnotationFadedOut--7LQPE > * {\n  opacity: 0.5;\n}\n.annotation--createAnnotation--tWKSM .text-editor {\n    border: none;\n  }\n.annotation--createAnnotation--tWKSM .ql-editor.ql-blank::after {\n    margin-top: -1.85em;\n  }\n.annotation--createAnnotation--tWKSM .text-editor:focus-within {\n    margin: 0;\n  }\n[data-fpl-version='ui3'] .annotation--createAnnotation--tWKSM .ql-container {\n      background: none;\n  }\n.annotation--createAnnotation--tWKSM .ql-editor {\n    font-size: 13px;\n    line-height: 24px;\n    min-height: 38px;\n  }\n[data-fpl-version='ui3'] .annotation--createAnnotation--tWKSM .ql-editor {\n      min-height: 24px;\n      padding: 2px 6px;\n      margin: 4px 0 6px 0;\n  }\n.annotation--createAnnotation--tWKSM .ql-editor ul,\n  .annotation--viewAnnotation--cA-c1 .ql-editor ul,\n  .annotation--createAnnotation--tWKSM .ql-editor ol,\n  .annotation--viewAnnotation--cA-c1 .ql-editor ol {\n    padding-left: 1.5em;\n  }\n.annotation--annotationHoverTarget--4y3Xc {\n  width: 24px;\n  height: 24px;\n  position: absolute;\n  pointer-events: auto;\n  top: calc(50% - 12px);\n  /* This is relative to the left edge of the line end dot,\n     but we want to center it around the dot */\n  left: -9px;\n}\n.annotation--annotationHoverTargetLeftAligned--G1twU {\n  /* This is relative to the right edge of the line end dot,\n     but we want to center it around the dot.\n     Shift by parent width (100%) to account for when the\n     annotation is not hidden. */\n  left: calc(100% - 15px);\n}\n.annotation--annotationLeftAligned--FHQRp {\n  transform: translate(-100%, 0);\n  left: 8px;\n}\n.annotation--annotationRightAligned--VrH8e {\n  left: -8px;\n}\n.annotation--label--Tf5gK.quill-readonly .ql-editor {\n    font-size: 11px;\n  }\n.annotation--label--Tf5gK.quill-readonly .ql-editor h1,\n    .annotation--label--Tf5gK.quill-readonly .ql-editor h2 {\n      font-size: 14px;\n    }\n.annotation--label--Tf5gK.quill-readonly .ql-editor pre.ql-syntax {\n      white-space: pre-wrap;\n    }\n.annotation--label--Tf5gK.quill-readonly .ql-editor > * {\n      cursor: default;\n    }\n.annotation--label--Tf5gK .ql-container {\n    background-color: transparent;\n  }\n.annotation--contentContainer--vSuqs {\n  display: flex;\n  flex-direction: column;\n  padding: 6px 10px 8px 10px;\n  max-width: 220px;\n  box-sizing: border-box;\n}\n.annotation--contentContainer--vSuqs.annotation--viewAnnotation--cA-c1 {\n  gap: 4px;\n}\n.annotation--contentContainerNoProperties--pc2WE {\n  padding: 6px 10px 0 10px;\n}\n.annotation--contentContainer--vSuqs.annotation--viewAnnotation--cA-c1 {\n  padding: 8px;\n}\n.annotation--createAnnotation--tWKSM .annotation--contentContainer--vSuqs {\n  /* Fixed width when authoring */\n  width: 220px;\n}\n.annotation--properties--1p6UF {\n  display: grid;\n  grid-template-columns: min-content auto;\n}\n.annotation--createAnnotation--tWKSM .annotation--properties--1p6UF {\n  padding: 0 6px;\n}\n.annotation--propertyDisplayLabel--PQ2vF,\n.annotation--selectedPropertyDisplayLabel--AtFEJ {\n  color: var(--color-text-secondary);\n  white-space: nowrap;\n\n  padding-right: 12px;\n}\n.annotation--selectedPropertyDisplayLabel--AtFEJ {\n  border-top-left-radius: 2px;\n  border-bottom-left-radius: 2px;\n\n  margin-left: -8px;\n  padding-left: 8px;\n}\n.annotation--selectedPropertyValueWrapper--OyM0X {\n  display: flex;\n\n  width: calc(100% + 4px);\n\n  overflow: hidden;\n}\n.annotation--selectedPropertyDisplayLabel--AtFEJ,\n.annotation--selectedPropertyValue--wwu2U {\n  padding-top: 2px;\n  padding-bottom: 2px;\n}\n.annotation--propertyDisplayLabel--PQ2vF,\n.annotation--propertyDisplayValue--bxdp7,\n.annotation--selectedPropertyDisplayLabel--AtFEJ,\n.annotation--selectedPropertyValueWrapper--OyM0X {\n  margin-top: 4px;\n}\n/* Don't add margin top to first \"row\" of grid */\n.annotation--propertyDisplayLabel--PQ2vF:first-child,\n.annotation--propertyDisplayLabel--PQ2vF:first-child + .annotation--propertyDisplayValue--bxdp7,\n.annotation--selectedPropertyDisplayLabel--AtFEJ:first-child,\n.annotation--selectedPropertyDisplayLabel--AtFEJ:first-child + .annotation--selectedPropertyValueWrapper--OyM0X {\n  margin-top: 0;\n}\n.annotation--propertyDisplayValue--bxdp7 {\n  overflow: hidden;\n}\n.annotation--noValue--HHQOU {\n  color: var(--color-text-secondary);\n}\n.annotation--selectedPropertyValue--wwu2U {\n  overflow: hidden;\n\n  flex: 1 1 100%;\n}\n.annotation--selectedPropertyDelete--DMdrA {\n  display: flex;\n  align-items: center;\n\n  padding: 0 4px 0 12px;\n\n  border-top-right-radius: 2px;\n  border-bottom-right-radius: 2px;\n}\n.annotation--selectedPropertyDeleteButton--rko2T {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex: 0 0 16px;\n\n  width: 16px;\n  height: 16px;\n\n  cursor: pointer;\n\n  font-size: 0;\n\n  background: transparent;\n  border: 0 none;\n  border-radius: 2px;\n  box-sizing: content-box;\n\n  padding: 0;\n}\n.annotation--selectedPropertyDeleteButton--rko2T:hover {\n    background: var(--color-bg-tertiary);\n  }\n.annotation--propertyOption--GJWeu {\n\n  background: transparent;\n  color: var(--color-text);\n  border: none;\n  align-self: stretch;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  height: 32px;\n  padding: 0px 16px;\n  gap: 8px;\n\n  font-family: Inter;\n  font-size: 13px;\n  font-weight: 400;\n}\n.annotation--propertyOption--GJWeu:focus {\n    outline: none;\n  }\n.annotation--propertyDivider--Q3tgS {\n  height: 1px;\n  background: var(--color-border);\n  margin: 8px 0;\n}\n.annotation--propertyOptionIcon---NJse {\n  width: 16px;\n}\n.annotation--propertyOptionIconSvg--LypST {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.annotation--propertyOptionIconLabel--vFND- {\n  display: flex;\n  align-items: center;\n  white-space: nowrap;\n  gap: 8px;\n}\n.annotation--allPropertiesAdded--KzT8m {\n  padding: 0 12px;\n  height: 32px;\n  font-size: 11px;\n  display: flex;\n  align-items: center;\n}\n.annotation--hoveredProperty--ZOJgv {\n  background: var(--color-bg-hover);\n}\n.annotation--preview--SrnLk {\n  color: var(--color-text-secondary);\n}\n.annotation--propertyValue--yhAB- {\n}\n.annotation--icon--w1enR svg {\n  fill: var(--color-icon);\n}\n.annotation--icon--w1enR[aria-disabled='true'] svg {\n  fill: var(--color-icon-disabled);\n}\n.annotation--chit--3je6E {\n  width: 12px;\n  height: 12px;\n  border-radius: 2px;\n  display: flex;\n  overflow: hidden;\n  margin: 1px 2px 1px 0;\n  flex-shrink: 0;\n  border: 1px solid var(--color-border);\n}\n.annotation--chit--3je6E svg {\n    width: 12px;\n    height: 12px;\n  }\n.annotation--styleChit--yCQ3O {\n  border: none;\n}\n.annotation--chitInline--vG6cM {\n  margin: 0;\n}\n.annotation--solidPaint--ClR6h {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n}\n.annotation--solidPaintValue--9PQMf {\n}\n.annotation--authoringRow--cIo3- {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  height: 32px;\n  padding: 0 4px 4px 8px;\n}\n[data-fpl-version='ui3'] .annotation--authoringRow--cIo3- {\n    padding: 0 8px 4px 8px;\n  }\n.annotation--addPropertyButton--67vPO {\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: center;\n  gap: 8px;\n  background-color: transparent;\n  color: var(--color-text);\n  border: 1px solid var(--color-border);\n  border-radius: 4px;\n  padding: 0 8px;\n  font-family: Inter;\n  font-size: 11px;\n  font-weight: 500;\n  height: 24px;\n}\n.annotation--addPropertyButton--67vPO.annotation--active--Q00x6 {\n    background-color: var(--color-bg-pressed);\n  }\n.annotation--addPropertyButton--67vPO:focus-visible {\n    border-color: var(--color-border-selected);\n  }\n.annotation--plusIcon--Ove-l {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 16px;\n  width: 16px;\n  flex: 0 0 16px;\n  line-height: 16px;\n  fill: var(--color-icon);\n}\n.annotation--dropdown--WLrjl {\n  display: flex;\n  flex-direction: column;\n  position: absolute;\n  padding: 8px 0;\n  top: calc(100% + 8px);\n  left: 0;\n  width: 220px;\n}\n.annotation--coloredProperty--OTQ6l {\n  display: flex;\n  align-items: center;\n  justify-content: left;\n}\n.annotation--coloredProperty--OTQ6l > span {\n    padding-left: 2px;\n    padding-right: 2px;\n    border-radius: 2px;\n  }\n.annotation--paddingProperty--ckvG6 > span {\n    background: var(--color-bginspectpadding);\n    color: var(--color-textoninspectpadding);\n  }\n.annotation--spacingProperty--RCjSM > span {\n    background: var(--color-bginspectspacing);\n    color: var(--color-textoninspectspacing);\n  }\n.annotation--mixedValues--Z0qIk {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n.annotation--variablePill--VNxoI {\n  height: 16px;\n  padding: 0 4px;\n}\n.annotation--multipleVariableWrapper--OW3M1 {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 4px;\n  flex-direction: row;\n  align-items: center;\n}\n.annotation--multipleVariableWrapper--OW3M1.annotation--vertical--zmpVv {\n  flex-direction: column;\n  flex-wrap: nowrap;\n}\n.annotation--multipleVariableValue--5-5xk {\n  overflow: hidden;\n  align-self: stretch;\n}\n",oY.N].join("\n"),e.append(t),i(e)}},[]),a.createElement("div",{ref:n,"data-testid":"annotation-renderer-shadow-dom-container",className:ai},o&&(0,nF.createPortal)(t,o))}function oX(){let e=(0,o.wA)(),t=(0,nI.uQ)(),n=(0,o.d4)(e=>e.isFullscreenDocumentLoaded),i=(0,t6.J2)(ei.Ez5.uiState().showAnnotations),r=(0,tv.dH)(),l=(0,nJ._X)({subscribeToUpdates_expensive:!0}),s=(0,t6.J2)((0,nH.d)().lockMouseMoves);a.useEffect(()=>{s&&l.zoomScale<.05&&(0,nH.d)().lockMouseMoves.set(!1)},[s,l]);let[c,d]=(0,tL.fp)(n$.J);(0,a.useEffect)(()=>{i||d(!1)},[i,d]),(0,a.useEffect)(()=>{c&&e((0,nz.UU)())},[e,c]);let[p,u]=(0,a.useState)({}),{nodesWithAnnotationInfo:m,annotationsBeingViewed:_,newAnnotationNodeInfo:g}=function(e,t){let n=(0,o.d4)(e=>e.mirror.appModel.currentPage),i=(0,t6.J2)(ei.Ez5.annotationObserver().annotationInfoByTlf),r=(0,tv.dH)(),l=(0,nI.uQ)(),s=(0,tL.md)(n$.J),c=(0,t6.J2)(ei.Ez5.devHandoffState().focusMode),d=(0,t6.J2)(ei.Ez5.devHandoffState().focusNodeId),p=(0,tz.hA)(),u=(0,nX.Fk)((e,t)=>e.get(t)?(0,Z.qT)(e,t):[],n),{tlfsWithNodes:m,newAnnotationNode:_}=(0,nX.Fk)((e,t,n,a,o,i,r,l,s,c)=>{let d=[];for(let n of r.keys()){let a=e.get(n);a&&a.containingCanvas===t&&(c?(0,Z.hD)(e,n,e=>{e.guid===c&&d.push(n)}):d.push(n))}if(l&&(n===ei.NLJ.ANNOTATE||a)){let t=(0,Z.kh)(e,l)||e.get(l);t?.guid&&!r.has(t.guid)&&d.push(t.guid)}let p=null;if(nY.z4.getIsExtension()&&o&&i){let t=(0,Z.kh)(e,i)||e.get(i);t?.guid&&(d=[t?.guid])}let u=d.map(t=>{let n=e.get(t),{nodes:o,tlfContainsSelectedNode:i,newAnnotationNode:r}=function e(t,n,a=[],o){let i=!1,r=null;if(t){if(t.guid===n&&(i=!0),"SECTION"===t.type)return{nodes:[],tlfContainsSelectedNode:i,newAnnotationNode:r};t.childrenNodes.forEach(t=>{let{nodes:l,tlfContainsSelectedNode:s,newAnnotationNode:c}=e(t,n,a,o);return i=i||s,r=r||c,l}),t.annotations.length>0&&t.visible?a.push(t):o&&t.guid===n&&(r=t)}return{nodes:a,newAnnotationNode:r,tlfContainsSelectedNode:i}}(n,l,[],a);return r&&n&&(p={node:r,tlf:t}),{nodes:o,tlfContainsSelectedNode:i,topLevelFrameNode:n}});return s.forEach(e=>{r.has(e.guid)||u.push({nodes:[],tlfContainsSelectedNode:!1,topLevelFrameNode:e})}),{tlfsWithNodes:u,newAnnotationNode:p}},n,r,s,c,d,i,l,u,p),{annotationsBeingViewed:g,nodesWithAnnotationInfo:E}=(0,a.useMemo)(()=>{let n={x:e.offsetX,y:e.offsetY},a=m.map(({nodes:a,tlfContainsSelectedNode:o,topLevelFrameNode:i})=>{if(!i||!i.isAlive())return null;let r={x:i.absoluteBoundingBox.x,y:i.absoluteBoundingBox.y,width:i.absoluteBoundingBox.w,height:i.absoluteBoundingBox.h};if(0===a.length)return o$(r,(0,nJ.qc)(e))?{topLevelFrameNode:i,nodes:a,nodesWithFinalPositionData:[],shouldMinimize:!1,originalShouldMinimize:!1,tlfContainsSelectedNode:o,distanceFromCenter:oj({x:e.offsetX,y:e.offsetY},r),dimensionsWithAnnotations:r}:null;let l=.4>Math.max((r.width||0)*e.zoomScale/e.width,(r.height||0)*e.zoomScale/e.height)&&!o,s=0,c=0,d=a.map(n=>{let a=t[n.guid]||{width:0,height:0},o=ox(n,i,e);return o.isLeftAligned?s=Math.max(s,24+a.width/e.zoomScale):c=Math.max(c,24+a.width/e.zoomScale),{...o,height:t[n.guid]?.height||0,node:n,tlfGuid:i.guid,shouldMinimize:l}}).sort((e,t)=>e.offsetY-t.offsetY),p=ow(e,d,l),u=1/0,m=-1/0;p.forEach(t=>{let n=t.height/e.zoomScale,a=t.offsetY/e.zoomScale+e.offsetY-n/2;u=Math.min(u,a),m=Math.max(m,a+n)});let _=Math.min(r.y,u),g=Math.max(r.y+r.height,m),E={x:r.x-s,y:_,width:r.width+s+c,height:g-_};return o$(E,(0,nJ.qc)(e))?(o&&(n={x:E.x+E.width/2,y:E.y+E.height/2}),{topLevelFrameNode:i,nodes:a,nodesWithFinalPositionData:p,shouldMinimize:l,originalShouldMinimize:l,tlfContainsSelectedNode:o,distanceFromCenter:oj({x:e.offsetX,y:e.offsetY},E),dimensionsWithAnnotations:E}):null}).filter(nB.isNotNullish).sort((e,t)=>oj(n,e.dimensionsWithAnnotations)-oj(n,t.dimensionsWithAnnotations)),o=a.filter(e=>!e.shouldMinimize);for(let e=0;e<o.length-1;e++){let t=o[e];for(let n=e+1;n<o.length;n++){let e=o[n];o$(t.dimensionsWithAnnotations,e.dimensionsWithAnnotations)&&(t.tlfContainsSelectedNode?e.shouldMinimize=!0:e.tlfContainsSelectedNode?t.shouldMinimize=!0:t.distanceFromCenter<e.distanceFromCenter?e.shouldMinimize=!0:t.shouldMinimize=!0)}}let i=[],r=a.flatMap(({nodes:n,nodesWithFinalPositionData:a,shouldMinimize:o,originalShouldMinimize:r,topLevelFrameNode:l})=>{if(n.length>0&&!o&&i.push({tlf:l.guid,numNodes:n.length}),o===r)return a;let s=n.map(n=>({...ox(n,l,e),height:t[n.guid]?.height||0,node:n,tlfGuid:l.guid,shouldMinimize:o})).sort((e,t)=>e.offsetY-t.offsetY);return ow(e,s,o)});return{annotationsBeingViewed:i,nodesWithAnnotationInfo:r}},[t,m,e]);return{nodesWithAnnotationInfo:E,annotationsBeingViewed:g,newAnnotationNodeInfo:(0,a.useMemo)(()=>{if(!_)return null;let n=function(e,t){let{x:n,y:a,w:o,h:i}=e.absoluteBoundingBox,{offsetX:r,offsetY:l,zoomScale:s,width:c}=t,d=ei.Ez5.isFullscreenYScrollbarNeeded(),p=Math.min(20*s,20),u=n+o,m=(n-r)*s+c/2>ob+8&&!((r-u)*s+c/2>ob+(d?16:4));return m?{lineWidth:p,offsetX:(n-r)*s-p,offsetY:(a+i/2-l)*s,isLeftAligned:m}:{lineWidth:p,offsetX:(u-r)*s+p,offsetY:(a+i/2-l)*s,isLeftAligned:m}}(_.node,e);return{...n,height:t[_.node.guid]?.height||0,newAnnotationNode:_,tlfGuid:_.tlf,shouldMinimize:!1,node:_.node,lineAlignment:oT.ALIGNED,lineHeight:0,originalLineWidth:n.lineWidth}},[t,_,e])}}(l,p),E=(0,nW.IL)(),f=_.length,y=_.reduce((e,t)=>e+t.numNodes,0);(0,a.useEffect)(()=>{f&&r===ei.NLJ.SELECT&&E("showing_annotations_for_tlfs",{topLevelFrameCount:f,nodesWithAnnotationsCount:y})},[f,y,r,E]);let h=(0,nG.v_)("annotationsKeyDown","keydown",(0,a.useCallback)(e=>{r===ei.NLJ.ANNOTATE&&!c&&t&&"Enter"===e.key&&(e.ctrlKey||e.metaKey)&&(d(!0),e.stopPropagation())},[r,c,t,d]));if(a.useEffect(()=>(document.addEventListener("keydown",h),()=>document.removeEventListener("keydown",h)),[h]),a.useEffect(()=>{nq.NB?.setIsShowingAnnotations(0!==_.length)},[_]),!n||!i&&r!==ei.NLJ.ANNOTATE)return null;function v(e,t){(p[e]?.height!==t.height||p[e]?.width!==t.width)&&u(n=>({...n,[e]:t}))}let b=null,N=m.map(e=>c&&e.node.guid===t?(b=a.createElement(oC,{nodeInfo:e,viewportInfo:l,setDimensions:v}),null):a.createElement(oF,{key:e.node.guid,nodeInfo:e,viewportInfo:l,setDimensions:v})),I=c&&g&&a.createElement(oC,{nodeInfo:g,viewportInfo:l,setDimensions:v});return a.createElement(a.Fragment,null,a.createElement(oJ,null,N),b,I)}function o$(e,t){let n=e.x,a=e.x+e.width,o=e.y,i=e.y+e.height,r=t.x,l=t.x+t.width,s=t.y,c=t.y+t.height;return n<l&&a>r&&o<c&&i>s}function oj(e,t){let n={x:t.x+t.width/2,y:t.y+t.height/2};return Math.hypot(n.x-e.x,n.y-e.y)}function oZ(){return a.createElement(nK.p,null,a.createElement(oX,null))}function oQ({children:e}){return a.createElement(nm.G.Provider,{value:{loggerEventName:"dev_handoff_navigate"}},e)}let o0=a.memo(({shouldShowDragAndDropBorder:e})=>{let t=(0,o.d4)(e=>e.progressBarState),n=(0,tv.p8)("loadingEmbeds"),i=!!(0,A._I)(),r=(0,tz.l7)(),l=(0,t5.Lk)(),s=(0,a.useRef)(null),c=(0,o.d4)(e=>e.openFile),d=c?c.key:"",p=(0,o.d4)(e=>e.universalInsertModal),u=(0,o.wA)();return(0,tK.Gb)(d),(0,t4.W)(),a.createElement(oQ,null,a.createElement(B.ED,null),a.createElement(ng.sk,null,t.mode!==t1.Oin.OFF&&a.createElement("div",{className:nf._q}),a.createElement(t8.pO,{initialFilterState:{currentPage:!0}},n.map(e=>a.createElement(nn._,{key:`loading-embed-${e}`,nodeId:e})),a.createElement(nE.qn,null),a.createElement(nu.u,null),i&&a.createElement(nU,null),a.createElement(nt.GR,null),a.createElement(nt.bu,null),a.createElement(nc.J,null),!r&&a.createElement(oZ,null),a.createElement(nE.XI,{commentsDetailContainerRef:s}),a.createElement(no.Nz,null),a.createElement("div",{ref:s}),a.createElement(nE.uU,null),a.createElement(ne.G,null),e&&a.createElement(no.X5,null)),a.createElement(t7.A,{isFigjamEditor:!1,isDesignEditor:!1,openFile:c}),p.showing&&a.createElement(x.tH,{boundaryKey:"FdBrowseResourceModal",onError:()=>{u(es.F.enqueue({message:"Unable to open inserts menu",type:"react-error"}))},fallback:x.H4.NONE_I_KNOW_WHAT_IM_DOING},a.createElement(nd.k,null))),l&&a.createElement(nr.K,{className:nf.PA},a.createElement(np.s,null)))});n(30637);var o1=n(448169),o2=n(441088),o3=n(241437),o4=n(840083),o6=n(38329),o5=n(742808),o7=n(727749),o8=n(788744),o9=n(315329);function ie(){return(0,o9.o)(),a.createElement(a.Fragment,null)}function it(e){let t=(0,o.wA)(),n=(0,o.d4)(e=>e.showEditButton),i=(0,o.d4)(e=>e.fileByKey),r=(0,o.d4)(e=>e.userAnalyticsData),l=(0,o.d4)(e=>e.user),c=(0,o.d4)(e=>e.openFile?.canEdit),d=(0,o.d4)(e=>null!=e.openFile),{fileKey:p,orgId:u}=e,m=null!=p&&!!i[p]?.is_favorited,_=(0,eY.Rs)(eq.jJU,{fileKey:p||""},{enabled:!!p});a.useEffect(()=>{if("loaded"===_.status){let e=_.data.file?.developerRelatedLinks,t=e?.reduce((e,t)=>{let n=e.get(t.nodeId)??[];return n.push(t),e.set(t.nodeId,n),e},new Map);if(t)try{ei.glU.setDeveloperRelatedLinks(t)}catch{}}},[_]);let g=a.useRef(!1),E=(0,eV.Xr)(to.Kc),f=(0,eY.Rs)(eq.JKh,{fileKey:p||""},{enabled:!!p});a.useLayoutEffect(()=>{if("loaded"!==f.status)return;let e=f.data.figFileWorkshopMode;E(e?e.expiresAt:null),e&&e.expiresAt>new Date&&(g.current=!0),t(ta.lX(e?{id:e.id,until:e.expiresAt,loaded:!0}:{loaded:!0}))},[f,t,E]);let y=a.useRef(null),h=a.useRef(!1),v=a.useRef(null),b=a.useRef(null),N=(0,eY.Rs)(eq.ehp,{fileKey:p||""},{enabled:!!p});a.useLayoutEffect(()=>{if("loaded"!==N.status)return;let e=N.data.file;if(null===y.current){let t=(0,s.Ay)().editing_file;null!==e&&t&&e.key===t.key&&!!t.can_edit!==e.canEdit&&((0,M.sx)("open_file_inconsistent_permission",{file_key:e.key,lg_can_edit:e.canEdit,sinatra_can_edit:t.can_edit,user:o6.D.getState().user?.id},{batchRequest:!0}),(0,o5.Rh)("open_file.inconsistent_permissions",{lg_can_edit:e.canEdit,sinatra_can_edit:t.can_edit}))}if((0,nE.X_)({openFile:e,wasInWorkshop:g.current,previousCanEdit:y.current,wasInUnclaimedTryFile:h.current,previousCanView:b.current,previousFileKey:v.current?.key||null},t),null==e)return;b.current=e.canView,y.current=e.canEdit,g.current&&e.isTryFile&&(h.current=!0);let a=o6.D.getState().selectedView;"fullscreen"===a.view&&a.fileKey===e?.key&&v.current!==e&&(t(S.UC({openFile:{...e,showEditButton:n,isFavorited:m}})),v.current=e)},[N,t,n,m,d]);let I=(0,q.Be)();return a.useLayoutEffect(()=>{let e=o6.D.getState().selectedView;if(!I.loaded||"fullscreen"!==e.view)return;let{plugins:n,widgets:a,orgPlugins:o,orgWidgets:i}=I,r={...n,...o},l={...a,...i};t(o7.g3(r)),t(o7.zI(l))},[t,u,I]),(0,o8.rB)(),c&&(0,o9.n)(r,l?.email)?a.createElement(ie,null):a.createElement(a.Fragment,null)}var ia=n(354235);function io(){return(0,W.co)(),null}function ii({children:e,setShouldShowDragAndDropBorder:t,onPointerDown:n=nE.j6,isDragTarget:i=!1}){let r=(0,o.d4)(e=>e.modalShown),l=(0,o2.T)();(0,tL.md)(o3.Pp);let s=(0,t6.J2)(ei.Ez5?.devHandoffState().focusMode),c=(0,o.d4)(e=>e.openFile),d=c?c.key:"",p=(0,et.dq)(),u=a.useRef(!1);return a.createElement(ia.d,null,a.createElement(o1.Y,{isDragTarget:()=>i,onTargetDragEnter:()=>{t(!0)},onTargetDragLeave:()=>{t(!1)},onTargetDrop:()=>{t(!1)}},a.createElement("div",{"aria-hidden":!!r,className:e$()(nf.nP,l&&s&&nf.$J),onPointerDown:e=>{n(e,u)}},a.createElement(it,{fileKey:d||null,orgId:p}),e,a.createElement(o4.G,null),a.createElement(io,null),!1,!1)))}let ir={[eO.nT.Design]:ny,[eO.nT.Whiteboard]:tO.lR,[eO.nT.Sites]:tQ,[eO.nT.Slides]:t0,[eO.nT.DevHandoff]:o0,[eO.nT.Cooper]:function(){return null}},il=a.memo(()=>{let e=(0,o.d4)(e=>e.openFile),t=e?e.key:"",n=(0,a.useRef)(null),i=(0,a.useRef)(null),r=(0,a.useRef)(null),l=(0,_.R)(ng.Xy),c=(0,o.wA)(),p=(0,tL.md)(tF.h),u=(0,o.d4)(e=>e.openFile?.canEdit??!1),[m,g]=(0,a.useState)(!1),E=(0,tv.dH)(),f=l.selectedView.editorType,y=(0,te.ZC)(f),h=(0,tJ.R)(),v=(0,tv.p8)("showUi");if(f!==y&&y&&c(S.PQ([])),(0,tX.j)(t),(0,t$.KQ)(t),(0,tM.OQ)(t),(0,t$.y1)(t),tK.nz(),(0,tB.N)(),(0,nE.Ky)(),(0,a.useEffect)(()=>{let e=()=>{window.scrollTo({left:document.body.scrollLeft,top:document.body.scrollTop,behavior:"smooth"})};window.scrollTo(0,0),d.XN&&document.addEventListener("focusout",e),document.documentElement.classList.add(nf.FC),document.body.classList.add(nf.Wc),c(tV._J());let t=window.FigmaMobile;return t&&(t._get_memory_stats=()=>{let e=ei.P2e?.getImageMemory()||{};return{metadata:JSON.parse(JSON.stringify({coreJsBufferMemory:ei.hMR?.getJsBufferMemory()||0,coreLocalMaxUsedHeapMemory:ei.hMR?.getLocalMaxUsedHeapMemory()||0,coreMaxUsedHeapMemory:ei.hMR?.getMaxUsedHeapMemory()||0,coreTotalUsedHeapMemory:ei.hMR?.getTotalUsedHeapMemory()||0,fullscreenCompressedImages:e.compressedImages||0,fullscreenUncompressedImagesArrayBuffers:e.uncompressedArrayBuffer||0,fullscreenUncompressedImagesImageBitmap:e.uncompressedImageBitmap||0})),reservedWasmMemory:(0,tW.le)()||0,rendererGpuMemory:ei.P2e?.getRendererGpuMemory()||0,rendererBreakdown:ei.P2e?.getRendererMemoryBreakdown()||{}}}),()=>{d.XN&&document.removeEventListener("focusout",e),document.body.classList.remove(nf.Wc),document.documentElement.classList.remove(nf.FC)}},[c]),(0,a.useEffect)(()=>{let e=()=>{window.scrollTo({left:document.body.scrollLeft,top:document.body.scrollTop,behavior:"smooth"})};window.scrollTo(0,0),d.XN&&document.addEventListener("focusout",e),document.documentElement.classList.add(nf.FC),document.body.classList.add(nf.Wc),c(tV._J());let t=window.FigmaMobile;return t&&(t._get_memory_stats=()=>{let e=ei.P2e?.getImageMemory()||{};return{metadata:JSON.parse(JSON.stringify({coreJsBufferMemory:ei.hMR?.getJsBufferMemory()||0,coreLocalMaxUsedHeapMemory:ei.hMR?.getLocalMaxUsedHeapMemory()||0,coreMaxUsedHeapMemory:ei.hMR?.getMaxUsedHeapMemory()||0,coreTotalUsedHeapMemory:ei.hMR?.getTotalUsedHeapMemory()||0,fullscreenCompressedImages:e.compressedImages||0,fullscreenUncompressedImagesArrayBuffers:e.uncompressedArrayBuffer||0,fullscreenUncompressedImagesImageBitmap:e.uncompressedImageBitmap||0})),reservedWasmMemory:(0,tW.le)()||0,rendererGpuMemory:ei.P2e?.getRendererGpuMemory()||0,rendererBreakdown:ei.P2e?.getRendererMemoryBreakdown()||{}}}),()=>{d.XN&&document.removeEventListener("focusout",e),document.body.classList.remove(nf.Wc),document.documentElement.classList.remove(nf.FC)}},[c]),(0,a.useEffect)(()=>{l.openFile&&!n.current&&(c(tK.Yx({})),l.openFile&&!l.isReadOnly?l.openFile?.canEdit&&c(tR.rH({fileKey:l.openFile.key})):(0,s.kc)().ce_new_missing_fonts_logging&&(0,tG.DI)(),n.current=l.openFile)},[c,l.isReadOnly,l.openFile]),(0,a.useEffect)(()=>{(0,nE.RS)(c,l.openFile?.key,l.currentUserOrgId)},[c,l.currentUserOrgId,l.openFile?.key,l.selectedView.editorType]),(0,a.useEffect)(()=>{z.eD&&z.eD.setEditFilePermissions(u)},[u]),(0,a.useEffect)(()=>{l.openFile&&(null===i.current||!i.current)&&c((0,tU.x4)()),l.openFile&&i.current&&l.openFile.key!==i.current&&c((0,tU.x4)()),r.current&&l.selectedView.editorType!==r.current&&c((0,tU.x4)()),r.current=l.selectedView.editorType,i.current=l.openFile?.key},[c,l.openFile,l.openFile?.key,l.selectedView.editorType]),"ok"!==p)return null;let b=ir[f]??a.Fragment;return a.createElement(ii,{setShouldShowDragAndDropBorder:g,isDragTarget:f===eO.nT.Whiteboard,onPointerDown:f===eO.nT.Whiteboard?(e,t)=>{(0,nE.P2)(e,t,E)}:void 0},a.createElement(b,{shouldShowDragAndDropBorder:m}),(f===eO.nT.Design||f===eO.nT.DevHandoff)&&h&&v&&a.createElement(tq,null))});var is=n(447402);function ic(){let{error:e}=(0,x.Hb)();return e instanceof Error&&e.message.includes("Out of memory")?a.createElement(is.PG,null):a.createElement(x.S1,null)}let id=()=>{let e=(0,o.Pj)();return a.useCallback(t=>{let n=e.getState().mirror.sceneGraph;return(0,Z.dA)(n,t)},[e])},ip=()=>{"hidden"===document.visibilityState&&(f.x4?.clear(),eL.L.cleanupSession())};function iu(){let e=(0,o.wA)(),t=(0,o.d4)(e=>e.openFile);(0,A.lF)(t?.key??""),eS.M4.Folder.useValue(t?.folderId);let n=(0,o.d4)(e=>e.selectedView.editorType),c=(0,tI.FF)(),[p,u]=(0,a.useState)(!1),_=(0,r.DP)(),f=(0,tS.sO)(),y=(0,a.useCallback)(()=>{(0,nE.jS)(),u(!0)},[]),h=(0,o.d4)(e=>e.mergingStatus);(0,a.useEffect)(()=>{if((0,s.kc)().ce_suppress_browser_keys)return document.addEventListener("keydown",m,!0),()=>void document.removeEventListener("keydown",m,!0)},[]),(0,F.LD)(),function(){let e=(0,a.useRef)(),t=(0,a.useRef)(),n=(0,o.wA)(),i=(0,o.d4)(e=>e.userFlags),r=(0,o.d4)(e=>!!e.user),l=function(e,t){let n=(0,o.d4)(e=>e.mirror.appModel.showKeyboardShortcuts),i=(0,o.d4)(e=>e.user?.created_at),r=(0,a.useMemo)(()=>{let e=new Date("2022-11-14").getTime();return null!=i&&new Date(i).getTime()>=e},[i]);return(0,a.useCallback)((a,o,i,l)=>{t.keyboard_user_first_detection||l||!r?a!==ei.aTn.US_QWERTY||l||o!==ei.aTn.UNKNOWN?a&&o!==ei.aTn.UNKNOWN?t.keyboard_manual_supported_bell||eg(e,a,o,n):a&&o===ei.aTn.UNKNOWN?t.keyboard_generic_supported_first_bell||eE(e,a,n):(0,er.CZ)({layout:o,detectedLayoutStr:i??void 0,eventName:"keyboard_change_no_bell"}):(0,er.CZ)({layout:a,eventName:"ignore_us_qwerty"}):(e(C.b({keyboard_user_first_detection:!0})),a&&((0,er.rd)({layout:a}),(0,er.CZ)({layout:a,eventName:"auto_set_new_user_layout"})))},[e,t,n,r])}(n,i),s=(0,a.useCallback)(async()=>{if(r){if(z.eD){let t=await ef(l,e.current??null);e.current=t}else{let e=await ey(l,t.current??null);t.current=e}}},[l,r]);(0,a.useEffect)(()=>{ed.Y5.isReady()?s():ed.Y5.onReady().then(()=>setTimeout(s,500))},[])}(),(0,ee.XS)(),function(){let e=(0,o.Pj)(),t=(0,o.d4)(eh.d1),n=(0,o.d4)(eN.m0),i=(0,o.d4)(eN.No),r=(0,o.d4)(e=>e.library.published),l=(0,o.d4)(e=>e.openFile),c=(0,o.d4)(e=>e.fileVersion),d=(0,o.d4)(e=>e.loadingState),p=(0,o.d4)(e=>e.library.local),u=(0,o.d4)(e=>e.library.assetsPanelSearch.shouldSearchDefaultLibraries),m=(0,ev.ud)(),_=(0,o.d4)(e=>e.folders),g=(0,eI.l6)(),E=(0,o.d4)(e=>e.library.assetsPanelSearch.query),f=(0,o.d4)(e=>e.library.assetsPanelSearch.searchOptions),y=(0,eb.D2)(d,(0,ex.yD)(l?.key||"")),h=(0,eT.M)()&&(0,s.kc)().dse_new_asset_panel_fetch,v=(0,s.kc)().dse_new_asset_panel_fetch&&(0,s.kc)().asset_search_min_searches;(0,a.useEffect)(()=>{t&&eA.YG.sourcesDidChange()},[t,n,i,r,p,u,m,_]),(0,a.useEffect)(()=>{(0,eA.Wg)(e.getState(),{ignoreLoadingState:h})&&eA.YG.queryDidChange(e)},[e,E,h]),(0,a.useEffect)(()=>{(0,eA.Wg)(e.getState(),{ignoreLoadingState:h})&&eA.YG.searchOptionsDidChange(e)},[e,f,h]),(0,a.useEffect)(()=>{(0,eA.Wg)(e.getState(),{ignoreLoadingState:h})&&eA.YG.subscriptionsDidChange(e,g)},[e,y,g,h]),(0,a.useEffect)(()=>{!v&&(0,eA.Wg)(e.getState(),{ignoreLoadingState:h})&&eA.YG.assetSearchMinimizeSearchShadowRead(e,ew.oi.OPEN_FILE)},[e,l,h,v]),(0,a.useEffect)(()=>{!v&&(0,eA.Wg)(e.getState(),{ignoreLoadingState:h})&&eA.YG.assetSearchMinimizeSearchShadowRead(e,ew.oi.FILE_VERSION)},[e,c,h,v]),(0,a.useEffect)(()=>{!v&&(0,eA.Wg)(e.getState(),{ignoreLoadingState:h})&&eA.YG.assetSearchMinimizeSearchShadowRead(e,ew.oi.LOADING_STATE)},[e,d,h,v])}(),(0,$.gN)(),z.eD&&function(){let e=(0,q.JI)(),t=(0,o.d4)(e=>e.mirror.appModel.isReadOnly),n=(0,X.Yo)(),i=(0,o.d4)(e=>e.openFile),r=(0,o.d4)(e=>e.localPlugins),l=(0,R.E3)(),s=(0,q.op)(),c=(0,o.d4)(e=>e.installedPluginVersions.plugins),d=(0,o.d4)(e=>e.mirror.selectedStyleProperties?.selectedWidgetInfo),p=(0,o.d4)(e=>e.mirror.appModel.activeTextReviewPlugin),u=(0,o.d4)(e=>e.publishedPlugins),m=(0,o.d4)(e=>e.currentUserOrgId?e.orgById[e.currentUserOrgId]:null),_=(0,q.Be)(),g=_.orgPlugins,E=_.orgWidgets,f=(0,J.h)("plugin"),y=(0,J.h)("widget"),h=(0,q.NU)(),v=(0,q.qr)(),b=(0,q.ZT)(),N=null!=(0,$.SH)();a.useEffect(()=>{let a={isReadOnly:t,userCanRunPlugins:e,openFile:i,publishedPlugins:u,localExtensions:r,orgEntity:n,allSavedPlugins:c,recentlyUsedPlugins:s,org:m,editorType:l,widgetSelectionInfo:d,hideRecentsHeader:!0,activeTextReviewPlugin:p,orgSavedPlugins:g,orgSavedWidgets:E,orgPrivatePlugins:f,orgPrivateWidgets:y,savedWidgetVersions:h,recentlyUsedWidgets:v,publishedWidgets:b};j(H.$0(a),Y.wX(a))},[t,e,i,u,c,s,r,n,m,l,d,p,_,g,E,f,y,h,v,b,N])}(),function(){let e=(0,R.E3)(),t=(0,a.useCallback)(()=>{(0,M.sx)("display_redline",{source:"keyboard_shortcut",mode:e})},[e]),n=(0,L.A)(t,1e3,{leading:!0,trailing:!1}),i=(0,o.d4)(e=>e.usedKeyboardShortcuts["measure-to-selection"]||0),r=(0,a.useRef)(i);(0,a.useEffect)(()=>{r.current!==i&&(r.current=i,n())},[i,n])}();let v=(0,g.Sl)();(0,E.I7)("exp_aa_test_fullscreen_view").getConfig(),function(){let e=(0,o.wA)(),t=(0,tI.FF)(),n=(0,tr.BI)(),[i,r]=(0,a.useState)(!1),l=(0,o.d4)(e=>e.mirror.appModel.multiplayerSessionState===ei.kul.JOINED);a.useEffect(()=>{t&&!i&&n?.shouldOptimizeForIpadApp&&l&&!ei.Ez5?.defaultToolIsHandSelect()&&(r(!0),ed.Y5.triggerAction("set-tool-hand",null))},[t,n,i,r,l]);let s=(0,o.d4)(({mirror:{appModel:e}})=>e.showUi);a.useEffect(()=>{n?.updateUIVisible&&n.updateUIVisible(s)},[n,s]);let c=(0,tr.m0)();a.useEffect(()=>{c&&(c._try_to_flush_autosave=async()=>{let e=(0,th.ZG)();if(e){let t=e.session();t&&await t.tryToFlushAutosave()}})},[c]);let d=(0,tN.Kd)();a.useEffect(()=>{n?.updateSaveStatus&&(d?l?n.updateSaveStatus(tx.av.SAVING):n.updateSaveStatus(tx.av.PAUSED):n.updateSaveStatus(tx.av.SAVED))},[n,d,l]);let p=(0,o.d4)(e=>(0,tb.Yh)(e.mirror.appModel,"undo")),u=(0,o.d4)(e=>(0,tb.Yh)(e.mirror.appModel,"redo"));a.useEffect(()=>{if(n?.updateUndoEnabled&&n.updateUndoEnabled(p),n?.updateRedoEnabled&&n.updateRedoEnabled(u),c){let t=t=>{e(es.F.dequeue({matchType:"undo_redo_gesture"})),e(es.F.enqueue({message:t,type:"undo_redo_gesture",timeoutOverride:750}))};c._trigger_undo=()=>{p&&(ed.Y5.triggerActionInUserEditScope("undo"),t((0,el.t)("fullscreen_actions.undo")))},c._trigger_redo=()=>{u&&(ed.Y5.triggerActionInUserEditScope("redo"),t((0,el.t)("fullscreen_actions.redo")))}}},[n,e,p,u,c]);let m=(0,tr.pt)();a.useEffect(()=>{m&&(m._set_ui_visibility=e=>{e!==s&&ed.Y5.triggerAction("toggle-ui")})},[m,s]);let _=(0,ty.Yk)();a.useEffect(()=>{n?.updateDLTHeight&&n.updateDLTHeight(_)},[_,n]);let g=(0,tv.dH)(),E=(0,tw.pK)(g),f=(0,tr.Ef)(),y=(0,o.d4)(e=>e.mirror?.appModel.isReadOnly);a.useEffect(()=>{E&&!y&&(f?.nativeToolbarUpdateActiveTool?.(E),f?.nativeToolbarUpdateMultiselectActive?.("MULTISELECT"===E))},[f,E,y]);let[h,v]=a.useState("ERASER"),[b,N]=a.useState("PENCIL");a.useEffect(()=>{!y&&E&&(0,tw.S0)(E)&&E!==h&&(N(h),v(E))},[E,h,v,N,y]),a.useEffect(()=>{m&&(m._switch_to_eraser=function(){if(y)return{success:!1,error:tA.lj.READ_ONLY_FILE,currentTool:"NONE"};if("ERASER"!==h)return(0,tw.Jm)("set-tool-eraser"),{success:!0,error:null,currentTool:"ERASER"};{let e=tw.Jh.get(b);return e&&(0,tw.Jm)(e),{success:!0,error:null,currentTool:b}}},m._switch_to_previous_drawing_tool=function(){if(y)return{success:!1,error:tA.lj.READ_ONLY_FILE,currentTool:"NONE"};let e=tw.Jh.get(b);return e&&(0,tw.Jm)(e),{success:!0,error:null,currentTool:b}})},[y,E,b,h,m]),c&&(c._update_context_menu_visibility=e=>{ei.glU.updateNativeContextMenuVisibility(e)},c._override_document_visibility_state=tT.R),m&&(m._activate_multiselect_mode=()=>{(0,tw.Jm)("set-tool-multiselect")},m._deactivate_multiselect_mode=()=>{(0,tw.Jm)("set-tool-default")})}(),(0,eP.a4)(),(0,l.fp)(),a.useEffect(()=>eo.Bc,[]);let b=(0,E.I7)("exp_test_exposure_data_loss",!1,!0).getConfig(),N=!!(0,ea.f)("exp_test_exposure_data_loss_has_checked");a.useEffect(()=>{let t=b.getValue("should_expose_once",null);null===t||t&&N||((0,E.hW)("exp_test_exposure_data_loss"),t&&e(C.b({exp_test_exposure_data_loss_has_checked:!0})))},[b,N,e]),a.useEffect(()=>{n===eO.nT.Whiteboard&&(0,E.hW)("exp_unified_index_v3_figjam")},[n]),a.useEffect(()=>(n===eO.nT.Whiteboard&&d.Ay.isMeetDevice&&"undefined"!=typeof document&&document.addEventListener("visibilitychange",ip),()=>{document.removeEventListener("visibilitychange",ip)}),[n]);let T=(0,D.o)();a.useEffect(()=>{if(T)return e(P.HQ({storeInRecentsKey:T})),n===eO.nT.Whiteboard&&(e(P.gr({storeInRecentsKey:T})),e(P.vZ({storeInRecentsKey:T}))),n!==eO.nT.DevHandoff&&e(P.aF({storeInRecentsKey:T})),window.addEventListener("storage",t,!1),()=>{window.removeEventListener("storage",t,!1)};function t(t){switch(t.key){case eC.vY:case eC.S7:e(P.HQ({storeInRecentsKey:T}));break;case eC.YN:case eC.xk:e(P.aF({storeInRecentsKey:T}));break;case eC.SO:e(P.gr({storeInRecentsKey:T}));break;case eC.JG:e(P.vZ({storeInRecentsKey:T}))}}},[e,n,T]);let x=(0,en.TA)();a.useEffect(()=>{x&&e(w.oQ())},[e,x]),function(){let e=(0,eV.Xr)(ez);(0,a.useEffect)(()=>{let t;let n=()=>{clearTimeout(t),t=setTimeout(()=>{e(eU.IDLE_DUE_TO_INACTIVITY)},6e4)},a=()=>{n(),e(eU.ACTIVE_AFTER_IDLE)},o=eR()(a,500,{trailing:!1,leading:!0}),i=()=>{"visible"===document.visibilityState?a():e(eU.IDLE_DUE_TO_TAB_SWITCH)};return e(eU.ACTIVE_FIRST_TIME),eH.forEach(e=>{document.addEventListener(e,o)}),document.addEventListener("visibilitychange",i),n(),()=>{eH.forEach(e=>{document.removeEventListener(e,o)}),document.removeEventListener("visibilitychange",i),clearTimeout(t)}},[e,6e4])}(),a.useEffect(()=>{let t=t=>{if(h===i.y.MERGING)return t.returnValue="A merge operation is in progress. Closing the window could result in data loss or corruption; please wait until the operation completes.",t.preventDefault(),e(S.sx({name:"Unload During Merge Warning Shown"})),!1},n=()=>{h===i.y.MERGING&&e(S.sx({name:"Page Closed During Merge"}))};return window.addEventListener("beforeunload",t),window.addEventListener("unload",n),()=>{window.removeEventListener("beforeunload",t),window.removeEventListener("unload",n)}},[h,e]);let O=(0,a.useRef)(!1);a.useEffect(()=>{(0,s.kc)().search_persistent_sessions&&t?.key&&!O.current&&(O.current=!0,K.y.startTimer(t.key,(0,ek.lM)()))},[t?.key]);let[k,U]=(0,tw.H_)(),W=a.createElement(a.Fragment,null,a.createElement(im,{file:t,onCanvasExpired:y}),c&&a.createElement(ia.d,null,k?U&&a.createElement(tw.vW,null):a.createElement(tO.aT,null)));return a.createElement(I,{name:"editor",alsoTrack:()=>({editorType:(0,eO.Bu)(n),productType:(0,V.Dc)(n),uiVersion:_.version,fileKey:t?.key||"",slideView:f?(0,tP.R9)():void 0})},a.createElement(B.wG,null,a.createElement(g.q5.Provider,{value:v},a.createElement(a.Fragment,null,!p&&W,!p&&a.createElement(tE,{onWorkshopExpired:y})))))}function im({file:e,onCanvasExpired:t}){let n=(0,o.d4)(e=>e.userStateLoaded),i=(0,o.d4)(e=>e.mirror.appModel.isInitialized),r=(0,_.R)(e=>e.comments),{anchorPositions:l,boundingBoxPositions:c,DEPRECATED_updateWatchedNodeIds:d,updateWatchedStablePaths:p}=(0,U.Cn)(),u=id(),m=(0,en.TA)();(0,tf.ox)({file:e,onCanvasExpired:t});let g=(0,et.sZ)();if(function(e){let[t,n]=a.useState(!1),o=(0,eJ.K)(),i=(0,eY.Rs)(eq.NSA,{fileKey:e??""},{enabled:!!e}),r="loaded"===i.status&&i.data.file?.canRead!==!0;return a.useLayoutEffect(()=>{o&&r&&n(!0)},[o,r]),!!(0,s.kc)().mfa_for_guests&&t}(e?.key)&&g)return a.createElement(e9,{org:g});let E=(0,k.T8)(a.createElement(O.NX,{userId:m,file:e,orgId:e?.parentOrgId??null,activeId:r.activeThread?.id||null,anchorPositions:l,boundingBoxPositions:c,DEPRECATED_updateWatchedNodeIds:d,updateWatchedStablePaths:p,getPageIdsForNodes:u},a.createElement(tD.R,null,a.createElement(tk.P,null,a.createElement(x.tH,{boundaryKey:"InAppPage",fallback:a.createElement(ic,null),hasCustomWASMBuild:Q.y4},a.createElement(il,null))))),eD.e0.EDITOR,null!=e?(0,V.oP)(e):{},null!=e&&n&&i);return a.createElement(a.Fragment,null,E)}function i_(){return(0,W.co)(),null}let ig=(0,tC.n)(()=>{})},973801:(e,t,n)=>{n.d(t,{X:()=>k});var a=n(411855),o=n(188507),i=n(648836),r=n(385754),l=n(405070),s=n(75888),c=n(677859),d=n(598045),p=n(629019),u=n.n(p),m=n(498750),_=n(541524),g=n(662531),E=n(100197),f=n(7959),y=n(630978),h=n(695342),v=n(221537),b=n(12519);let N="stack_controls--input--gK1jo text--fontNeg12--2PWcg text--_fontBase--QdLsd text--_negText--j9g-L",I="stack_controls--scrubbableControl--b1ChI",T="stack_controls--inputSvg--wFizL",x="stack_controls--stackSpacingRow--Uus3H";function A(){let e=(0,E.J2)(d.Ez5.canvasViewState().focusedStackRegion);if(!e)return null;let{region:t,focus:n}=e;return t===d.RN9.SPACING?a.createElement(S,{focusOnMount:n}):t===d.RN9.COUNTER_SPACING?a.createElement(P,{focusOnMount:n}):a.createElement(C,{stackRegion:t,focusOnMount:n})}let w=e=>{if(e.keyCode===m.Uz.TAB){e.preventDefault(),e.currentTarget.blur();let t=e.shiftKey;d.Qa7.tabActiveStackRegion(t)}};function S({focusOnMount:e}){return a.createElement(f.fI,{className:x},a.createElement(b.KI,{focusOnMount:e,outerClassName:I,inputClassName:N,svgClassName:T,onBlur:d.Qa7.clearActiveStackRegion,onKeyDown:w,onPaste:O,noBorderOnFocus:!0,recordingKey:"stackSpacingControl",inputTestId:"stackSpacingControl",source:"canvas",onCanvasUI:!0}))}function P({focusOnMount:e}){return a.createElement(f.fI,{className:x},a.createElement(y.q,{focusOnMount:e,outerClassName:I,inputClassName:N,svgClassName:T,onBlur:d.Qa7.clearActiveStackRegion,onKeyDown:w,onPaste:O,noBorderOnFocus:!0,recordingKey:"stackCounterSpacingControl",inputTestId:"stackCounterSpacingControl",source:"canvas",onCanvasUI:!0}))}function C({stackRegion:e,focusOnMount:t}){let[n]=(0,v.HF)(e),o=Array.isArray(n)?n.length:0;return e===d.RN9.SPACING?null:a.createElement(f.fI,{className:u()("stack_controls--stackPaddingRow--40WUa",{"stack_controls--large--bJFUN":o>3})},a.createElement(h.s,{paddingSelection:e,focusOnMount:t,outerClassName:I,inputClassName:N,onBlur:d.Qa7.clearActiveStackRegion,onKeyDown:w,onPaste:O,noBorderOnFocus:!0,svgClassName:T,recordingKey:"stackPaddingControl",inputTestId:"stackPaddingControl",source:"canvas",disableVariablesEntryPoint:!0}))}function O(e){(0,_.gk)(e)&&(e.preventDefault(),e.currentTarget.blur(),g.l7.user("paste-in-stack",()=>{d.glU.triggerAction("paste",{})}))}let k=a.memo(function(){return(0,o.d4)(e=>e.mirror.appModel.isReadOnly)?null:a.createElement(D,null)});function D(){return a.createElement(i.k,{isShown:!0},a.createElement(s.IA,null,a.createElement(L,{testID:"DesignInlineMenu"})))}function L({testID:e}){let t=(0,o.d4)(e=>{let t=e.mirror.selectionProperties.stackMode;return 1===e.mirror.selectionProperties.numSelected&&("HORIZONTAL"===t||"VERTICAL"===t)});return(0,o.d4)(e=>{let t=e.mirror.selectionProperties.selectedWidgetInfo;return!!(1===e.mirror.selectionProperties.numSelected&&t?.propertyMenu.length)})?a.createElement(c.W1,{size:"small",testID:e},a.createElement(r.jk,null),a.createElement(l.x,null)):t?a.createElement(c.W1,{testID:e,darkModePreferred:!0},a.createElement(A,{key:"stackControls"})):null}},286886:(e,t,n)=>{n.d(t,{K:()=>y});var a=n(411855),o=n(629019),i=n.n(o),r=n(91408),l=n(374626),s=n(603689),c=n(259927),d=n(809831),p=n(506599),u=n(226055),m=n(617453),_=n(100197),g=n(239671),E=n(672591),f=n(860168);function y(e){let t;let n=(0,s.lz)(),o=(0,m.qw)(),y=(0,d.E3)(),{isPropertiesPanelCollapsed:h}=(0,p.iT)(),v=(0,l.md)(E.Ds),b=(0,_.J2)((0,m.UK)().renderRulers);return(0,u.GS)()&&(t={right:`calc(${y===g.nT.DevHandoff?n:o}px + ${(0,r.jz)(f.M$q)}px)`,top:`${(0,r.jz)(f.M$q)}px`},h&&(t={...t,right:`calc(${v}px + ${(0,r.jz)(f.M$q)}px)`}),b&&(t={...t,top:`calc(${(0,r.jz)(f.M$q)}px + ${(0,r.jz)(f.y9S)}px)`})),a.createElement("div",{style:t,className:i()("nav_container--flexContainer--3Us-2 nav_container--baseContainer--QideS overflow--overflowYAuto--nfK38 overflow--momentumScroll--qtsu7",c.Dm,e.className)},e.children)}},900878:(e,t,n)=>{n.d(t,{E:()=>l,P:()=>s});var a=n(598045),o=n(574724);function i(e,t){let n={},o=e.getVariableConsumptionMap();if(Object.keys(o).length>0)for(let[i,l]of Object.entries(o))if(l?.isMixed||l?.type!==a.Z_n.ALIAS){if(!l?.isMixed&&l?.type===a.Z_n.EXPRESSION)for(let o of function e(t){let n=[];for(let o of t.value.expressionArguments)o.type===a.Z_n.ALIAS?n.push(o.value):o.type===a.Z_n.EXPRESSION&&n.push(...e(o));return n}(l))r(o,i,e,t,n)}else{let a=l?.value;n[a]||r(a,i,e,t,n)}for(let a of e.childrenNodes)Object.assign(n,i(a,t));return n}function r(e,t,n,a,o){if(!o[e]){o[e]={nodesUsed:{}};let t=a.get(e)?.name;t&&(o[e].name=t);let n=a.get(e)?.description;n&&(o[e].description=n);let i=a.get(e)?.resolvedType;i&&(o[e].resolvedType=i)}return o[e].nodesUsed[n.guid]||(o[e].nodesUsed[n.guid]={nodeName:n.name,fields:[]}),o[e].nodesUsed[n.guid].fields.push(t),o}function l(e,t,n=new Map){let a=function(e,t=new Map,n=!1){if(n)return i(e.getRoot(),t);let a=e.getCurrentPage();return null===a?{}:i(a,t)}(e,t);if(n.size>0)for(let[e,t]of n)a[e]||(a[e]={nodesUsed:{}},a[e].name=t.name,a[e].description=t.description,a[e].resolvedType=t.resolvedType,a[e].priority="LOW");return function(e){let t="";for(let[n,a]of Object.entries(e)){if(t+=`${n} has name "${a.name}", resolvedType "${a.resolvedType}"`,a.description&&(t+=`, description "${a.description.slice(0,100)}"`),a.priority?t+=`, priority "${a.priority}"`:t+=', priority "NORMAL"',Object.keys(a.nodesUsed).length>0)for(let[e,{nodeName:n,fields:o}]of(t+=", and is used in ",Object.entries(a.nodesUsed)))t+=`node ${n} with fields ${o.join(", ")}`;t+="\n"}return t}(a)}async function s(e,t,n=.5){let a=[];for(let[t,n]of e)n.description?a.push(`${n.name}: ${n.description}`):a.push(n.name);let i=(await o.Ay.openai.computeEmbeddings({model:"text-embedding-3-small",input:[t,...a],use_cache:!0})).data.map(e=>e.embedding),r=i[0],l=new Map,c=Array.from(e);for(let e=1;e<i.length;e++)if(function(e,t){return e.reduce((e,n,a)=>e+n*t[a],0)/(Math.sqrt(e.reduce((e,t)=>e+t*t,0))*Math.sqrt(t.reduce((e,t)=>e+t*t,0)))}(r,i[e])>n){let[t,n]=c[e-1];l.set(t,n)}return l}},511787:(e,t,n)=>{n.d(t,{f:()=>g});var a=n(411855),o=n(153234),i=n(572206),r=n(268537),l=n(574176),s=n(318812),c=n(720488),d=n(704762),p=n(820396),u=n(5352),m=n(50275),_=n(501191);function g({resolvedTypes:e,recordingKey:t}){let{showing:n,toggle:r,hide:p}=(0,s.BK)("expression-builder-create-variable"),u=a.useRef(null),g=o.rf(o.Pt(t,"createVariableDropdown"),"click",a.useCallback(()=>{1===e.length?v(e[0]):r()},[e,r])),[f,y]=a.useState(!1),h=a.useRef(null),v=e=>{let t=u.current?.getBoundingClientRect();t&&(h.current={initialPosition:new i.Mi(t.left,t.top),resolvedType:e},y(!0))},b=()=>{y(!1)};return a.createElement(a.Fragment,null,a.createElement("button",{ref:u,className:m.ZS,onClick:g},a.createElement(l.B,{svg:_.A})),f&&(f&&h.current?a.createElement(d.IU,{initialPosition:h.current.initialPosition,resolvedType:h.current.resolvedType,onCreateVariable:b,onClose:b}):null),n&&u.current&&a.createElement(c.Cf,{arrowOffsetFromRectLeft:14,leanPadding:0,lean:"right",targetRect:u.current.getBoundingClientRect()},e.map(e=>a.createElement(E,{key:e,resolvedType:e,onClose:p,showCreationModal:v,recordingKey:t}))))}function E({resolvedType:e,onClose:t,showCreationModal:n,recordingKey:i}){let l=(0,u.F)(e),s=o.rf(o.Pt(i,"createVariableOption",l.name),"click",a.useCallback(()=>{n(e),t()},[t,e,n]));return a.createElement(r.c$,{className:m.Fs,onClick:s},a.createElement(p.i,{type:e,showTooltip:!1}),l.name)}},696963:(e,t,n)=>{let a;n.d(t,{E:()=>am});var o=n(411855),i=n(188507),r=n(598045),l=n(693903),s=n(767129),c=n(829816),d=n(536825),p=n(631437),u=n(629019),m=n.n(u),_=n(866206),g=n(91408),E=n(966712),f=n(374626),y=n(529004),h=n(860601),v=n(153234),b=n(572206),N=n(827586),I=n(46481),T=n(939863),x=n(259927),A=n(226055),w=n(356390),S=n(541524),P=n(662531),C=n(848661),O=n(457630),k=n(29680),D=n(335682),L=n(94500),M=n(945020),R=n(498606),V=n(233890),U=n(7959),K=n(611407),F=n(392592),B=n(934533),W=n(239349),G=n(178462),z=n(771941),H=n(869156),Y=n(601607),q=n(113468),J=n(38340),X=n(178248),$=n(900878);function j(){let[e,t]=o.useState(""),n=function(){let e=(0,i.wA)(),t=(0,Y.Fk)(e=>e),n=(0,i.d4)(e=>e.mirror.appModel.currentPage),{selectedInteractions:a}=(0,J.Ay)(q.J.NORMAL),r=(0,H.Rb)(),s=o.useCallback((e,t)=>{let{interactions:n,errorMessage:o}=function(e,t,n){let a=function e(t){var n,a;switch(t.type){case"Navigate to":return n=t.target,{connectionType:"INTERNAL_NODE",navigationType:"NAVIGATE",transitionNodeID:l.fromString(n)};case"Back":return{connectionType:"BACK"};case"Open Overlay":return a=t.target,{connectionType:"INTERNAL_NODE",navigationType:"OVERLAY",transitionNodeID:l.fromString(a)};case"Close Overlay":return{connectionType:"CLOSE"};case"Set Variable":let o=t.expression.join(" ");return function(e,t){let n;try{n=(0,G.q)(t,new z.o)}catch(e){return console.error("Failed to parse expression string in set variable action: ",t),null}return{connectionType:"SET_VARIABLE",targetVariable:{id:e},targetVariableData:n}}(t.target,o);case"Conditional":return function({guardExpression:t,thenAction:n,elseAction:a}){let o=t.join(" ");if(a)try{return{connectionType:"CONDITIONAL",conditionalActions:[{condition:(0,G.q)(o,new z.o),actions:[e(n)]},{actions:[e(a)]}]}}catch(e){return console.error("Failed to parse guard expression string in conditional action: ",o),null}try{return{connectionType:"CONDITIONAL",conditionalActions:[{condition:(0,G.q)(o,new z.o),actions:[e(n)]}]}}catch(e){return console.error("Failed to parse guard expression string in conditional action: ",o),null}}(t)}}(e);if(!a)return{interactions:t,errorMessage:"Failed to get action"};for(let e of t){for(e.actions=e.actions||[];e.actions.length<=n;)e.actions.push({connectionType:"NONE"});e.actions[n]=a}return{interactions:t,errorMessage:""}}(e,a,t);return o||(w.Y5.updateSelectionProperties({prototypeInteractions:n}),null)},[a]);return o.useCallback(async o=>{try{if(!(0,E.kc)().prototype_ai_auto_adv_proto)return{generatedActions:[],errorMessage:"Feature flag not enabled"};let i=(0,W.Zl)(t,n);if(!i||!i.childrenGuids)return{generatedActions:[],errorMessage:"No page node found"};e(F.F.enqueue({message:"AI is generating interaction",type:"ai-generating-interaction",icon:B.zX.SPINNER}));let l=(0,X.dT)(i.childrenGuids,t,!1),c=(0,K.Lg)(l).join(", "),d=new Map(r.map(e=>[e.node_id,{name:e.name,description:e.description,resolvedType:e.resolvedType}])),p=await (0,$.P)(d,o),u=(0,$.E)(t,d,p),m=a[0]?.actions?.length===1&&"NONE"===a[0].actions[0].connectionType?0:a.length,_=await (0,X.h6)({userDescription:o,variablesUsed:u,canvasDescriptions:c},s,m);return e(F.F.dequeue({matchType:"ai-generating-interaction"})),_.errorMessage?e(F.F.enqueue({message:"AI had issue while generating interaction"})):e(F.F.enqueue({message:"AI has finished generating interaction"})),_}catch(t){return console.error(t),e(F.F.dequeue({matchType:"ai-generating-interaction"})),e(F.F.enqueue({message:"AI failed to generate interaction",type:"error"})),{generatedActions:[],errorMessage:t.toString()}}},[t,n,s,r,a,e])}();return o.createElement(U.ks,{placeholder:"Describe a new action",value:e,onChange:e=>t(e.currentTarget.value),onKeyDown:t=>{t.stopPropagation(),"Enter"===t.key&&(t.currentTarget.blur(),n(e))}})}var Z=n(83695),Q=n(776250),ee=n(344780),et=n(320063),en=n(325682),ea=n(820286),eo=n(175290),ei=n(574176),er=n(762638),el=n(422237),es=n(503965);let ec=(0,el.ex)("prototype_action_info",function(){return o.createElement("div",{className:er.cx.flex.itemsCenter.justifyCenter.$},o.createElement(ei.B,{className:"prototype_action_info_tooltip--prototypeDestinationInfoIcon--GeQWS",svg:es.A}),o.createElement("span",{className:er.cx.flexGrow1.m6.$,style:{maxWidth:144}},(0,T.tx)("proto.prototype_panel.use_the_circular_node_to_connect_the_selected_object_to_another_frame_tooltip")))},()=>({unconstrainWidth:!0}));function ed(e){return o.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},o.createElement("path",{stroke:"var(--color-icon)",strokeLinecap:"round",strokeLinejoin:"round",d:"M11.5 6.5V11a1.5 1.5 0 0 0 1.5 1.5h4.5"}))}var ep=n(522739),eu=n(723081),em=n(318812),e_=n(30637),eg=n(46878),eE=n(538697),ef=n(872429);class ey extends eE.c${}class eh extends eE.l6{}function ev({action:e}){return o.createElement("div",{className:"prototype_action_dropdown--prototypeActionIcon--qChhY"},o.createElement(I.U,{svg:(0,eg.Yb)(e)},(0,eg.av)(e)))}function eb(e){let t=`prototype-action-select-${e.recordingKey}`,n=e.dropdownShown&&e.dropdownShown.type===t,a=(0,C.E7)(e.action),l=(0,eg.Yb)(a),s=(0,eg.av)(a),c=(0,A.GS)(),d=new eu.js(c),p=new eu.Z6(c),u=!(0,i.d4)(e=>e.mirror.selectionProperties.isValidPrototypingSourceSelected??!0),_=o.useCallback(e=>e-24,[]),g=o.useCallback(e=>e+24,[]),f=m()({[e.className??""]:!0,"prototype_action_dropdown--select--b3Ssx":!c}),y=o.createElement(I.U,{svg:l},s);return o.createElement(eh,{disabled:u,id:t,dataTestId:"action-select",className:f,chevronClassName:"prototype_action_dropdown--prototypeActionChevron--ZL1Q4",inputClassName:"prototype_action_dropdown--prototypeActionInputWithSvg--Atfua",property:e.action,formatter:n?d:p,onChange:e.onChange,dispatch:e.dispatch,dropdownShown:e.dropdownShown,icon:y,iconClassName:"prototype_action_dropdown--selectActionSvg--XfhUx",recordingKey:v.Pt(e,"select"),hideDropdownWhenContainerMoves:!(0,e_.nl)(),dropdownAlignment:_,dropdownWidth:g},function(e){let t=(0,ef.cJ)(),n=o.createElement(ey,{key:"NONE",value:"NONE",icon:o.createElement(ev,{action:"NONE"}),recordingKey:v.Pt(e,"clear-option"),disabled:!1}),a=o.createElement(ey,{key:"NAVIGATE_TO",value:"NAVIGATE_TO",icon:o.createElement(ev,{action:"NAVIGATE_TO"}),recordingKey:v.Pt(e,"navigate-to-option"),disabled:!1}),i=o.createElement(ey,{key:"SWAP_STATE_TO",value:"SWAP_STATE_TO",icon:o.createElement(ev,{action:"SWAP_STATE_TO"}),recordingKey:v.Pt(e,"swap-state-to-option"),disabled:!r.glU.isSelectionContainedInStateOrStateInstance()}),l=o.createElement(ey,{key:"GO_BACK",value:"GO_BACK",icon:o.createElement(ev,{action:"GO_BACK"}),recordingKey:v.Pt(e,"back-option"),disabled:!1}),s=o.createElement(ey,{key:"SCROLL_TO",value:"SCROLL_TO",icon:o.createElement(ev,{action:"SCROLL_TO"}),recordingKey:v.Pt(e,"scroll-to-option"),disabled:!1}),c=o.createElement(ey,{key:"OPEN_URL",value:"OPEN_URL",icon:o.createElement(ev,{action:"OPEN_URL"}),recordingKey:v.Pt(e,"url-option"),disabled:!1}),d=o.createElement(ey,{key:"OPEN_OVERLAY",value:"OPEN_OVERLAY",icon:o.createElement(ev,{action:"OPEN_OVERLAY"}),recordingKey:v.Pt(e,"open-overlay-option"),disabled:!1}),p=o.createElement(ey,{key:"SWAP_WITH",value:"SWAP_WITH",icon:o.createElement(ev,{action:"SWAP_WITH"}),recordingKey:v.Pt(e,"swap-with-option"),disabled:!1}),u=o.createElement(ey,{key:"CLOSE_OVERLAY",value:"CLOSE_OVERLAY",icon:o.createElement(ev,{action:"CLOSE_OVERLAY"}),recordingKey:v.Pt(e,"close-option"),disabled:!1}),m=!t&&o.createElement(ey,{key:"SET_VARIABLE",value:"SET_VARIABLE",icon:o.createElement(ev,{action:"SET_VARIABLE"}),recordingKey:v.Pt(e,"set-variable"),disabled:!1}),_=!t&&(0,E.kc)().prototype_set_mode_action&&o.createElement(ey,{key:"SET_VARIABLE_MODE",value:"SET_VARIABLE_MODE",icon:o.createElement(ev,{action:"SET_VARIABLE_MODE"}),recordingKey:v.Pt(e,"set-variable-mode"),disabled:!1}),g=!t&&!e.isNestedInConditional&&o.createElement(ey,{key:"CONDITIONAL",value:"CONDITIONAL",icon:o.createElement(ev,{action:"CONDITIONAL"}),recordingKey:v.Pt(e,"conditional"),disabled:!1}),f=o.createElement(eE.sK,{key:"first-divider"}),y=o.createElement(eE.sK,{key:"second-divider"}),h=o.createElement(eE.sK,{key:"third-divider"}),b=(0,A.GS)()?[n,f,a,i,l,s,c,y,d,p,u,...t?[]:[h],m,_,g]:[n,f,a,i,l,y,m,_,g,s,c,h,d,p,u];if(e.showVideoActions){let t=[o.createElement(eE.sK,{key:"fourth-divider"}),o.createElement(ey,{key:"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS",value:"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS",icon:o.createElement(ev,{action:"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS"}),recordingKey:v.Pt(e,"update-media-play-pause-options"),disabled:!1}),o.createElement(ey,{key:"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS",value:"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS",icon:o.createElement(ev,{action:"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS"}),recordingKey:v.Pt(e,"update-media-mute-unmute-options"),disabled:!1}),o.createElement(ey,{key:"UPDATE_MEDIA_SKIP_TO",value:"UPDATE_MEDIA_SKIP_TO",icon:o.createElement(ev,{action:"UPDATE_MEDIA_SKIP_TO"}),recordingKey:v.Pt(e,"update-media-skip_to"),disabled:!1}),o.createElement(ey,{key:"UPDATE_MEDIA_SKIP_BY_OPTIONS",value:"UPDATE_MEDIA_SKIP_BY_OPTIONS",icon:o.createElement(ev,{action:"UPDATE_MEDIA_SKIP_BY_OPTIONS"}),recordingKey:v.Pt(e,"update-media-skip-by-options"),disabled:!1})];b=b.concat(t)}return b.filter(Boolean)}(e))}var eN=n(983405),eI=n(935283),eT=n(773833),ex=n(736656),eA=n(533573),ew=n(712685),eS=n(912547);let eP="prototype_action_verbose_title--actionNameInsertion--aF4kI",eC="prototype_action_verbose_title--actionName--qWJL3",eO="prototype_action_verbose_title--actionNameUI3--JAYsG",ek=()=>{let e=(0,i.d4)(e=>e.mirror.sceneGraph);return o.useMemo(()=>new eu.cP(e),[e])};function eD({action:e,isNestedInConditional:t,isNarrowPanel:n,onClick:a}){let i=(0,en.YT)()===en.Oz.TWO_COL,s=o.useContext(ex.c),c=i&&s===ex.P.LEFT,d=t||n,p=(0,H.u)((0,C.hS)(e.targetVariable)&&e.targetVariable&&"id"in e.targetVariable?e.targetVariable?.id:void 0),u=(0,C.hS)(e.targetVariable)&&e.targetVariable&&"nodeFieldAlias"in e.targetVariable?(0,eT.aA)(e.targetVariable.nodeFieldAlias.stablePathToNode,e.targetVariable.nodeFieldAlias.indexOrKey):void 0,_=p?.name??u?.name,g=ek(),E=new eu.Z6((0,A.GS)()),f=(0,eu._X)(e),y=(0,C.E7)(f),v=o.createElement(I.U,{svg:(0,eg.Yb)(y)},(0,eg.av)(y)),b=e=>{if(!e.connectionType||(0,C.gl)(e.connectionType))return null;let t=m()({[eC]:!0,[eO]:i}),n=m()({"prototype_action_verbose_title--actionDestination--JZ-gU":!0,"prototype_action_verbose_title--actionDestinationUI3--ZGxbq":i});switch(e.connectionType){case"NONE":case"SET_VARIABLE_MODE":return null;case"INTERNAL_NODE":case"BACK":case"CLOSE":case"UPDATE_MEDIA_RUNTIME":{let a=e.transitionNodeID;if((0,C.gl)(a))return o.createElement("div",{className:t},(0,T.t)("proto.variant_actions.mixed"));if(void 0===a)return null;let i=l.toString(a),r=g.format(i);return o.createElement("div",{className:n},r)}case"URL":{let a=e.connectionURL;if(!a)return null;if((0,C.gl)(a))return o.createElement("div",{className:t},(0,T.t)("proto.variant_actions.mixed"));return o.createElement("div",{className:n},a)}case"SET_VARIABLE":if(!e.targetVariableData||(0,C.gl)(e.targetVariableData))return null;return o.createElement("div",{className:"prototype_action_verbose_title--setVariablePreviewContainer--6omxy"},o.createElement(Z.y3,{targetVariableData:e.targetVariableData,onClick:h.lQ,showVariableThumbnails:!1,isNarrowPanel:d,isInConditional:!0}));case"CONDITIONAL":{if((0,C.gl)(e)||(0,C.gl)(e.conditionalActions)||!e.conditionalActions)return null;let t=e.conditionalActions.length>0?e.conditionalActions[0].condition:void 0;return o.createElement(Z.y3,{targetVariableData:t,onClick:h.lQ,isInConditional:!0,showVariableThumbnails:!1})}default:(0,eI.xb)(e.connectionType)}},N=m()({[eS.Li]:d&&!i,[eS.O8]:!d&&!i,[eS.kE]:i}),x=m()({"prototype_action_verbose_title--iconContainer--jqarD":!0,"prototype_action_verbose_title--iconContainerUI3--yBP0-":i});return o.createElement("div",{className:N,onClick:a,role:"button",tabIndex:0},o.createElement(eN.Y1,{horizontalAlignItems:"space-between",width:"fill-parent"},o.createElement("div",{className:x},v),(e=>{let t=y?E.format(y):"Undefined",n=m()({[eC]:!0,[eO]:i});if((0,C.gl)(e.connectionType)&&(t=(0,T.t)("fullscreen.mixed")),!e.connectionType||(0,C.gl)(e.connectionType)||"NONE"===e.connectionType||"BACK"===e.connectionType||"CLOSE"===e.connectionType)return o.createElement(o.Fragment,null,o.createElement("div",{className:n},t));var a=b(e);switch(e.connectionType){case"INTERNAL_NODE":if("SWAP_STATE"===e.navigationType)return o.createElement(o.Fragment,null,o.createElement("div",{className:n},(0,T.t)("proto.action_change_to")),a);if(a){if("OVERLAY"===e.navigationType)return o.createElement(o.Fragment,null,o.createElement("div",{className:eP},(0,T.tx)("proto.action_overlay_title",{overlayFrameName:o.createElement("span",null,a)})));if("SWAP"===e.navigationType)return o.createElement(o.Fragment,null,o.createElement("div",{className:n},(0,T.t)("proto.action_swap_overlay_title")),a)}return o.createElement(o.Fragment,null,o.createElement("div",{className:n},t),a);case"UPDATE_MEDIA_RUNTIME":return o.createElement(o.Fragment,null,o.createElement("div",{className:n},t),a);case"URL":return o.createElement(o.Fragment,null,o.createElement("div",{className:n},a?(0,T.t)("proto.action_url_title"):(0,T.t)("proto.action_open_link")),a);case"SET_VARIABLE":{let l=e.targetVariableData&&(0,C.hS)(e.targetVariableData)&&e.targetVariableData.resolvedType===r.rXF.COLOR,s=m()({"prototype_action_verbose_title--actionNameInsertionColor--isir- prototype_action_verbose_title--actionNameInsertion--aF4kI":!0,"prototype_action_verbose_title--actionNameInsertionColorUI3--Apj0i":i});if(_&&a)return o.createElement(o.Fragment,null,o.createElement("div",{className:l?s:eP},(0,T.tx)("proto.action_set_variable_title",{variableName:o.createElement("span",{className:"prototype_action_verbose_title--variableNameContainer--XeJX2"},o.createElement(ew.w,{text:_,isDeleted:!!p&&(0,eA.eF)(p),disableHover:c})),variableValue:o.createElement("span",{className:"prototype_action_verbose_title--variableDestinationContainer--RXbKo prototype_action_verbose_title--variableNameContainer--XeJX2"},a)})));return o.createElement(o.Fragment,null,o.createElement("div",{className:n},t))}case"SET_VARIABLE_MODE":return o.createElement(o.Fragment,null,o.createElement("div",{className:n},(0,T.t)("proto.action_set_variable_mode")));case"CONDITIONAL":return o.createElement(o.Fragment,null,o.createElement("div",{className:n},i?(0,T.t)("proto.if"):(0,T.t)("proto.action_conditional_title")),a);default:(0,eI.xb)(e.connectionType)}})(e)))}var eL=n(914006),eM=n(574310),eR=n(789529),eV=n.n(eR),eU=n(636149),eK=n.n(eU),eF=n(675551),eB=n.n(eF),eW=n(184058),eG=n.n(eW),ez=n(776621),eH=n(154483),eY=n(994481),eq=n(564092),eJ=n(100039);let eX="prototype_set_variable_mode_controls--dropdownRow--vl5z4",e$="missing";class ej extends eE.l6{}class eZ extends eE.c${}class eQ extends eE.l6{}class e0 extends eE.c${}let e1={},e2=(0,eH.fv)();function e3(){let e=(0,H.h6)()||e1,t=(0,eq.iR)(),n=o.useMemo(()=>{let n=eB()(t,(e,t)=>({collectionID:e.node_id,collectionName:e.name,key:e.key,modeOptions:e.modes?.map(t=>({modeId:{guid:t.id,collectionKey:e.key},name:t.name,isCompatible:!0}))||[],explicitMode:null,inheritMode:null,fileKey:e2(e)}));return eV()({},e,n)},[t,e]),a=o.useMemo(()=>Object.entries(n).map(([e,t])=>({setKey:e,modeData:t,isLocal:void 0===t.fileKey})),[n]),l=o.useMemo(()=>Object.values(a).filter(e=>e.modeData?.modeOptions&&e.modeData?.modeOptions.length>1),[a]),s=o.useMemo(()=>eG()(l.map(e=>e.modeData.fileKey??eJ.BH)),[l]),c=(0,H.el)(s),[d,p]=o.useMemo(()=>{let{_local:e,_unknownFile:t,...n}=eK()(l,e=>e.isLocal?"_local":e.modeData.fileKey&&void 0===c[e.modeData.fileKey]?"_unknownFile":e.modeData.fileKey),a=Object.entries(n).sort(([e],[t])=>e.localeCompare(t)).map(([e,t])=>[{fileKey:e,fileName:c[e]},...t]).flat(1);return t&&(a.push({fileKey:eJ.BH,fileName:(0,T.t)("variables.mode_properties_panel.used_variables.subheading")}),a.push(...t)),[e??[],a]},[c,l]),u=(0,eq.d2)(),m=o.useCallback(e=>{let t=u[(0,eM.VariableCollectionKey)(e)],n=l.find(t=>t.setKey===e);if(n)return(e=>{if(e)return void 0===t&&(t=e.modeData.modeOptions[0].modeId.guid),e.modeData.modeOptions.find(e=>e.modeId.guid!==t&&(t=e.modeId.guid,!0))?.modeId.guid})(n)},[u,l]),_=l.length>0?l[0]:void 0,g=_?.setKey,E=_?.modeData.collectionID,f=o.useMemo(()=>g&&m(g),[g,m]),y=(0,i.wA)();return{localVariableSets:d,allVariableSets:l,firstVariableSet:_,firstVariableSetID:E,firstVariableSetMode:f,getDefaultNewModeForVariableCollectionKey:m,reportAnalyticsEventWhenSelected:e=>{let t=r.mSn.getVariableSetInfoForSetModeAnalytics(e);y((0,L.Zh)({name:"prototype.set_mode_select_variable_set",params:{...t}}))},subscribedVariableSetsWithSections:p}}function e4({targetVariableSetID:e,targetVariableModeID:t,deprecatedTargetVariableSetKey:n,updateSelectionProperties:a,recordingKey:i,actionIndexPath:r}){let{getDefaultNewModeForVariableCollectionKey:l,allVariableSets:s,reportAnalyticsEventWhenSelected:c}=e3(),{shouldShowAdvancedPrototypingPaywall:d,showAdvancedPrototypingVariablesModal:p}=(0,en.zt)(),u=(0,A.GS)();o.useEffect(()=>{if(!n||(0,C.gl)(n))return;let e=s.find(e=>e.setKey===n);e?((0,ez.Lo)("SetVariableModeControls","updating variable set key to non-deprecated id value"),a({targetVariableSetKey:void 0,targetVariableSetID:e?.modeData.collectionID})):((0,ez.Lo)("SetVariableModeControls","attempted to update variable set key to non-deprecated id value, but could not find it in the list of variable sets, will just clear out the bad data."),a({targetVariableSetKey:void 0}))},[n,s,a]);let[m,_]=o.useMemo(()=>{let t=(0,C.gl)(e)||void 0===e?e:function(e,t){let n=e.find(e=>e.modeData.collectionID===t);if(n)return n;let a=eL.VariableCollectionId.toRefIfSubscribed(t);if(a)return e.find(e=>e.setKey===a.key)}(s,e)||e$,n=(()=>{if(!(0,C.gl)(t)&&void 0!==t&&t!==e$)return t})();return[t,n]},[e,s]),g=o.createElement(e7,{selectedVariableSet:m,onChange:e=>{d?p():(c(e.modeData.collectionID),a({targetVariableSetID:e.modeData.collectionID,targetVariableModeID:l(e.setKey)}))},actionIndexPath:r}),E=u?o.createElement(eY.cS,{input:g,label:(0,T.tx)("proto.set_variable_mode.collection_label")}):o.createElement(U.fI,{recordingKey:v.Pt(i,"selectTargetVariableSet")},g),f=o.createElement(te,{selectedVariableSetKey:_&&_.setKey,selectedVariableModeID:t,onChange:e=>{d?p():a({targetVariableModeID:e})},actionIndexPath:r}),y=u?o.createElement(eY.cS,{input:f,label:(0,T.tx)("proto.set_variable_mode.mode_label")}):o.createElement(U.fI,{recordingKey:v.Pt(i,"selectTargetVariableMode")},f);return o.createElement("div",{className:u?void 0:er.cx.relative.$},E,_&&y)}let e6={format:e=>void 0===e?(0,T.t)("proto.prototype_panel.edit_set_mode.none"):e===e$?(0,T.t)("proto.prototype_panel.edit_set_mode.missing_collection"):e.modeData.collectionName,isEqual:(e,t)=>void 0!==e&&void 0!==t&&e!==e$&&t!==e$&&(e.setKey===t.setKey||e.modeData.collectionID===t.modeData.collectionID)};function e5(e,t){return"fileKey"in e?[t&&o.createElement(eE.sK,{key:e.fileKey+"divider"}),o.createElement(eZ,{isHeader:!0,key:e.fileKey+"header",formattedValue:e.fileName})]:o.createElement(eZ,{key:e.setKey,value:e})}function e7({selectedVariableSet:e,onChange:t,actionIndexPath:n}){let a=(0,i.wA)(),r=(0,em.Um)(),l="set-variable-mode--select-variable-set-"+n,{localVariableSets:s,allVariableSets:c,subscribedVariableSetsWithSections:d}=e3();return o.createElement(ej,{id:l,className:eX,property:e,formatter:e6,dispatch:a,dropdownShown:r?.type===l?r:null,onChange:e=>{(0,C.gl)(e)||void 0===e||e===e$||t(e)}},c.length>0?[s.length>0&&o.createElement(eZ,{key:v.Pt(l,"local_variables"),isHeader:!0,formattedValue:(0,T.t)("variables.mode_properties_panel.local_variables.subheading")}),...s.map(e=>e5(e,!1)),...d.map((e,t)=>e5(e,s.length>0||t>0))]:[])}let e8={format:e=>void 0===e?(0,T.t)("proto.prototype_panel.edit_set_mode.none"):e===e$?(0,T.t)("proto.prototype_panel.edit_set_mode.missing_mode"):e?.name??""};function e9(e){return o.createElement(e0,{key:e.modeId.guid,value:e})}function te({selectedVariableSetKey:e,selectedVariableModeID:t,onChange:n,actionIndexPath:a}){let r=(0,i.wA)(),l=(0,em.Um)(),s="set-variable-mode--select-variable-mode-"+a,{allVariableSets:c}=e3(),d=o.useMemo(()=>c.find(t=>t.setKey===e)?.modeData.modeOptions,[e,c]),p=o.useMemo(()=>(0,C.gl)(t)||void 0===t?t:d?.find(e=>e.modeId.guid===t)||e$,[t,d]);return o.createElement(eQ,{id:s,className:eX,property:p,formatter:e8,dispatch:r,dropdownShown:l?.type===s?l:null,onChange:e=>{!e||(0,C.gl)(e)||e===e$||n(e.modeId.guid)}},d&&d?.map(e9))}var tt=n(939791),tn=n(794272),ta=n(32067),to=n(109388),ti=n(485463),tr=n(256296),tl=n(775664),ts=n(279702),tc=n(420186),td=n(218973),tp=n(750029),tu=n(251518),tm=n(205135),t_=n(410465),tg=n(860168),tE=n(910392),tf=n(909666),ty=n(442458);let th=tl.TI;function tv({children:e}){return(0,A.GS)()?o.createElement(eY.TN,null,e):o.createElement(U.fI,{className:"overlay_panel--fplCheckboxRow--EYTAZ checkbox--_checkboxRow--oEhow"},e)}function tb({interactionType:e,recordingKey:t,actionIndexPath:n,nodeId:a}){let[s,c]=o.useState(!1),[d,p]=o.useState(new b.Mi),u=(0,i.wA)(),m=(0,A.GS)(),_="{ "+n.join(", ")+" }",{destinationOverlayBackgroundColor:g,destinationOverlayBackgroundType:E,destinationOverlayPositionType:f,destinationOverlayBackgroundInteraction:y}=(0,tn.R)(e=>({destinationOverlayBackgroundColor:e.mirror.selectionProperties.actionIndexPathToOverlaySettings?.[_]?.destinationOverlayBackgroundColor,destinationOverlayBackgroundType:e.mirror.selectionProperties.actionIndexPathToOverlaySettings?.[_]?.destinationOverlayBackgroundType,destinationOverlayPositionType:e.mirror.selectionProperties.actionIndexPathToOverlaySettings?.[_]?.destinationOverlayPositionType,destinationOverlayBackgroundInteraction:e.mirror.selectionProperties.actionIndexPathToOverlaySettings?.[_]?.destinationOverlayBackgroundInteraction})),h=o.useRef(),N=o.useRef(),I=o.useCallback(()=>{c(!1)},[c]),x=o.useCallback(()=>{if(s)I();else{c(!0);let e=m?to.findDOMNode(N.current):to.findDOMNode(h.current);p((0,tc.cn)(e))}},[s,I,m]),w=o.useCallback(e=>{let t=e?"SOLID_COLOR":"NONE";P.l7.user("overlay-background-type-edit-scope",()=>{r.X3B.setOverlayBackgroundType(l.toString(a),t)}),u((0,L._P)({name:"Overlay background visible changed",params:{backgroundType:t}}))},[u,a]),S=o.useCallback(e=>{let t=e?"CLOSE_ON_CLICK_OUTSIDE":"NONE";P.l7.user("overlay-background-interaction-edit-scope",()=>{r.X3B.setOverlayBackgroundInteraction(l.toString(a),t)}),u((0,L._P)({name:"Overlay background interaction changed",params:{backgroundInteraction:t}}))},[u,a]),O=o.useCallback(()=>(0,C._W)(g,{r:0,g:0,b:0,a:.25}),[g]),k=o.useCallback((e,t)=>{t!==ts.zk.NO&&P.l7.user("overlay-background-color-edit-scope",()=>{r.X3B.setOverlayBackgroundColor(l.toString(a),e)})},[a]),D=o.useCallback((e,t)=>{k(e,ts.zk.YES)},[k]),M=o.useCallback((e,t)=>{let n=O();k({r:n.r,g:n.g,b:n.b,a:e},t)},[O,k]),R=o.useCallback(e=>{P.l7.user("overlay-position-type-edit-scope",()=>{r.X3B.setOverlayPositionType(l.toString(a),e)}),u((0,L._P)({name:"Overlay position changed",params:{position:e}}))},[u,a]),V=O(),K=O().a,F=(0,C.E7)(f),B="CLOSE_ON_CLICK_OUTSIDE"===(0,C.E7)(y),W="SOLID_COLOR"===(0,C.E7)(E),G=o.createElement("div",{className:"overlay_panel--colorValueContainer--gJtb9 paint_panels--colorValueContainer--DGeSP raw_components--borderFocusWithin--BaipZ paint_panels--_baseColorValueContainer--t-UIV raw_components--base--T7G0z raw_components--singleRowHeight--dKM4t"},o.createElement(tp.J,{onClick:W?x:()=>{},color:V,opacity:K,recordingKey:v.Pt(t,"chit"),className:"overlay_panel--chit--Zn66r paint_panels--chit--twQEy"}),o.createElement(tm.AN,{className:m?"overlay_panel--colorInputUI3--ozOrK paint_panels--colorInput--nSz13":"overlay_panel--colorInput--6yyym paint_panels--colorInput--nSz13",noLeftBorder:!0,formatter:th,property:V,disabled:!W,onChange:D,recordingKey:v.Pt(t,"colorInput"),noBorderOnFocus:!0}),o.createElement(td.Pd,{className:"overlay_panel--opacity--vrrjV paint_panels--opacityInputContainer--oqlsk",value:K,onValueChange:M,dispatch:u,disabled:!W,noBorderOnFocus:!0,recordingKey:v.Pt(t,"opacity")}));return o.createElement(U.Zk,{className:m?"overlay_panel--overlayPanelUI3--GLqgD":"overlay_panel--overlayPanel--l-Hts"},!m&&o.createElement(U.fI,null,o.createElement(U.xw,{faded:!0,className:"overlay_panel--overlayPanelTitle--e9pjs"},(0,T.tx)("proto.overlay_settings"))),o.createElement(tS,{overlayPositionType:F,onOverlayPositionTypeChange:R,recordingKey:t}),!("ON_HOVER"===e||"ON_PRESS"===e)&&o.createElement(tv,null,o.createElement(ti.S,{label:o.createElement(tr.J,null,(0,T.tx)("proto.close_when_clicking_outside")),recordingKey:v.Pt(t,"closeOnClickOutside"),onChange:S,checked:B})),o.createElement(tv,null,o.createElement(ti.S,{label:o.createElement(tr.J,null,m?(0,T.tx)("proto.overlay_panel.background"):(0,T.tx)("proto.add_background")),recordingKey:v.Pt(t,"addBackgroundBehindOverlay"),onChange:w,checked:W})),W&&(m?o.createElement(eY.cS,{ref:N,label:(0,T.tx)("proto.overlay_panel.background"),input:G}):o.createElement(U.fI,{ref:h}," ",G," ")),s&&o.createElement(tu.sk,{disabledVariableIds:new Set,title:(0,T.t)("proto.background"),initialPosition:d,color:V,boundVariable:null,onChange:k,onClose:I,recordingKey:v.Pt(t,"colorPicker")}))}class tN extends eE.l6{}class tI extends eE.c${}class tT extends o.PureComponent{constructor(){super(...arguments),this.titleFormatter=new eu.Cr,this.renderOverlayPositionOption=(e,t)=>o.createElement(tI,{key:t,value:e,recordingKey:v.Pt(this.props,e)})}render(){let e=["CENTER","TOP_LEFT","TOP_CENTER","TOP_RIGHT","BOTTOM_LEFT","BOTTOM_CENTER","BOTTOM_RIGHT"].map(this.renderOverlayPositionOption);return o.createElement(tN,{id:this.props.recordingKey??"overlay-position_select",className:this.props.className,chevronClassName:"overlay_panel--chevron--7RTA-",inputClassName:"overlay_panel--input--tGHHB",dropdownWidth:tg.DxS,property:this.props.property,formatter:this.titleFormatter,onChange:this.props.onChange,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,recordingKey:v.Pt(this.props,"select")},e,o.createElement(eE.sK,null),this.renderOverlayPositionOption("MANUAL",10))}}tT.displayName="OverlayPositionDropdown";class tx extends t_.I{}class tA extends t_.Y{}class tw extends o.PureComponent{render(){return o.createElement(tx,{className:this.props.className,property:this.props.property,onChange:this.props.onChange,recordingKey:this.props.recordingKey},o.createElement(tA,{value:"CENTER",tooltip:(0,T.t)("proto.tooltip_overlay_position_center"),svg:tf.A,recordingKey:v.Pt(this.props,"center")}),o.createElement(tA,{value:"TOP_LEFT",tooltip:(0,T.t)("proto.tooltip_overlay_position_top_left"),svg:ty.A,recordingKey:v.Pt(this.props,"top-left")}),o.createElement(tA,{value:"BOTTOM_CENTER",tooltip:(0,T.t)("proto.tooltip_overlay_position_bottom_center"),svg:tE.A,recordingKey:v.Pt(this.props,"bottom-center")}))}}function tS({overlayPositionType:e,onOverlayPositionTypeChange:t,recordingKey:n}){let a=(0,A.GS)(),r=(0,i.wA)(),l=(0,em.Um)(),s=o.createElement(tT,{className:"overlay_panel--overlayPositionDropdown--ZxxSI",property:e,dispatch:r,dropdownShown:l,onChange:t,recordingKey:v.Pt(n,"overlayPositionDropdown")}),c=o.createElement(tw,{property:e,onChange:t,recordingKey:v.Pt(n,"overlayPositionControl"),className:"overlay_panel--overlayPositionControl--SWngJ"});return a?o.createElement(eY.cS,{label:(0,T.tx)("proto.overlay_panel.position"),input:s}):o.createElement(U.fI,null,s,c)}var tP=n(149658),tC=n(301036),tO=n(927457),tk=n(268537),tD=n(720488),tL=n(501191);function tM(e){let t=`interaction-panel-create-action-${e.recordingKey}`;var{showing:n,toggle:a,hide:i}=(0,em.BK)(t);let r=(0,o.useRef)(null),l=e.recordingKey,{shouldShowAdvancedPrototypingPaywall:s,showAdvancedPrototypinglMultipleActionsModal:c}=(0,en.zt)(),d=(0,o.useCallback)(()=>{!e.skipPaywall&&s?c():a()},[e.skipPaywall,s,c,a]),p=v.rf(v.Pt(l,"createActionDropdown"),"click",d),u=(0,en.YT)()===en.Oz.TWO_COL,_=(0,en.SJ)(),g=(0,en.qv)(_,e.isNestedInConditional),E=m()({[eS.x1]:e.renderButton,[eS.xm]:!e.renderButton&&!u,[eS.U3]:!e.renderButton&&u});return o.createElement(o.Fragment,null,o.createElement("button",{ref:r,className:E,onClick:p,"aria-label":(0,T.t)("proto.prototype_panel.create_action_button"),"data-tooltip-type":R.Ib.TEXT,"data-tooltip":e.isNestedInConditional?(0,T.t)("proto.prototype_panel.add_nested_action"):(0,T.t)("proto.prototype_panel.add")},e.renderButton?o.createElement(I.U,{svg:tL.A},o.createElement(tO.e,null)):(0,T.tx)("fullscreen.properties_panel.click_plus_to_add_new_action")),n&&r.current&&o.createElement(tD.Cf,{arrowOffsetFromRectLeft:17,leanPadding:0,minWidth:130,lean:"right",targetRect:r.current.getBoundingClientRect(),hidePointWhenContentOffScreen:!0},g.map((t,n)=>(0,en.vc)(t)?o.createElement(tk.wv,{key:`type_${n}`}):o.createElement(tR,{onClose:i,addButtonPressed:e.addButtonPressed,key:t,recordingKey:l,actionType:t}))))}function tR({actionType:e,onClose:t,addButtonPressed:n,recordingKey:a}){let i=o.useCallback(()=>{n((0,en.Bs)(e)),t()},[t,e,n]),r=v.rf(v.Pt(a,"createActionOption",e),"click",i),l=(0,A.GS)(),s=(0,eg.Yb)(e),c=(0,eg.av)(e),d=new eu.Z6(l),p=e?d.format(e):"Undefined";return o.createElement(tk.c$,{className:eS.BP,onClick:r},o.createElement(I.U,{className:eS.QE,svg:s},c),o.createElement("div",{"aria-label":p},p))}let tV="prototype_conditional_controls--conditionalRowUI3--rQlu6",tU="prototype_conditional_controls--conditionIcon--Npk57";var tK=n(381809),tF=n(527967),tB=n(5068);function tW({onDeleteAction:e,updateMultipleDestinationNodes:t,updateSelectionProperties:n,updateCondition:a,updateActions:i,onAddAction:l,autoOpenVariablePicker:s,isSelected:c,handleMouseDownUI3:d,...p}){let u=p.conditionalActions,m=u?.actions?u?.actions:[],_=u?.condition?u?.condition:void 0,g=(0,en.YT)()===en.Oz.TWO_COL,E=g?tV:"prototype_conditional_controls--conditionalRowIf--25FqB prototype_conditional_controls--conditionalRow--u0PaS",f=o.createElement(Z.KN,{resolvedType:r.rXF.BOOLEAN,targetVariableData:_,updateSelectionProperties:n,recordingKey:p.recordingKey,updateConditionInConditionalAction:a,showVariableThumbnails:!0,isNarrowPanel:!0}),y=o.createElement("div",{className:"prototype_conditional_controls--addButton--vlYLn"},o.createElement(tM,{addButtonPressed:l,recordingKey:v.Pt(p.recordingKey,"addActionToIfButton"),renderButton:!0,isNestedInConditional:!0})),h=o.createElement(o.Fragment,null,g?o.createElement("span",{className:"prototype_conditional_controls--conditionIconUI3--zcwx0"},(0,T.tx)("proto.else")):o.createElement(ei.B,{className:tU,svg:tK.A}),m.length>0&&o.createElement("div",{className:"prototype_conditional_controls--addButtonForElse--ogBWu prototype_conditional_controls--addButton--vlYLn"},o.createElement(tM,{addButtonPressed:l,recordingKey:v.Pt(p.recordingKey,"addActionToElseButton"),renderButton:!g,isNestedInConditional:!0}))),b=g?o.createElement("div",{className:"prototype_conditional_controls--elseBlockRowUI3--VXjmO",onMouseDown:d},h):o.createElement(U.fI,{className:g?tV:"prototype_conditional_controls--conditionalRow--u0PaS"},h);return o.createElement(o.Fragment,null,p.ifStatement&&o.createElement("div",{className:E},!g&&o.createElement(eo.Y,{direction:"horizontal",spacing:4},o.createElement("span",{className:g?"prototype_conditional_controls--conditionalRowConditionUI3--M2mOx":"prototype_conditional_controls--conditionalRowCondition--kn-f7"},o.createElement(eo.Y,{direction:"horizontal",spacing:0},o.createElement(ei.B,{className:tU,svg:tF.A}),o.createElement(eo.Y,{direction:"horizontal",spacing:0},(0,C.hS)(_)&&f),o.createElement(ei.B,{className:"prototype_conditional_controls--icon--JV1i0",svg:tB.default}))),m.length>0&&y)),!p.ifStatement&&b,m&&m.map((a,i)=>o.createElement(nV,{key:i,updateMultipleDestinationNodes:t.appendActionIndex(i),action:a,recordingKey:v.Pt(p.recordingKey,"conditional-action-row",i),updateSelectionProperties:n.appendActionIndex(i),onDeleteAction:()=>e(i),interactionType:p.interactionType,actionIndexPath:[p.actionIndexPath[0],p.actionIndexPath[1],i],numActions:m.length,isNestedInConditional:!0,stateManagementVersion:p.stateManagementVersion,selectedInteractions:p.selectedInteractions,onDrop:p.onDrop,onSelect:p.onSelect,onExpand:p.onExpand,onAddAction:l,selectedActionIndex:p.selectedActionIndex,expandedRows:p.expandedRows,autoOpenVariablePicker:s})),0===m.length&&o.createElement(nV,{key:0,updateMultipleDestinationNodes:t.appendActionIndex(0),action:p.emptyAction,recordingKey:v.Pt(p.recordingKey,"conditional-action-row",0),updateSelectionProperties:n.appendActionIndex(0),onDeleteAction:()=>e(0),interactionType:p.interactionType,actionIndexPath:[p.actionIndexPath[0],p.actionIndexPath[1],0],numActions:m.length,isNestedInConditional:!0,stateManagementVersion:p.stateManagementVersion,selectedInteractions:p.selectedInteractions,onDrop:p.onDrop,onSelect:p.onSelect,onExpand:p.onExpand,onAddAction:l,selectedActionIndex:p.selectedActionIndex,expandedRows:p.expandedRows,autoOpenVariablePicker:s}))}function tG(e,t,n){return function(a){var o=[...t];o.length>e?o[e].condition=a:o.push({condition:0===e?a:void 0,actions:[]},{condition:1===e?a:void 0,actions:[]}),n({conditionalActions:o})}}function tz({onDrop:e,onSelect:t,onExpand:n,action:a,updateMultipleDestinationNodes:r,updateSelectionProperties:l,interactionType:s,recordingKey:c,stateManagementVersion:d,selectedInteractions:p,actionIndexPath:u,selectedActionIndex:m,expandedRows:_,autoOpenVariablePicker:g,onNewActionAdded:E,handleMouseDownUI3:f}){let y=(0,i.wA)(),h=(0,k.p8)("currentPage"),b=(0,en.YT)()===en.Oz.TWO_COL,N=b?m.equals(u):void 0,{shouldShowAdvancedPrototypingPaywall:I,showAdvancedPrototypingConditionalActionsModal:x}=(0,en.zt)(),A=(0,C.hS)(a.conditionalActions)&&a.conditionalActions?a.conditionalActions:[],w=e=>function(t){var n=[...A];n.length>e?n[e].actions=[...t]:n.push({actions:t}),l({conditionalActions:n})},S=e=>function(t){var n=[...A],a=0;if(n.length>e){var o=n[e].actions;o?o.push(t):o=[t],a=o.length}else n.push({actions:0===e?[t]:[]},{actions:1===e?[t]:[]}),a=1;"SET_VARIABLE"===t.connectionType&&(g.current=!0),l({conditionalActions:n}),E&&E(new tC.Op([u[0],e,a-1])),y((0,L._P)({name:"Prototype add action",params:{action:t.connectionType?t.connectionType:"NONE",source:"panel",page_id:h,actionInConditionalAction:!0}}))},P=e=>function(t){if(I)x();else{var n=[...A];let a=A[e],o=[];if(a&&a.actions)for(let e=0;e<a.actions.length;e++){let n=a.actions[e];e!==t?o.push(n):y((0,L._P)({name:"Prototype delete action",params:{action:n.connectionType?n.connectionType:"NONE",source:"panel",page_id:h,actionInConditionalAction:!0}}))}n[e].actions=o,l({conditionalActions:n})}},O=A.length>0?A[0]:void 0,D=A.length>1?A[1]:void 0;return o.createElement("div",{style:b?{position:"relative"}:void 0},(0,C.gl)(a.conditionalActions)&&o.createElement(eN.Y1,null,o.createElement("div",{className:"prototype_conditional_controls--mixedConditionalText--6O32b",onClick:()=>{var e=[];e.push({},{}),l({conditionalActions:e})},role:"button",tabIndex:0},(0,T.t)("fullscreen.properties_panel.click_to_replace_mixed_content"))),(0,C.hS)(a.conditionalActions)&&o.createElement(o.Fragment,null,o.createElement(tW,{key:0,conditionalActions:O,recordingKey:v.Pt(c,"conditional-block",0),updateCondition:tG(0,A,l),updateActions:w(0),onAddAction:S(0),updateMultipleDestinationNodes:r.appendActionIndex(0),onDeleteAction:P(0),interactionType:s,updateSelectionProperties:l.appendActionIndex(0),ifStatement:!0,stateManagementVersion:d,selectedInteractions:p,actionIndexPath:[u[0],0],onDrop:e,onSelect:t,onExpand:n,selectedActionIndex:m,autoOpenVariablePicker:g,expandedRows:_,emptyAction:{ifStatement:!0,action:a},isSelected:N,handleMouseDownUI3:f}),o.createElement(tW,{key:1,conditionalActions:D,recordingKey:v.Pt(c,"conditional-block",1),updateCondition:tG(1,A,l),updateActions:w(1),onAddAction:S(1),updateMultipleDestinationNodes:r.appendActionIndex(1),onDeleteAction:P(1),interactionType:s,updateSelectionProperties:l.appendActionIndex(1),ifStatement:!1,stateManagementVersion:d,selectedInteractions:p,actionIndexPath:[u[0],1],onDrop:e,onSelect:t,onExpand:n,selectedActionIndex:m,autoOpenVariablePicker:g,expandedRows:_,emptyAction:{ifStatement:!1,action:a},isSelected:N,handleMouseDownUI3:f})))}function tH({updateSelectionProperties:e,conditionalActions:t,autoOpenExpressionBuilder:n,setAutoOpenExpressionBuilder:a,...i}){let l=t.length>0?t[0]:void 0,s=l?.condition?l?.condition:void 0,c=m()({"prototype_conditional_controls--standaloneIfConditional--GLFDU":!0,"prototype_conditional_controls--placeholderText--esG0u":!s});return o.createElement(o.Fragment,null,o.createElement(eY.cS,{input:null,label:(0,T.tx)("proto.condition")}),o.createElement(tt.Ad,{appendedClassName:"prototype_conditional_controls--conditionalActionRightPadding--xpK6Z",label:null,input:(0,C.hS)(s)?o.createElement("div",{className:c},o.createElement(Z.KN,{resolvedType:r.rXF.BOOLEAN,targetVariableData:s,updateSelectionProperties:e.appendActionIndex(0),recordingKey:i.recordingKey,updateConditionInConditionalAction:tG(0,t,e),autoOpenExpressionBuilder:n,setAutoOpenExpressionBuilder:a,showVariableThumbnails:!0,isNarrowPanel:!0})):null}))}var tY=n(843495),tq=n(497306),tJ=n(809511),tX=n(234945),t$=n(510879),tj=n(830002),tZ=n(731262);class tQ extends eE.c${}class t0 extends eE.l6{}class t1 extends o.PureComponent{constructor(e){super(e),this.loadDestinationsFromFullscreen=()=>{let e=r.baT.ALL;"SCROLL_TO"===this.props.action?e=r.baT.SCROLL_TO:"SWAP_STATE_TO"===this.props.action&&(e=r.baT.STATES);let{viableIds:t,disabledIds:n}=r.X3B.getTransitionDestinationsOnActiveCanvas(e);return new Promise((e,a)=>{this.setState({viableIds:t,disabledIds:n},e)})},this.onOptionFocus=e=>{tY.Uc(e??"")},this.renderGroupedScrollableNodes=(e,t)=>{let n=eK()(e.filter(e=>this.nodeNameFormatter.hasNameForNode(e)),e=>e===t&&(0,C.hS)(t)?tq.Ql(this.props.scene,e)?.guid:this.props.scene.get(e)?.parentGuid),a=Object.keys(n);(0,tq.X4)(a,this.nodeNameFormatter.format.bind(this.nodeNameFormatter));let{tlfId:i,index:r}=(0,tq.H_)(this.props.scene,a);return i&&r&&(a.splice(r,1),a=[i,...a]),a.reduce((e,t,a)=>(0!==a&&e.push(o.createElement(eE.sK,{key:a})),e.push(o.createElement(tQ,{key:`disabled-${t}`,value:t+" ",recordingKey:v.Pt(this.props,`disabled-option-${t}`),disabled:!0})),n[t].forEach((t,n)=>{e.push(o.createElement(tQ,{key:`enabled-${t+n}`,value:t,recordingKey:v.Pt(this.props,`viable-option-${n}`),disabled:!1}))}),e),[])},this.state={viableIds:[],disabledIds:[]},this.nodeNameFormatter=new eu.cP(e.scene)}render(){let e=this.props.nodeId===C.oV?C.oV:l.toString(this.props.nodeId),t=this.state.viableIds;(0,C.hS)(e)&&e!==l.invalidGUIDStr&&-1===t.indexOf(e)&&(t=t.concat([e]));let n=this.state.disabledIds,a=`prototype-destination-select-${this.props.recordingKey}`,i="SCROLL_TO"!==this.props.action?t.filter(e=>this.nodeNameFormatter.hasNameForNode(e)).map((e,t)=>o.createElement(tQ,{key:`enabled-${e}`,value:e,recordingKey:v.Pt(this.props,`viable-option-${t}`),disabled:!1})):this.renderGroupedScrollableNodes(t,e),r=n.filter(e=>this.nodeNameFormatter.hasNameForNode(e)).map((e,t)=>o.createElement(tQ,{key:`disabled-${e}`,value:e,recordingKey:v.Pt(this.props,`disabled-option-${t}`),disabled:!0})),s=this.props.isUI3?o.Fragment:U.fI;return o.createElement(s,null,o.createElement(t0,{id:a,dataTestId:"destination-select",className:this.props.className,chevronClassName:"prototype_destination_dropdown--chevron--pmWtI",inputClassName:"prototype_destination_dropdown--input--rzglN",dropdownWidth:tg.DxS,property:e,formatter:this.nodeNameFormatter,onChange:this.props.onChange,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,recordingKey:v.Pt(this.props,"select"),willShowDropdown:this.loadDestinationsFromFullscreen,onOptionFocus:this.onOptionFocus,hideDropdownWhenContainerMoves:!(0,e_.nl)()},i,0!==n.length&&0!==t.length&&o.createElement(eE.sK,null),r))}}let t2=o.memo(function(e){let t=(0,D.tS)(),n=(0,D._G)(),a=(0,i.d4)(t3),r=(0,i.d4)(tX.qd),l=(0,i.d4)(tX.dK),s=(0,t$.D)(r,l),c=(0,i.d4)(t4),d=o.useMemo(()=>(0,tZ.cP)(c,t,n,e.actionIndexPath),[c,t,n,e.actionIndexPath]),p=o.useMemo(()=>(0,tZ.cP)(a,t,n),[a,t,n]),u=d||p;if(!u||u.mode!==tJ.iCO.STATE_OR_STATE_INSTANCE_SUBLAYER)return null;let{allStates:m,stateGroupModel:_,selectedStates:g,selectedStatesPropertyValues:E}=u,f=_.propertySortOrder||[],y=_.propertyValues;return y?o.createElement(tj.lS,{sortedProperties:f,stateGroupPropertyValues:y,selectedStatesPropertyValues:E,selectedStates:g,allStates:m,onSelectProperty:t=>{let n={};for(let e of Object.keys(t)){let a=t[e].symbol.node_id;for(let t of(n[e]=a,s[e]||[]))n[t]=a;for(let e of r)n[e]||(n[e]=a)}e.onChange(n)},recordingKey:e.recordingKey,hideErrorsPanel:!0,shouldIndent:!0,extended:!0}):null});function t3(e){return e.mirror.selectionProperties.stateGroupSelectionInfo}function t4(e){return e.mirror.selectionProperties.prototypeDestinationStateGroupSelectionInfo}var t6=n(169231),t5=n(100197),t7=n(511787),t8=n(939143),t9=n(656963),ne=n(746806);let nt="prototype_set_variable_controls--dropdownAndIconContainer--6m3Tw",nn="prototype_set_variable_controls--icon---HzDt",na="prototype_set_variable_controls--placeholderText--PBIqf";function no({targetVariableData:e,targetVariable:t,updateSelectionProperties:n,autoOpenVariablePicker:a,...s}){let c=o.useRef(null),d=(0,i.wA)(),p=(0,A.GS)(),u=(0,i.d4)(e=>e.variablePickerShown),_=(0,H.tZ)((0,C.hS)(t)&&"id"in t?t.id:void 0),g=(0,H.u)((0,C.hS)(t)&&"id"in t?t.id:void 0),[f,y]=o.useState("");(0,et.h)(()=>{a&&!0===a.current&&(I(),a.current=!1)});let N=(0,H.BQ)((0,C.hS)(t)&&"id"in t?t.id:void 0)??(0,eT.m9)((0,C.hS)(t)&&"nodeFieldAlias"in t?t.nodeFieldAlias:void 0);o.useEffect(()=>{void 0!==e&&N&&"MIXED"!==N&&(0,C.hS)(e)&&e.resolvedType!==N.resolvedType&&!((0,eT.tz)(e.resolvedType)&&(0,eT.tz)(N.resolvedType))&&n({targetVariableData:void 0})},[N,n,e]);let I=()=>{let e=c.current.getBoundingClientRect();d((0,t6.C)({type:"variable-picker-set-variable-action",isShown:!0,resolvedType:r.rXF.STRING,initialPosition:new b.Mi(e.left-20,e.top),key:s.recordingKey,onVariableSelected:P}))},x=o.useCallback(()=>{d((0,t6.B)())},[d]),[w,S]=o.useState(!1),P=o.useCallback(t=>{if(void 0!==t&&t.node_id){let a={targetVariable:{id:t.node_id}},o=r.CWU.getVariableResolvedValue(t.node_id,l.invalidGUIDStr);!e&&t.resolvedType===r.rXF.COLOR&&o&&(a.targetVariableData=o??void 0),n(a),d((0,L.Zh)({name:"prototype.variable_selected",params:{collectionId:t.variableSetId,variableId:t.node_id,variableType:t.resolvedType}})),S(!0)}},[d,e,n]),O=o.useCallback(e=>{e.value.stablePath.map(e=>l.fromString(e))&&(n({targetVariable:{nodeFieldAlias:{stablePathToNode:e.value.stablePath,nodeField:"COMPONENT_PROP_ASSIGNMENTS",indexOrKey:e.value.explicitDefId}}}),S(!0))},[n]),k=o.useMemo(()=>(0,E.kc)().prototype_expression_props_ui?{type:"COMPONENT_PROPS",layout:"list"}:{type:"LOCAL_VARIABLES",layout:"list"},[]);o.useEffect(()=>{let e=r.Ez5.prototypingEditorState().colorPickerEyedropperVarData;return(0,t5.lu)(e,{onChangeImmediate(){let t=e.getCopy();t&&n({targetVariableData:t})}})},[n]);let D="nodeFieldAlias"in t?(0,eT.aA)(t.nodeFieldAlias.stablePathToNode,t.nodeFieldAlias.indexOrKey):void 0,M=D?(0,eT.Xx)(D.varValue.resolvedType):null,R=null;if((0,C.gl)(t))R=null;else if(N?.resolvedType===r.rXF.COLOR)R=(0,C.gl)(e)?o.createElement("div",{className:"prototype_set_variable_controls--targetVariableDataMixedContainer--H6uGu"},(0,T.t)("fullscreen.mixed")):o.createElement(o.Fragment,null,o.createElement(t9.g,{variableValue:e??N,onChange:e=>{n({targetVariableData:e})},recordingKey:v.Pt(s.recordingKey,"variableValueInput"),setVariableAction:!0,innerContainerClassName:"prototype_set_variable_controls--variableColorInputContainer--NaOmp"}));else{let t=s.isNestedInConditional?"prototype_set_variable_controls--absoluteIconInConditional--BbEmW":"prototype_set_variable_controls--absoluteIcon--1XpBF",a=g?.resolvedType??(D?.varValue.resolvedType===r.rXF.TEXT_DATA?r.rXF.STRING:D?.varValue.resolvedType)??r.rXF.BOOLEAN;R=o.createElement("div",{className:p?void 0:er.cx.ml12.$},o.createElement("div",{className:nt},o.createElement(Z.KN,{resolvedType:a,targetVariableData:e,autoOpenExpressionBuilder:w,setAutoOpenExpressionBuilder:S,updateSelectionProperties:n,recordingKey:s.recordingKey,isNarrowPanel:s.isNarrowPanel,showVariableThumbnails:!0}),!p&&o.createElement(ei.B,{className:m()(nn,t),svg:tB.default})))}let V=m()({"prototype_set_variable_controls--targetVariableDropdown--IZwoF":!p&&!s.isNarrowPanel,"prototype_set_variable_controls--targetVariableDropdownNarrow--WWi-t prototype_set_variable_controls--targetVariableDropdown--IZwoF":!p&&s.isNarrowPanel,"prototype_set_variable_controls--targetVariableDropdownUI3--Pz71q":p,[na]:p&&!(_||D)}),U=o.createElement(ep.D8,{recordingKey:v.Pt(s.recordingKey,"selectTargetVariable"),onClick:I},o.createElement("div",{className:p?void 0:(0,C.hS)(t)?"prototype_set_variable_controls--targetVariableLabel--AFCqK":"prototype_set_variable_controls--targetVariableLabelInactive--zHWCC prototype_set_variable_controls--targetVariableLabel--AFCqK",ref:c},o.createElement(eo.Y,null,o.createElement("div",{className:V},o.createElement("div",{className:nt},(0,C.gl)(t)?o.createElement("div",{className:m()(er.cx.pt2.$,er.cx.pb2.$)},(0,T.t)("fullscreen.mixed")):_?o.createElement(ew.w,{text:_,thumbnailValue:N,isDeleted:!!g&&(0,eA.eF)(g)}):D?o.createElement(ew.w,{text:D.name,thumbnailValue:M,isDeleted:!1,colorTheme:ew.J.COMPONENT}):o.createElement("div",{className:m()(er.cx.pt2.$,er.cx.pb2.$,p?"prototype_set_variable_controls--placeholderTextColorUI3--Pc-4N":void 0)},p?(0,T.t)("proto.select_variable.short"):(0,T.t)("proto.select_variable")),!p&&o.createElement(ei.B,{className:nn,svg:tB.default})))))),K=p?o.createElement(eY.cS,{input:U,label:(0,T.tx)("proto.variable")}):U,F=m()({"prototype_set_variable_controls--setVariableToContainerNarrow--HHbHQ prototype_set_variable_controls--setVariableToContainer--kxsCZ":!p&&s.isNarrowPanel,"prototype_set_variable_controls--setVariableToContainer--kxsCZ":!p&&!s.isNarrowPanel,"prototype_set_variable_controls--setVariableToContainerUI3--pGbDe":p,[na]:p&&!e&&N?.resolvedType!==r.rXF.COLOR}),B=o.createElement("div",{className:F,"data-testid":"set-variable-container"},R),W=p?null!==R?o.createElement(eY.cS,{label:(0,T.tx)("proto.variable.value"),input:B}):null:B;return o.createElement("div",{className:p?void 0:er.cx.relative.$},K,u.isShown&&"variable-picker-set-variable-action"===u.type&&u.key===s.recordingKey?o.createElement(o.Fragment,null,o.createElement(ne.vx,{title:"",headerSize:"hidden",initialPosition:u.initialPosition,onClose:x,dragHeaderOnly:!1,initialWidth:216,canRenderBelowViewport:!0},(0,E.kc)().prototype_expression_props_ui?o.createElement(t8.jc,{selectedItem:g,disabledVariableIds:new Set,currentView:k,toggleLayout:h.lQ,pickerType:"fields",setControlRightButtons:o.createElement(t7.f,{resolvedTypes:[r.rXF.BOOLEAN,r.rXF.STRING,r.rXF.FLOAT,r.rXF.COLOR]}),onVariableSelected:P,onClose:x,recordingKey:v.Pt(s.recordingKey,"variablePickerForSelection"),searchQuery:f,onSearchInputChange:y,onComponentPropSelected:O}):o.createElement(t8.YK,{selectedItem:g,disabledVariableIds:new Set,currentView:k,toggleLayout:h.lQ,pickerType:"fields",setControlRightButtons:o.createElement(t7.f,{resolvedTypes:[r.rXF.BOOLEAN,r.rXF.STRING,r.rXF.FLOAT,r.rXF.COLOR]}),onVariableSelected:P,onClose:x,recordingKey:v.Pt(s.recordingKey,"variablePickerForSelection"),searchQuery:f,onSearchInputChange:y})),o.createElement(t8.$3,{onClose:x})):null,W)}var ni=n(96796),nr=n(463420),nl=n(347082),ns=n(896474),nc=n(394781);let nd=(0,el.ex)("prototype_state_management_info",function(){let e=o.createElement("a",{className:er.cx.cursorPointer.colorTextTooltipSecondary.$,href:"https://help.figma.com/hc/articles/14397859494295",rel:"noopener noreferrer",target:"_blank",onMouseDown:e=>{e.stopPropagation(),e.preventDefault()}},(0,T.tx)("proto.state_management.info_tooltip_learn_more")),t=o.createElement("span",null,o.createElement("strong",null,(0,T.tx)("proto.animation_panel.preserve_scroll_position")));return o.createElement("div",{className:"prototype_state_management_info_tooltip--stateManagementMoreInfo---gER1 tooltip--text--Ll1mS"},(0,T.tx)("proto.state_management.info_tooltip",{PreserveScrollPositionBold:t,LearnMoreLink:e}))}),np="prototype_state_management_panel--checkboxRow--2u02e checkbox--_checkboxRow--oEhow",nu="prototype_state_management_panel--expandCaret--uuDge";var nm=n(949207),n_=n(432023);function ng({transition:e,navigationType:t,recordingKey:n,showPreserveScrollPosition:a,showResetVideoState:r,showResetInteractiveComponentState:l,updateSelectionProperties:s,stateManagementVersion:c,selectedInteractions:d}){let p=(0,i.wA)(),u=(0,A.GS)(),[m,_]=o.useState(!u),g=o.useContext(ex.c);if((0,en.YT)()===en.Oz.TWO_COL&&g===ex.P.LEFT)return null;let E=(0,en.LH)(c),f=o.createElement(ti.S,{onChange:t=>{p((0,L._P)({name:"Preserve Scroll Changed",params:{newValue:t}})),s({...function(e){if((0,C.hS)(e.preserveScroll))return{transitionPreserveScroll:e.preserveScroll}}({...e,preserveScroll:t})})},checked:!0===e.preserveScroll,mixed:(0,C.gl)(e.preserveScroll),recordingKey:v.Pt(n,"preserve-scroll-check"),label:o.createElement(tr.J,null,(0,T.tx)("proto.animation_panel.preserve_scroll_position"))}),y=u?o.createElement(eY.TN,null,f):o.createElement(U.fI,{className:np},f),h=o.createElement(ti.S,{onChange:t=>{p((0,L._P)({name:"Reset Scroll Position Changed",params:{newValue:t,noodleUpgradedThisSession:nc.zZ.haveAnyInteractionsBeenUpgraded(d)}})),s({...function(e){if((0,C.hS)(e.resetScrollPosition))return{transitionResetScrollPosition:e.resetScrollPosition}}({...e,resetScrollPosition:t})})},checked:!0===e.resetScrollPosition,mixed:(0,C.gl)(e.resetScrollPosition),recordingKey:v.Pt(n,"reset-scroll-position-check"),label:o.createElement(tr.J,null,(0,T.tx)("proto.animation_panel.reset_scroll_position"))}),b=o.createElement("div",{"data-tooltip-type":R.Ib.SPECIAL,"data-tooltip":nd,"data-tooltip-interactive":!0,"data-tooltip-show-immediately":!0,"data-tooltip-max-width":240,className:u?"prototype_state_management_panel--stateManagementPanelTooltipUI3--x5MQ3":void 0},o.createElement(ns.In,{icon:"info-16"})),N=u?o.createElement(eY.TN,null,h," ",b):o.createElement(U.fI,{className:np},h),x=o.createElement(ti.S,{onChange:t=>{p((0,L._P)({name:"Reset Component State Changed",params:{newValue:t,noodleUpgradedThisSession:nc.zZ.haveAnyInteractionsBeenUpgraded(d)}})),s({...function(e){if((0,C.hS)(e.resetInteractiveComponents))return{transitionResetInteractiveComponents:e.resetInteractiveComponents}}({...e,resetInteractiveComponents:t})})},checked:!0===e.resetInteractiveComponents,mixed:(0,C.gl)(e.resetInteractiveComponents),recordingKey:v.Pt(n,"reset-component-state-check"),label:o.createElement(tr.J,null,(0,T.tx)("proto.animation_panel.reset_component_state"))}),w=u?o.createElement(eY.TN,null,x):o.createElement(U.fI,{className:np},x),S=o.createElement(ti.S,{onChange:t=>{p((0,L._P)({name:"Reset Video Position Changed",params:{newValue:t}})),s({...function(e){if((0,C.hS)(e.resetVideoPosition))return{transitionResetVideoPosition:e.resetVideoPosition}}({...e,resetVideoPosition:t})})},checked:!0===e.resetVideoPosition,mixed:(0,C.gl)(e.resetVideoPosition),recordingKey:v.Pt(n,"reset-video-position-check"),label:o.createElement(tr.J,null,(0,en.LH)(c)?(0,T.tx)("proto.state_management.reset_video_state"):(0,T.tx)("proto.animation_panel.reset_video_state"))}),P=u?o.createElement(eY.TN,null,S):o.createElement(U.fI,{className:np},S),O=o.createElement(U.Zk,{className:`prototype_state_management_panel--stateManagementPanel--sYaaj ${(0,en.kM)(c)&&"prototype_state_management_panel--stateManagementPanelWithVersion--AovOP"}`},!u&&o.createElement(U.fI,null,o.createElement(U.xw,{className:"prototype_state_management_panel--panelTitle--Nr4Eh",faded:!0},(0,T.tx)("proto.state_management")),!(0,en.kM)(c)&&b),(0,en.uU)(c)&&a&&y,r&&(0,en.uU)(c)&&P,E&&N,E&&l&&w,E&&r&&P,(0,C.gl)(c)&&o.createElement(eo.Y,{direction:"horizontal",padding:{horizontal:12,vertical:12}},o.createElement(U.UZ,null,(0,T.tx)("proto.state_management.mixed_state_update")))),k=()=>{_(!m)},D=o.createElement(ep.D8,{key:"expand-caret",recordingKey:v.Pt(n,"expand-caret"),onMouseDown:k,role:"presentation"},o.createElement(I.U,{svg:m?nm.A:n_.A},m?o.createElement(ni.O,{className:nu}):o.createElement(nr.k,{className:nu}))),M=o.createElement("div",{className:"prototype_state_management_panel--expandRow--RVDCp",onMouseDown:k,role:"presentation"},D,o.createElement(ep.oj,null,(0,T.tx)("proto.state")));return o.createElement(nl.p,{name:"prototype_state_management_panel"},u&&M,(m||!u)&&O)}class nE extends eE.c${}class nf extends eE.l6{}let ny=l.invalidGUIDStr;class nh extends eu.cP{format(e){return e===ny||null===e?(0,T.t)("proto.target_video_node_name_formatter.this_video"):super.format(e)}}function nv(e){let{viableSameFrameVideoIds:t,disabledSameFrameVideoIds:n,scene:a,dropdownShown:r,targetVideoNodeID:s,isVideoSelected:c,onChange:d}=e,p=(0,i.wA)(),[u,m]=o.useState(()=>c?new nh(a):new eu.cP(a));t.sort((e,t)=>{let n=u.format(e),a=u.format(t);return n.localeCompare(a)}),c&&t.unshift(ny);let _=t.length>0&&n.length>0,g=`prototype-target-video-select-${e.recordingKey}`,E=(0,A.GS)(),f=o.createElement(nf,{id:g,dataTestId:"target-video-select",className:"prototype_target_video_dropdown--targetVideoDropdown--6hKF-",chevronClassName:"prototype_target_video_dropdown--chevron--jgz53",inputClassName:"prototype_target_video_dropdown--input--infAK",property:(0,C.gl)(s)?s:l.toString(s),formatter:u,onChange:d,dispatch:p,dropdownShown:r,recordingKey:v.Pt(e,"select"),onOptionFocus:e=>{tY.Uc(e??"")},dropdownAlignment:"left"},t.filter(e=>u.hasNameForNode(e)).map((t,n)=>o.createElement(nE,{key:`enabled-${n}`,value:t,recordingKey:v.Pt(e,`viable-option-${n}`),disabled:!1})),_&&o.createElement(eE.sK,null),n.filter(e=>u.hasNameForNode(e)).map((t,n)=>o.createElement(nE,{key:`disabled-${n}`,value:t,recordingKey:v.Pt(e,`viable-option-${n}`),disabled:!0})));return E?o.createElement(eY.cS,{input:f,label:(0,T.tx)("proto.video_dropdown.label")}):f}var nb=n(946689);function nN({action:e,recordingKey:t,onURLChange:n,onOpenInNewTabChange:a}){let i=(0,A.GS)(),r=o.createElement(nb.ks,{className:i?"prototype_open_url_action_options--urlInputUI3--H-JfT":"prototype_open_url_action_options--urlInput--T-tGT",dataTestId:"url-input",placeholder:(0,T.t)("proto.interaction.example_com"),value:(0,C.gl)(e.connectionURL)?(0,T.t)("fullscreen.mixed"):(0,C._W)(e.connectionURL,""),onChange:n,recordingKey:v.Pt(t,"urlTextInput"),autoFocus:!1}),l=o.createElement(ti.S,{label:o.createElement(tr.J,null,(0,T.tx)("proto.action_open_url_in_new_tab")),onChange:a,recordingKey:v.Pt(t,"open-url-in-new-tab-check"),checked:void 0===e.openUrlInNewTab||!0===e.openUrlInNewTab});return o.createElement(o.Fragment,null,i?o.createElement(eY.cS,{label:(0,T.tx)("proto.open_url.text_input_label"),input:r}):r,i?o.createElement(eY.TN,null,l):o.createElement(U.fI,{className:"prototype_open_url_action_options--checkboxRow--mu17T checkbox--_checkboxRow--oEhow"},l))}var nI=n(617453),nT=n(588599);function nx({updateSelectionProperties:e,action:t,extraScrollOffset:n,showScrollToOptions:a,recordingKey:r}){let{smallNudgeAmount:l,bigNudgeAmount:s}=(0,nI.sT)(),c=(0,i.wA)(),d=(0,A.GS)(),p=(t,n)=>(a,o)=>{t&&e({extraScrollOffset:{...t,[n]:a}},{shouldCommit:o})},u=(0,C._W)(n,{x:0,y:0});if(!a||"SCROLL_TO"!==t)return null;let m=o.createElement(td.gq,{className:d?void 0:eS.U,inputClassName:d?eS.oM:eS.hF,value:u.y,wheelMultiplier:l,scrubMultiplier:l,smallNudgeAmount:l,bigNudgeAmount:s,onValueChange:p(u,"y"),dispatch:c,"data-tooltip-type":R.Ib.TEXT,"data-tooltip":(0,T.t)("proto.trigger.y_offset"),tooltipForScreenReadersOnly:!1,recordingKey:v.Pt(r,"extraScrollOffsetY")},d?o.createElement("span",{className:eS.QK},(0,T.tx)("proto.scroll_options.scroll_offset.y")):o.createElement(ei.B,{className:eS.QK,svg:nT.A})),_=o.createElement(td.gq,{className:d?void 0:eS.sC,inputClassName:d?eS.oM:eS.hF,value:u.x,wheelMultiplier:l,scrubMultiplier:l,smallNudgeAmount:l,bigNudgeAmount:s,onValueChange:p(u,"x"),dispatch:c,"data-tooltip-type":R.Ib.TEXT,"data-tooltip":(0,T.t)("proto.trigger.x_offset"),tooltipForScreenReadersOnly:!1,recordingKey:v.Pt(r,"extraScrollOffsetX")},d?o.createElement("span",{className:eS.QK},(0,T.tx)("proto.scroll_options.scroll_offset.x")):o.createElement(ei.B,{className:eS.Kh,svg:nT.A}));return d?o.createElement(eY.Cm,{label:(0,T.tx)("proto.scroll_options.offset"),leftInput:_,rightInput:m}):o.createElement(U.fI,null,m,_)}function nA(e){return o.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},o.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M18 12a6 6 0 1 1-12 0 6 6 0 0 1 12 0Zm1 0a7 7 0 1 1-14 0 7 7 0 0 1 14 0Zm-6.5-3.5a.5.5 0 0 0-1 0V12a.5.5 0 0 0 .146.354l2 2a.5.5 0 0 0 .708-.708L12.5 11.793V8.5Z",clipRule:"evenodd"}))}let nw="prototype_video_action_options--chevron--mkNyv",nS="prototype_video_action_options--input--3-cEi",nP=new eu.js,nC=new eu.Z6;function nO({action:e,onChange:t,updateSelectionProperties:n,dropdownShown:a,recordingKey:r}){let l=(0,A.GS)(),s=(0,eu.Od)(e),c=(0,C.E7)(e.mediaAction),d="UPDATE_MEDIA_RUNTIME"===(0,C.E7)(e.connectionType),p="SKIP_TO"===c,u="SKIP_FORWARD"===c||"SKIP_BACKWARD"===c,m="PLAY"===c||"PAUSE"===c||"TOGGLE_PLAY_PAUSE"===c,_="MUTE"===c||"UNMUTE"===c||"TOGGLE_MUTE_UNMUTE"===c,g=(0,i.wA)(),E=(0,nI.RU)(),f=o.useCallback(e=>{n({mediaSkipToTime:e}),g((0,L._P)({name:"Media skip to time changed",params:{value:e}}))},[g,n]),y=`prototype-media-action-select-${r}`,h="prototype_video_action_options--shortDropdown--NOXXv",b=a&&a.type===y?nP:nC,N=o.createElement(eh,{id:y,dataTestId:"media-play-pause-select",className:h,chevronClassName:nw,inputClassName:nS,property:s,formatter:b,onChange:t,dispatch:g,dropdownShown:a,recordingKey:v.Pt(r,"select")},o.createElement(ey,{key:"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE",value:"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE",recordingKey:v.Pt(r,"toggle-play-pause-option"),disabled:!1}),o.createElement(ey,{key:"UPDATE_MEDIA_PLAY",value:"UPDATE_MEDIA_PLAY",recordingKey:v.Pt(r,"play-option"),disabled:!1}),o.createElement(ey,{key:"UPDATE_MEDIA_PAUSE",value:"UPDATE_MEDIA_PAUSE",recordingKey:v.Pt(r,"pause-option"),disabled:!1})),I=o.createElement(eh,{id:y,dataTestId:"media-mute-unmute-select",className:h,chevronClassName:nw,inputClassName:nS,property:s,formatter:b,onChange:t,dispatch:g,dropdownShown:a,recordingKey:v.Pt(r,"select")},o.createElement(ey,{key:"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE",value:"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE",recordingKey:v.Pt(r,"toggle-mute-unmute-option"),disabled:!1}),o.createElement(ey,{key:"UPDATE_MEDIA_MUTE",value:"UPDATE_MEDIA_MUTE",recordingKey:v.Pt(r,"mute-option"),disabled:!1}),o.createElement(ey,{key:"UPDATE_MEDIA_UNMUTE",value:"UPDATE_MEDIA_UNMUTE",recordingKey:v.Pt(r,"unmute-option"),disabled:!1})),x=o.createElement(eh,{id:y,dataTestId:"media-skip-by-select",className:h,chevronClassName:nw,inputClassName:nS,property:s,formatter:b,onChange:t,dispatch:g,dropdownShown:a,recordingKey:v.Pt(r,"select"),dropdownWidth:160},o.createElement(ey,{key:"UPDATE_MEDIA_SKIP_FORWARD",value:"UPDATE_MEDIA_SKIP_FORWARD",recordingKey:v.Pt(r,"skip-forward-option"),disabled:!1}),o.createElement(ey,{key:"UPDATE_MEDIA_SKIP_BACKWARD",value:"UPDATE_MEDIA_SKIP_BACKWARD",recordingKey:v.Pt(r,"skip-backward-option"),disabled:!1})),w=o.createElement(td.qd,{className:"prototype_video_action_options--timestampContainer---DdaI",inputClassName:"prototype_video_action_options--timestamp--luOrs",dataTestId:"mediaSkipToTime-input",dispatch:g,value:e.mediaSkipToTime||0,onValueChange:f,wheelMultiplier:E/1e3,scrubMultiplier:E/1e3,max:3600,displayFractions:!0,"data-tooltip-type":R.Ib.TEXT,"data-tooltip":(0,T.t)("proto.trigger.timestamp_to_set_to"),tooltipForScreenReadersOnly:!0,recordingKey:v.Pt(r,"mediaSkipToTimeInput")},l?o.createElement(nA,null):void 0),S="SKIP_BACKWARD"===c?(0,T.t)("proto.trigger.duration_to_jump_backward"):(0,T.t)("proto.trigger.duration_to_jump_forward"),P=o.createElement(td.dE,{className:"prototype_video_action_options--timeAmountContainer--5kpHn",dataTestId:"mediaSkipByAmount-input",dispatch:g,value:e.mediaSkipByAmount||5,onValueChange:e=>{n({mediaSkipByAmount:e}),g((0,L._P)({name:"Media skip by amount changed",params:{value:e}}))},wheelMultiplier:E/1e3,scrubMultiplier:E/1e3,max:3600,"data-tooltip-type":R.Ib.TEXT,"data-tooltip":S,tooltipForScreenReadersOnly:!0,recordingKey:v.Pt(r,"mediaSkipByAmountInput")});if(!d)return null;if(l){if(m)return o.createElement(eY.cS,{input:N,label:(0,T.tx)("proto.video_options.behavior")});if(_)return o.createElement(eY.cS,{input:I,label:(0,T.tx)("proto.video_options.behavior")});if(u)return o.createElement(o.Fragment,null,o.createElement(eY.cS,{input:x,label:(0,T.tx)("proto.video_options.direction")}),o.createElement(eY.cS,{input:P,label:(0,T.tx)("proto.video_options.offset")}));if(p)return o.createElement(eY.cS,{input:w,label:(0,T.tx)("proto.video_options.timestamp")})}return o.createElement(U.fI,null,m&&N,_&&I,u&&x,u&&P,p&&w)}function nk({action:e,recordingKey:t,interactionType:n,onActionChange:a,updateMultipleDestinationNodes:s,updateSelectionProperties:c,stateManagementVersion:d,autoOpenVariablePicker:p,autoOpenExpressionBuilder:u,setAutoOpenExpressionBuilder:_,...g}){let E=(0,i.wA)(),f=(0,em.Um)(),{scene:h,selectionProperties:b}=(0,tn.R)(e=>({scene:e.mirror.sceneGraph,selectionProperties:e.mirror.selectionProperties})),N=(0,A.GS)(),I=(0,en.YT)(),x=I===en.Oz.SINGLE_COL,w=I===en.Oz.TWO_COL,S=o.useContext(ex.c),P=w&&S===ex.P.RIGHT,O="SET_VARIABLE"===(0,C.E7)(e.connectionType),k="SET_VARIABLE_MODE"===(0,C.E7)(e.connectionType),D="CONDITIONAL"===(0,C.E7)(e.connectionType),M="INTERNAL_NODE"===(0,C.E7)(e.connectionType),R="INTERNAL_NODE"===(0,C.E7)(e.connectionType)&&"SWAP_STATE"===(0,C.E7)(e.navigationType),V="URL"===(0,C.E7)(e.connectionType),U=M||"BACK"===(0,C.E7)(e.connectionType)||"CLOSE"===(0,C.E7)(e.connectionType),K="UPDATE_MEDIA_RUNTIME"===(0,C.E7)(e.connectionType),F=(0,eg.dq)(b),B=(0,ta.uQ)(),W=[],G=[];if(B){let{viableIds:e,disabledIds:t}=r.X3B.getVideoNodesOnSameTlfAsNode(B);W=e,G=t}let z=l.toString((0,C.E7)(e.transitionNodeID)),H=null!=z&&z!==l.invalidGUIDStr,Y=M&&(!(0,C.hS)(e.transitionNodeID)||H),X=(0,C.E7)(e.navigationType),$=M&&"OVERLAY"===(0,C.E7)(X),j=(0,en.hU)(e.transitionType,e.easingType,e.easingFunction,e.transitionDuration,e.transitionShouldSmartAnimate,e.transitionPreserveScroll,e.transitionResetVideoPosition,e.openUrlInNewTab,e.transitionResetScrollPosition,e.transitionResetInteractiveComponents),Z=U&&!$&&("INSTANT"===j.behavior||"DISSOLVE"===j.behavior),Q=M&&"OVERLAY"===(0,C.E7)(e.navigationType)&&H,ee=M&&($||"SWAP"===(0,C.E7)(X)),et=!K&&(0,en.oc)(e),ea=(0,en.GB)(e),eo=(0,en.uU)(d)?Z||et:(0,en.Fp)(d,e.connectionType,e.navigationType),{selectedInteractions:ei}=(0,J.Ay)(q.J.NORMAL),el=ei.filter(e=>!!e.sourceNodeID&&!!e.id).map(e=>y.d({nodeID:e.sourceNodeID,interactionID:e.id})),es=o.useCallback(e=>{let t=l.fromString(e);t&&c({transitionNodeID:t}),E((0,L._P)({name:"Prototype navigation destination changed",params:{source:"panel",connectorIds:JSON.stringify(el),destinationTlfId:e}}))},[E,c,el]),ec=o.useCallback(e=>{s(e),E((0,L._P)({name:"Variant based prototyping UI changed",params:{source:"panel"}})),E((0,L._P)({name:"Prototype navigation destination changed",params:{source:"panel",connectorIds:JSON.stringify(el)}}))},[s,E,el]),ed=o.useCallback(e=>{c({connectionURL:e.target.value})},[c]),ep=(0,eu.Od)(e),e_=m()({[eS.Ph]:!N,[eS.Ti]:g.isNestedInConditional&&!x&&!P}),eE=M&&!R,ef=o.createElement(t1,{className:eS.iR,dispatch:E,dropdownShown:f,onChange:es,nodeId:e.transitionNodeID||l.invalidGUID,scene:h,recordingKey:v.Pt(t,"destinationDropdown"),action:ep,isUI3:N}),ey=o.createElement(nx,{action:ep,showScrollToOptions:"SCROLL_TO"===ep,extraScrollOffset:e.extraScrollOffset,updateSelectionProperties:c,recordingKey:v.Pt(t,"scrollOptionsPanel")}),eh=o.createElement(tb,{interactionType:n,updateSelectionProperties:c,recordingKey:v.Pt(t,"overlaySettings"),actionIndexPath:g.actionIndexPath,nodeId:e.transitionNodeID||l.invalidGUID});return o.createElement("div",{className:e_},eE&&(N?o.createElement(o.Fragment,null,o.createElement(eY.cS,{label:ee?(0,T.tx)("proto.overlay"):(0,T.tx)("proto.destination"),input:ef}),ey,Q&&eh):ef),V&&o.createElement(nN,{action:e,recordingKey:t,onOpenInNewTabChange:e=>{c({openUrlInNewTab:e}),E((0,L._P)({name:"Open Url In New Tab Changed",params:{value:e}}))},onURLChange:ed}),K&&o.createElement(nv,{dropdownShown:f,scene:h,targetVideoNodeID:e.transitionNodeID||l.invalidGUID,recordingKey:v.Pt(t,"targetVideoDropdown"),viableSameFrameVideoIds:W,disabledSameFrameVideoIds:G,isVideoSelected:F,onChange:es}),o.createElement(nO,{dropdownShown:f,action:e,onChange:a,updateSelectionProperties:c,recordingKey:t}),!N&&ey,O&&o.createElement("div",{className:N?void 0:er.cx.ml4.$},o.createElement(no,{className:eS.PB,dispatch:E,onChange:es,nodeId:e.transitionNodeID||l.invalidGUID,targetVariable:e.targetVariable||{id:""},targetVariableData:e.targetVariableData,updateSelectionProperties:c,recordingKey:v.Pt(t,"setVariableControls"),action:ep,isNestedInConditional:g.isNestedInConditional,isNarrowPanel:g.isNestedInConditional||g.isNarrowPanel,autoOpenVariablePicker:p})),k&&o.createElement("div",{className:N?void 0:er.cx.ml4.$},o.createElement(e4,{dispatch:E,targetVariableSetID:e.targetVariableSetID,targetVariableModeID:e.targetVariableModeID,deprecatedTargetVariableSetKey:e.targetVariableSetKey,updateSelectionProperties:c,recordingKey:v.Pt(t,"setVariableControls"),actionIndexPath:g.actionIndexPath.join(",")})),D&&(P?o.createElement(tH,{recordingKey:v.Pt(t,"conditionalActionSection","conditional-block",0),autoOpenExpressionBuilder:u,setAutoOpenExpressionBuilder:_,updateSelectionProperties:c,conditionalActions:(0,C.hS)(e.conditionalActions)&&e.conditionalActions?e.conditionalActions:[]}):o.createElement(tz,{updateSelectionProperties:c,recordingKey:v.Pt(t,"conditionalActionSection"),action:e,updateMultipleDestinationNodes:s,interactionType:n,stateManagementVersion:d,selectedInteractions:g.selectedInteractions,actionIndexPath:g.actionIndexPath,onDrop:g.onDrop,onSelect:g.onSelect,onExpand:g.onExpand,onNewActionAdded:g.onNewActionAdded,selectedActionIndex:g.selectedActionIndex,expandedRows:g.expandedRows,autoOpenVariablePicker:p,handleMouseDownUI3:g.handleMouseDownUI3})),R&&o.createElement("div",{className:er.cx.ml0.$},o.createElement(t2,{onChange:ec,nodeId:e.transitionNodeID||l.invalidGUID,recordingKey:v.Pt(t,"consumption"),actionIndexPath:g.actionIndexPath})),Y&&o.createElement(o.Fragment,null,N&&o.createElement("div",{className:eS.x}),o.createElement(tP.X7,{transition:j,interactionType:n,navigationType:e.navigationType,recordingKey:v.Pt(t,"animationPanel"),updateSelectionProperties:c,isNarrowPanel:g.isNestedInConditional||g.isNarrowPanel,stateManagementVersion:d})),Q&&!N&&eh,eo&&o.createElement(o.Fragment,null,N&&o.createElement("div",{className:eS.x}),o.createElement(ng,{connectionType:e.connectionType,transition:j,navigationType:e.navigationType,recordingKey:v.Pt(t,"stateManagementPanel"),updateSelectionProperties:c,showPreserveScrollPosition:Z,showResetVideoState:!!et,showResetInteractiveComponentState:!!ea,stateManagementVersion:d,selectedInteractions:g.selectedInteractions})))}var nD=n(344525),nL=n(323110),nM=n(482725);let nR=Symbol("ACTION_ROW");function nV({updateMultipleDestinationNodes:e,updateSelectionProperties:t,onDeleteAction:n,stateManagementVersion:a,selectedInteractions:r,autoOpenVariablePicker:l,autoOpenExpressionBuilder:s,setAutoOpenExpressionBuilder:c,...p}){let u=(0,i.wA)(),{shouldShowAdvancedPrototypingPaywall:_,showAdvancedPrototypingVariablesModal:g,showAdvancedPrototypingConditionalActionsModal:E}=(0,en.zt)(),h=(0,em.Um)(),b=(0,en.SJ)(),{firstVariableSetMode:N,firstVariableSetID:x}=e3(),w=p.action,S=p.isNestedInConditional&&(0,tC.qQ)(p.action),P=!!w.connectionType&&"CONDITIONAL"===w.connectionType,O=(0,A.GS)(),k=(0,en.YT)(),D=k===en.Oz.SINGLE_COL,M=k===en.Oz.TWO_COL,V=o.useContext(ex.c),K=M&&V===ex.P.RIGHT,F=M&&V===ex.P.LEFT,B=!((0,C.gl)(p.action)||["CLOSE","NONE"].includes(w.connectionType))&&!O;var W=p.selectedActionIndex.equals(p.actionIndexPath);let G=1===p.selectedActionIndex.path.length&&p.isNestedInConditional&&p.actionIndexPath[0]===p.selectedActionIndex.path[0];var z=void 0===p.expandedRows||void 0!==p.expandedRows.find(e=>e.equals(p.actionIndexPath));O&&(z=!!D||!F||P);let H=o.useCallback(()=>{(B||D)&&p.onExpand(p.actionIndexPath)},[B,D,p]),[Y,q]=o.useState(!1);o.useEffect(()=>{if(P){let e=setTimeout(()=>{q(!0)},0);return()=>clearTimeout(e)}q(!0)},[P]);let J=P&&!z,X=P&&z,$=o.useRef(null),[j,Z]=(0,f.fp)(en.hV),{position:Q,dragItem:ee}=(0,ea.h4)(()=>({type:nR,element:$,item:p.action,dropPositionThreshold:X?.2:J?1/3:.5,getDeepestTargetOnly:!0,canDrag:!!F||!z,onDrop(e){p.onDrop(e),Z(!0)}})),et=o.useMemo(()=>{let e=$.current;if(!e||!Q||K)return;if(ee&&"CONDITIONAL"===ee.connectionType&&p.isNestedInConditional||(0,tC.qQ)(ee)){Z(!1);return}let t=S?ea.Nz.BEFORE:Q;var n=void 0;let a=e.offsetParent?.firstElementChild?.scrollTop??0;return t===ea.Nz.BEFORE?n=e.offsetTop-a:t===ea.Nz.AFTER&&(n=e.offsetTop+e.offsetHeight-a),Z(!0),n},[Q,K,ee,p.isNestedInConditional,S,Z]),eo=Q&&P&&!z&&Q===ea.Nz.INSIDE&&"CONDITIONAL"!==ee.connectionType,er=v.rf(p.recordingKey,"mousedown",e=>{z||(W=!0,p.onSelect(p.actionIndexPath,!0))}),el=v.rf(p.recordingKey,"mousedown",e=>{W=!1,p.onSelect(p.actionIndexPath,!1)}),es=v.rf(p.recordingKey,"click",e=>{p.onSelect(p.actionIndexPath,!0)}),ec=v.rf(p.recordingKey,"mousedown",e=>{(0,tC.qQ)(p.action)||p.onSelect(p.actionIndexPath,!0)}),e_=e=>{var n=!0,a=!1;switch(e){case"NONE":t({connectionType:"NONE"});break;case"NAVIGATE_TO":t({connectionType:"INTERNAL_NODE",navigationType:"NAVIGATE"});break;case"OPEN_OVERLAY":t({connectionType:"INTERNAL_NODE",navigationType:"OVERLAY"});break;case"SCROLL_TO":t({connectionType:"INTERNAL_NODE",navigationType:"SCROLL_TO"});break;case"SWAP_WITH":t({connectionType:"INTERNAL_NODE",navigationType:"SWAP"});break;case"SWAP_STATE_TO":t({connectionType:"INTERNAL_NODE",navigationType:"SWAP_STATE"});break;case"GO_BACK":t({connectionType:"BACK"});break;case"CLOSE_OVERLAY":t({connectionType:"CLOSE"});break;case"OPEN_URL":t({connectionType:"URL"});break;case"SET_VARIABLE":_?(n=!1,g()):(t({connectionType:"SET_VARIABLE"}),l.current=!0);break;case"SET_VARIABLE_MODE":_?(n=!1,g()):t({connectionType:"SET_VARIABLE_MODE",targetVariableSetID:x,targetVariableModeID:N});break;case"UPDATE_MEDIA_PLAY":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"PLAY"});break;case"UPDATE_MEDIA_PAUSE":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"PAUSE"});break;case"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS":case"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"TOGGLE_PLAY_PAUSE"});break;case"UPDATE_MEDIA_MUTE":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"MUTE"});break;case"UPDATE_MEDIA_UNMUTE":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"UNMUTE"});break;case"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS":case"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"TOGGLE_MUTE_UNMUTE"});break;case"UPDATE_MEDIA_SKIP_BY_OPTIONS":case"UPDATE_MEDIA_SKIP_FORWARD":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"SKIP_FORWARD"});break;case"UPDATE_MEDIA_SKIP_BACKWARD":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"SKIP_BACKWARD"});break;case"UPDATE_MEDIA_SKIP_TO":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"SKIP_TO"});break;case"CONDITIONAL":a=!0,_?(n=!1,E()):(t({connectionType:"CONDITIONAL"}),O&&c&&c(!0))}if(O||z||H(),M&&p.onExpand(p.actionIndexPath,a),n){let t=r.filter(e=>!!e.sourceNodeID&&!!e.id).map(e=>y.d({nodeID:e.sourceNodeID,interactionID:e.id}));u((0,L._P)({name:"Prototype action changed",params:{action:e,source:"panel",connectorIds:JSON.stringify(t)}}))}},eg=p.isNestedInConditional?eS.It:eS.ft,eE=m()({[eS.wu]:!F,[eS.zX]:F&&j}),ef=o.createElement(I.U,{svg:nL.A},o.createElement(ed,{className:eS._2}));if(S&&p.onAddAction)return o.createElement("div",{className:F?eS.LW:void 0},et&&o.createElement("hr",{className:eg,style:{transform:`translateY(${et}px)`}}),F&&p.isNestedInConditional&&ef,o.createElement("div",{className:eE,ref:$},o.createElement(tM,{addButtonPressed:p.onAddAction,recordingKey:v.Pt(p.recordingKey,"addAction"),isNestedInConditional:!0})));let ey=(0,eu._X)(w),eh="NONE"!==ey,ev=(z||!eh)&&!F,eN=p.numActions>1,eI=(p.numActions>1||p.isNestedInConditional)&&!F,eT=m()({[eS.$l]:!0,[eS.KY]:F&&!p.isNestedInConditional,[eS.Iw]:F&&!p.isNestedInConditional&&j,[eS.DM]:F&&p.isNestedInConditional,[eS.vs]:F&&p.isNestedInConditional&&j,[eS.M9]:F&&p.isNestedInConditional&&G&&j,[eS.I_]:F&&P&&!W&&j,[eS.Cu]:W&&!O,[eS.PE]:W&&F&&!p.isNestedInConditional,[eS.Ze]:eo,[eS.Op]:p.isNestedInConditional&&!O}),eA=m()({[eS.rn]:!0,[eS.Gu]:F,[eS.Ti]:p.isNestedInConditional&&!O&&!K,[eS.Yo]:p.isNestedInConditional&&O&&!K}),ew=o.createElement(ei.B,{key:"expand-caret",className:eS.GE,svg:z?nm.A:n_.A,recordingKey:v.Pt(p.recordingKey,"expandCaret"),onClick:H}),eP=o.createElement(eD,{action:w,isNestedInConditional:p.isNestedInConditional,isNarrowPanel:p.isNarrowPanel&&eN,onClick:O?es:void 0}),eC=o.createElement(eb,{className:"NONE"===ey||O?void 0:nD.fH,dispatch:u,dropdownShown:h,onChange:e_,action:ey,recordingKey:v.Pt(p.recordingKey,"actionDropdown"),showVideoActions:b,isNestedInConditional:p.isNestedInConditional}),eO=o.createElement(U.K0,{className:O?eS.gG:eS.hH,onClick:n,"data-tooltip-type":R.Ib.TEXT,"data-tooltip":(0,T.t)("proto.prototype_panel.delete"),"aria-label":(0,T.t)("proto.prototype_panel.delete"),recordingKey:v.Pt(p.recordingKey,"actionDeleteButton")},o.createElement(I.U,{svg:nM.A},o.createElement(d.O,null))),ek=o.createElement(U.fI,{className:eA,onDoubleClick:H},B&&ew,ev?o.createElement("span",{className:eS.P2},eC):eP,eI&&eO),eL=ev?eC:eP,eM=o.createElement(ep.D8,{className:eA,onDoubleClick:H},B&&ew,eI?o.createElement(tt.DE,{appendedClassName:eS.Jw,label:null,input:eL,icon:eO}):o.createElement(tt.Ad,{appendedClassName:eS.Jw,label:null,input:eL})),eR=(0,T.tx)("proto.action"),eV=o.createElement(ep.D8,{className:eA},D||K?o.createElement(eY.cS,{label:eR,input:eL}):eL),eU=O?eV:eM,eK=m()({[eS.Oe]:!0,[eS.h2]:W,[eS.Ob]:P});return o.createElement("div",{className:eT,ref:$,role:"button",tabIndex:0,onMouseDown:O?void 0:er,onMouseUp:O?void 0:el},void 0!==et&&o.createElement("hr",{className:eg,style:{transform:`translateY(${et}px)`}}),F?o.createElement("div",{className:eK,role:"button",tabIndex:0,onMouseDown:O?ec:void 0},p.isNestedInConditional&&ef,eU):O?eU:ek,z&&Y&&o.createElement(nk,{updateMultipleDestinationNodes:e,action:w,onActionChange:e_,recordingKey:p.recordingKey,updateSelectionProperties:t,interactionType:p.interactionType,stateManagementVersion:a,selectedInteractions:r,isNestedInConditional:p.isNestedInConditional,isNarrowPanel:p.isNarrowPanel,actionIndexPath:p.actionIndexPath,onDrop:p.onDrop,onSelect:p.onSelect,onExpand:p.onExpand,onNewActionAdded:p.onNewActionAdded,selectedActionIndex:p.selectedActionIndex,expandedRows:p.expandedRows,autoOpenVariablePicker:l,autoOpenExpressionBuilder:s,setAutoOpenExpressionBuilder:c,handleMouseDownUI3:ec}))}var nU=n(427113),nK=n(682331),nF=n(73349);function nB({onChange:e,value:t,shouldFocusKeyCaptureField:n,setShouldFocusKeyCaptureField:a}){let i;let r=(0,nF._i)(t?.keyCodes),l=t=>e({keyCodes:t,triggerDevice:"KEYBOARD"}),[s,c]=o.useState(!1),d=o.useRef(null);o.useEffect(()=>{(!t||!t.keyCodes||0===t.keyCodes.length)&&n&&d.current&&(a(!1),d.current.focus(),c(!0))},[a,n,t]),o.useEffect(()=>{if(!s)return()=>{};let t=new nK.L,n=t.onPress(t=>{e({keyCodes:[t.buttons[0]],triggerDevice:t.controllerType}),requestAnimationFrame(()=>{document.activeElement instanceof HTMLElement&&document.activeElement.blur()})});return t.start(),()=>{n.release(),t.end()}},[e,s]);let p=null,u=(0,nF.E8)(t),m=(0,A.GS)();return s?i=o.createElement(nW,null,m?(0,T.tx)("proto.keyCapture.press_key_lowercase"):(0,T.tx)("proto.keyCapture.press_key")):t?.triggerDevice==="KEYBOARD"&&r?p=(0,nF.U8)(r):u?p=u:i=o.createElement(nW,null,m?(0,T.tx)("proto.keyCapture.click_to_set_key"):(0,T.tx)("proto.keyCapture.click_to_select")),o.createElement(U.rp,{ref:d,className:"prototype_key_capture_field--root--bD21s","data-tooltip-type":R.Ib.TEXT,"data-tooltip":p&&p.length>10?p:null,onFocus:()=>c(!0),onBlur:()=>c(!1),onKeyDown:e=>{e.preventDefault(),e.stopPropagation();let t=e.which||e.keyCode;!nF.RI.has(t)&&nF.pu[t]&&(t===r?.keyCode&&e.repeat?l((0,nF.wb)({keyCode:t,metaKey:e.metaKey||r.metaKey,shiftKey:e.shiftKey||r.shiftKey,ctrlKey:e.ctrlKey||r.ctrlKey,altKey:e.altKey||r.altKey})):l((0,nF.wb)({...e,keyCode:t})),document.activeElement instanceof HTMLElement&&document.activeElement.blur())},recordingKey:"keycapture"},p??i)}function nW({children:e}){return o.createElement("span",{className:"prototype_key_capture_field--placeholder--gWUKF"},e)}var nG=n(634238);class nz extends eE.l6{}class nH extends eE.c${}let nY=new eu.VG,nq=new eu.EX,nJ=new eu.JV,nX=new eu.Eq;function n$(e){let t=(0,i.wA)(),n=(0,em.Um)(),a=(0,A.GS)(),s=(0,ef.cJ)(),{showVideoV2Triggers:c}=(0,tn.R)(e=>({allStatesInSelection:e.mirror.selectionProperties.stateGroupSelectionInfo?.mode===r.iCO.STATE,allTopLevelFramesInSelection:!!e.mirror.selectionProperties.allTopLevelFramesInSelection,showVideoV2Triggers:(0,eg.dq)(e.mirror.selectionProperties)})),d=(0,f.md)(nG.NE),p=(t,n)=>{let i=o.createElement("div",{className:"transition_interaction_dropdown--prototypeInteractionIcon---njby"},(0,eg.e7)(t));return o.createElement(nH,{key:n,value:t,icon:a?i:void 0,recordingKey:v.Pt(e,t),disabled:!function(t){if("NONE"===t)return!0;let n=!!e.interactionsOnSelectedNodes&&e.interactionsOnSelectedNodes.every(t=>e.interactionsOnSelectedNodes&&l.equals(t.sourceNodeID,e.interactionsOnSelectedNodes[0].sourceNodeID))&&!(0,C.hS)(e.property),a=(function(){if(e.interactionsOnSelectedNodes)return new Set(e.interactionsOnSelectedNodes.map(e=>e?.event?.interactionType).filter(e=>void 0!==e))})()?.has(t)&&(0,C.hS)(e.property)&&e.property!==t;return(!n&&!a||!!["ON_KEY_DOWN","DRAG","ON_VOICE","ON_MEDIA_HIT"].includes(t))&&("AFTER_TIMEOUT"===t?!e.interactionContainsOpenLinkAction:"ON_MEDIA_HIT"===t||"ON_MEDIA_END"===t?c:(!e.interactionContainsOpenLinkAction||"ON_CLICK"===t||"MOUSE_UP"===t)&&(!e.interactionContainsUpdateMediaRuntime||"ON_HOVER"!==t&&"ON_PRESS"!==t&&"DRAG"!==t)&&(!e.interactionOnlyContainsBack||"ON_HOVER"!==t&&"ON_PRESS"!==t))}(t)})},u=["NONE"].map(p),m=["ON_CLICK",...s?[]:["DRAG"],"ON_HOVER","ON_PRESS",...s?[]:["ON_KEY_DOWN"]].map(p),_=["MOUSE_ENTER","MOUSE_LEAVE","MOUSE_DOWN","MOUSE_UP"].map(p),g=(s?[]:["ON_MEDIA_HIT","ON_MEDIA_END"]).map(p),E=["AFTER_TIMEOUT"].map(p),y=d?"ON_MEDIA_HIT"!==e.property?nq:nX:"ON_MEDIA_HIT"!==e.property?nY:nJ,h=o.useCallback(e=>e-24,[]),b=(0,C.E7)(e.property);return o.createElement(nz,{id:"interaction-type-select",className:e.className,chevronClassName:"transition_interaction_dropdown--chevron--pyzhq",dataTestId:"interaction-select",property:e.property,formatter:y,icon:a&&b?(0,eg.e7)(b):void 0,onChange:e.onChange,dispatch:t,dropdownShown:n,recordingKey:v.Pt(e,"select"),hideDropdownWhenContainerMoves:!(0,e_.nl)(),dropdownAlignment:h,dropdownWidth:160},u,o.createElement(eE.sK,null),m,o.createElement(eE.sK,null),_,!s&&o.createElement(eE.sK,null),!s&&E,c&&[o.createElement(eE.sK,{key:""}),...g])}let nj={keyCodes:[],triggerDevice:"KEYBOARD"};function nZ(e,t,n,a){return n?o.createElement(eY.cS,{label:e,input:t,appendedClassName:a?void 0:eS.dU}):o.createElement(U.fI,null,t)}function nQ(e){let{detailPropsMultipleActions:t,interactionsOnSelectedNodesAndComponents:n,updateSelectionProperties:a}=(0,J.Ay)(e.category),{interactionType:r="NONE",transitionTimeout:l=.8,mediaHitTime:s=0,interactionMaintained:c=!1,interactionDuration:d=.3,keyTrigger:p=nj}=t.interactionEvent,u=(e,t)=>{if(e.connectionType===t)return e;if("CONDITIONAL"===e.connectionType)for(let n of(0,C.hS)(e.conditionalActions)&&e.conditionalActions?e.conditionalActions:[]){let e=n.actions?n.actions.find(e=>e.connectionType===t):void 0;if(void 0!==e)return e}return null},_=void 0!==t.interactionActions.find(e=>u(e,"URL")),g=void 0!==t.interactionActions.find(e=>u(e,"UPDATE_MEDIA_RUNTIME")),E=1===t.interactionActions.length&&"BACK"===t.interactionActions[0].connectionType,f=void 0!==t.interactionActions.find(e=>u(e,"CONDITIONAL"));return function(e){let t=(0,i.wA)(),n=e.updateSelectionProperties,a=(0,nI.RU)(),[r,l]=o.useState(!1),s=(0,A.GS)(),c=(0,en.YT)(),d=c===en.Oz.SINGLE_COL,p=c===en.Oz.TWO_COL,u=!0===(0,C.E7)(e.maintained),_=(0,C.E7)(e.keyTrigger),g="ON_KEY_DOWN"===(0,C.E7)(e.interactionType),E="AFTER_TIMEOUT"===(0,C.E7)(e.interactionType),f="ON_MEDIA_HIT"===(0,C.E7)(e.interactionType),y=["MOUSE_IN","MOUSE_OUT","MOUSE_ENTER","MOUSE_LEAVE","MOUSE_DOWN","MOUSE_UP"].indexOf((0,C.E7)(e.interactionType)||"")>-1,h=o.createElement(n$,{className:eS.sQ,property:e.interactionType,onChange:a=>{ee.sn.start("interaction_details_changed"),n({interactionType:a}),t((0,L._P)({name:"Prototype Interaction Type Changed",params:{newType:a,oldType:(0,C._W)(e.interactionType,"MIXED")}})),"ON_KEY_DOWN"===a&&l(!0)},interactionContainsOpenLinkAction:e.interactionContainsOpenLinkAction,interactionContainsUpdateMediaRuntime:e.interactionContainsUpdateMediaRuntime,interactionOnlyContainsBack:e.interactionOnlyContainsBack,recordingKey:v.Pt(e,"interactionDropdown"),interactionsOnSelectedNodes:e.interactionsOnSelectedNodes}),b=s?d?o.createElement(eY.cS,{label:(0,T.tx)("proto.trigger"),input:h}):o.createElement("div",{className:eS.BX},h):o.createElement(U.fI,{className:m()(eS.SG,eS.QT)},h,o.createElement("div",{className:eS.LY},e.headerButtons)),N=o.createElement(o.Fragment,null,E&&nZ((0,T.tx)("proto.delay"),o.createElement(td.W4,{className:s?eS.Lp:eS.Zp,inputClassName:s?eS.Gl:void 0,dataTestId:"timeout-input",dispatch:t,value:e.timeout,onValueChange:e=>{n({transitionTimeout:e})},wheelMultiplier:a/1e3,scrubMultiplier:a/1e3,max:20,"data-tooltip-type":R.Ib.TEXT,"data-tooltip":(0,T.t)("proto.trigger.after_delay_timeout"),tooltipForScreenReadersOnly:!0,recordingKey:v.Pt(e,"timeoutInput")},s?o.createElement(nU.A,null):void 0),s,d),g&&nZ((0,T.tx)("proto.key"),o.createElement(nB,{onChange:e=>{n({keyTrigger:e})},value:_,shouldFocusKeyCaptureField:r,setShouldFocusKeyCaptureField:l}),s,d),f&&nZ((0,T.tx)("proto.time"),o.createElement(td.qd,{displayFractions:!0,className:eS.Ym,inputClassName:eS.vE,dataTestId:"mediaHitTime-input",dispatch:t,value:e.mediaHitTime,onValueChange:e=>{n({mediaHitTime:e})},wheelMultiplier:a/1e3,scrubMultiplier:a/1e3,max:3600,"data-tooltip-type":R.Ib.TEXT,"data-tooltip":(0,T.t)("proto.trigger.video_hit_time"),tooltipForScreenReadersOnly:!0,recordingKey:v.Pt(e,"mediaHitTimeInput")},s?o.createElement(nA,null):void 0),s,d),y&&nZ((0,T.tx)("proto.delay"),o.createElement(td.W4,{className:s?eS.Lp:eS.aq,inputClassName:s?eS.Gl:eS.p0,dataTestId:"duration-input",dispatch:t,value:u?e.interactionDuration:void 0,onValueChange:e=>{n(e&&e>0?{interactionMaintained:!0,interactionDuration:e}:{interactionMaintained:!1})},min:0,allowEmpty:!0,placeholder:(0,T.t)("proto.trigger.add_delay_placeholder"),wheelMultiplier:a/1e3,scrubMultiplier:a/1e3,"data-tooltip-type":R.Ib.TEXT,"data-tooltip":(0,T.t)("proto.trigger.after_delay_timeout"),tooltipForScreenReadersOnly:!0,recordingKey:v.Pt(e,"delayInput")},s?o.createElement(nU.A,null):void 0),s,d));return s?o.createElement("div",{className:p?eS.eU:void 0},b,N):o.createElement("div",{className:eS.cF},b,N)}({...e,updateSelectionProperties:a,interactionType:r,interactionContainsOpenLinkAction:_,interactionContainsUpdateMediaRuntime:g,interactionOnlyContainsBack:E,interactionContainsConditionalAction:f,timeout:l,maintained:c,interactionDuration:d,mediaHitTime:s,keyTrigger:p,interactionsOnSelectedNodes:n,recordingKey:v.Pt(e.recordingKey,en.Qe)})}let n0="prototype_interaction_edit_modal--contentContainer--bo2b4",n1="prototype_interaction_edit_modal--ui3TwoColContentContainer--x9vrG",n2="prototype_interaction_edit_modal--ui3TwoColContentContainerResizable--20T6v",n3="prototype_interaction_edit_modal--ui3WithStateMgmtVersionPanel--9HgX1",n4="prototype_interaction_edit_modal--ui3SingleColContentContainer--uF-ir",n6="prototype_interaction_edit_modal--dividerHorizontal--3wvnB",n5="prototype_interaction_edit_modal--ui3InteractionsPanelContentRight--bVfG8",n7="prototype_interaction_edit_modal--ui3InteractionsPanelContentRightResizable--cbK91";function n8(e){let{selectedInteractions:t,makeUpdateSelectionPropertiesForActionIndex:n,makeUpdateMultipleDestinationNodesForActionIndex:a,differentLengthActions:i,mergedActions:r}=(0,J.Ay)(e.category),l="NONE"!==(0,C.E7)(e.interactionType),s=void 0!==r.find(e=>"CONDITIONAL"===e.connectionType),{selectedActionIndex:c,onSelect:d}=e,p=(0,A.GS)(),u=(0,en.YT)(),_=u===en.Oz.SINGLE_COL,g=u===en.Oz.TWO_COL,{expandedRows:E,setExpandedRows:f,deleteButtonPressed:y,newActionIndexPath:h,resetNewActionIndexPath:b}=e;o.useEffect(()=>{h&&!h?.equals([])&&(p?d(h.path,!0):(f([...E,h]),d([],!1)),b())},[E,f,h,b,d,p]);let N=o.useCallback(e=>{E.find(t=>t.equals(e))?f(E.filter(t=>!t.equals(e))):f([...E,new tC.Op(e)])},[E,f]),I=o.useCallback(n=>{var a=n.dropItem;if((0,C.gl)(a)||(0,tC.qQ)(n.dragItem))return;let o=e.interactionsOnSelectedNodes;if(!o||!t)return;for(var i=0;i<t?.length;i++){let e=t[i];if(e&&e.actions){let o=e.actions,r=(0,tC.Vp)(o,c,E,a,n.position);if(r.newSelectedActionIndex&&g&&d(r.newSelectedActionIndex.path,!0),r.newActions&&(t[i].actions=r.newActions,p||d([],!1)),r.newExpandedRows){if(g){let e=[];r.newActions?.forEach((t,n)=>{"CONDITIONAL"===t.connectionType&&e.push(new tC.Op([n]))}),f(e)}else f(r.newExpandedRows)}}}let r=o.map(e=>t.find(t=>t.id===e.id)??e);w.Y5.updateSelectionProperties({prototypeInteractions:r})},[E,f,e.interactionsOnSelectedNodes,c,t,d,p,g]),x=m()({"prototype_interaction_edit_modal--panelUI3--WK3CN":p,"prototype_interaction_edit_modal--panelUI3TwoColumn--V5gi4":g});return o.createElement(ea.hh,null,o.createElement(U.Zk,{className:x},e.shouldHideTitle?null:o.createElement(U.fI,null,o.createElement(U.U8,{title:(0,T.t)("proto.interaction.interaction"),dataTooltipContentKey:ec,dataTooltipTimeoutDelay:50})),o.createElement("div",null,(l||p)&&o.createElement(o.Fragment,null,_&&o.createElement(o.Fragment,null,o.createElement(nQ,{category:e.category,recordingKey:en.dJ,headerButtons:o.createElement(o.Fragment,null)}),o.createElement("div",{className:"prototype_interaction_edit_modal--dividerHorizontalUI3--HMCeE"})),i&&o.createElement(eo.Y,{direction:"horizontal",padding:{horizontal:16,vertical:12}},o.createElement(U.UZ,null,(0,T.tx)("fullscreen.properties_panel.click_plus_to_replace_mixed_content"))),!i&&o.createElement(o.Fragment,null,r?.map((i,l)=>o.createElement(nV,{key:l,updateMultipleDestinationNodes:a(l),action:i,recordingKey:v.Pt(e.recordingKey,en.eG,l),updateSelectionProperties:n(l),onDeleteAction:()=>y(l),interactionType:e.interactionType,actionIndexPath:[l],numActions:r.length,isNestedInConditional:!1,isNarrowPanel:!s,stateManagementVersion:e.stateManagementVersion,selectedInteractions:t,onDrop:I,onSelect:e.onSelect,onExpand:N,selectedActionIndex:c,autoOpenVariablePicker:e.autoOpenVariablePicker,expandedRows:E,onNewActionAdded:e.onNewActionAdded,autoOpenExpressionBuilder:e.autoOpenExpressionBuilder,setAutoOpenExpressionBuilder:e.setAutoOpenExpressionBuilder})))))))}var n9=n(421757);function ae({transition:e,recordingKey:t,updateSelectionProperties:n,stateManagementVersion:a,selectedInteractions:r}){let l=(0,i.wA)(),s=(0,A.GS)(),c=(0,en.YT)()===en.Oz.SINGLE_COL,d=()=>{for(let t of(Q.az.trackDefinedEvent("prototype.state_management_noodle_upgraded",{num_interactions:r.length,preserve_scroll_position_value:!!e.preserveScroll}),r))(0,en.uU)(t.stateManagementVersion)&&t.id&&t.sourceNodeID&&nc.zZ.recordInteractionUpgraded(t.id,t.sourceNodeID);n({...(0,C.hS)(e.preserveScroll)&&(0,C.hS)(a)?{transitionResetScrollPosition:!e.preserveScroll}:{},stateManagementVersion:1}),l(F.F.enqueue({type:"state-management-updated",message:(0,T.t)("proto.state_management.visual_bell_updated_message"),button:{text:(0,T.t)("proto.state_management.visual_bell_update_all"),action:()=>{w.Y5.triggerActionInUserEditScope("update-interactions-state-management-on-page"),l(F.F.enqueue({type:"state-management-updated-all",message:(0,T.t)("proto.state_management.visual_bell_update_all_message")}))}}}))},p=()=>{Q.az.trackDefinedEvent("prototype.state_management_noodle_reverted",{num_interactions:r.length}),n({stateManagementVersion:0})},u=1===a?o.createElement(nb.jG,{className:"prototype_state_management_version_panel--revertButton--Svmg9",recordingKey:v.Pt(t,"revert-state-management-version"),onClick:p,"data-testid":"revert-state-management-button"},(0,T.tx)("proto.state_management.revert_controls")):o.createElement(nb.nR,{recordingKey:v.Pt(t,"update-state-management-version"),onClick:d},(0,T.tx)("proto.state_management.update_controls")),m=c?n9.IK:n9.$n,_=1===a?o.createElement(m,{variant:"secondary",onClick:p,recordingKey:v.Pt(t,"revert-state-management-version"),htmlAttributes:{"data-testid":"revert-state-management-button"}},(0,T.tx)("proto.state_management.revert_controls")):o.createElement(m,{variant:"primary",onClick:d,recordingKey:v.Pt(t,"update-state-management-version")},(0,T.tx)("proto.state_management.update_controls")),g=1===a?(0,T.tx)("proto.state_management.new_controls"):(0,T.tx)("proto.state_management.old_controls"),E=o.createElement("a",{target:"_blank",rel:"noopener",href:"https://help.figma.com/hc/articles/14397859494295",className:s?void 0:"prototype_state_management_version_panel--link--i5iDD blue_link--blueLink--9rlnd"},s?(0,T.tx)("proto.state_management.controls_help_link_new"):(0,T.tx)("proto.state_management.controls_help_link")),f=o.createElement("div",{className:"prototype_state_management_version_panel--versionControls--siAOf"},o.createElement(U.JU,{className:"prototype_state_management_version_panel--label--vvYMX"},g,E),o.createElement("div",{className:"prototype_state_management_version_panel--buttonContainer--rJZ-y"},u)),y=o.createElement("div",{className:"prototype_state_management_version_panel--containerUI3--V5tpG"},o.createElement(tr.J,null,g),E,_),h=o.createElement("div",{className:"prototype_state_management_version_panel--containerUI3TwoCol--AAp8u"},o.createElement("span",{className:"prototype_state_management_version_panel--labelWrapperUI3--37g5A"},o.createElement(tr.J,null,g)),o.createElement("span",{className:"prototype_state_management_version_panel--helpLinkWrapperUI3--BttuC"},E),_);return o.createElement(nl.p,{name:"prototype_state_management_version_panel"},o.createElement(U.Zk,{className:s?"prototype_state_management_version_panel--panelUI3--8-Db5":void 0},s?c?y:h:f))}let at="created_noodle";function an(e){let{shouldHideTitle:t=!1,category:n,newActionIndexPath:a}=e,i=(0,en.YT)()===en.Oz.TWO_COL,{detailProps:r,detailPropsMultipleActions:l,interactionsOnSelectedNodesAndComponents:s,updateSelectionProperties:c,selectedInteractions:d}=(0,J.Ay)(e.category);(0,et.h)(()=>{if(void 0!==ee.sn.get(at)){let e=ee.sn.stop(at);(0,Q.sx)(at,{elapsedMs:e,numConnectors:d.length},{forwardToDatadog:!0})}});let{showPanel:p,transition:u}=(0,en.n6)(r,l,d),{interactionType:m="NONE",interactionMaintained:_=!1,interactionDuration:g=.3,keyTrigger:E=nj,transitionTimeout:f=.8,mediaHitTime:y=0}=l.interactionEvent,h=(0,en.iC)(d),b=o.createElement(n8,{interactionType:m,timeout:f,mediaHitTime:y,maintained:_,interactionDuration:g,keyTrigger:E,recordingKey:v.Pt(e,en.Qe),shouldHideTitle:t,interactionsOnSelectedNodes:s,category:n,stateManagementVersion:h,autoOpenVariablePicker:e.autoOpenVariablePicker,newActionIndexPath:a,resetNewActionIndexPath:e.resetNewActionIndexPath,onNewActionAdded:e.onNewActionAdded,onSelect:e.onSelect,selectedActionIndex:e.selectedActionIndex,expandedRows:e.expandedRows,setExpandedRows:e.setExpandedRows,deleteButtonPressed:e.deleteButtonPressed,autoOpenExpressionBuilder:e.autoOpenExpressionBuilder,setAutoOpenExpressionBuilder:e.setAutoOpenExpressionBuilder});return o.createElement("div",null,b,!i&&p&&o.createElement(ae,{transition:u,recordingKey:v.Pt(e,"stateManagementVersionPanel"),updateSelectionProperties:c,stateManagementVersion:h,selectedInteractions:d}))}var aa=n(360803),ao=n(102165);function ai(e,t,n){let[a,o,i]=e.path,r=t[a].conditionalActions;if((0,C.hS)(r)){let e=r?.[o].actions?.length??0;if(i>=e){if(0===e){n([a],!0);return}n([a,o,i-1],!0);return}}}function ar(e,t,n){let a=e.path[0]>=t.length,o=0===e.path.length;if(a){n([t.length-1],!0);return}if(o){n([0],!0);return}}var al=n(146935),as=n(277687);let ac=()=>{r.glU.setSelectedInteractions([]),w.Y5.deselectProperty()},ad=(0,g.jz)("197px"),ap=(0,g.c8)("50%");function au(e){var t;return e&&a?.height<369?a=t={...a,height:369}:a??={width:440,height:e?369:320,leftWidthPct:45}}let am=o.memo(function(){let e=(0,i.d4)(af),t=(0,J.HS)(),{selectedInteractions:n}=(0,J.Ay)(t),a=n.length>0,[r,l]=o.useState(!1),s=v.v_(en.dJ,"keydown",t=>"Shift"!==t.key?v.aH:(l(!0),e&&a)?void 0:v.aH),c=v.v_(en.dJ,"keyup",t=>"Shift"!==t.key?v.aH:(l(!1),e&&a)?void 0:v.aH);if(o.useEffect(()=>(document.addEventListener("keydown",s),document.addEventListener("keyup",c),()=>{document.removeEventListener("keydown",s),document.removeEventListener("keyup",c)}),[s,c]),!e||!a)return null;let d=n.some(e=>e.actions?.some(e=>"CONDITIONAL"===e.connectionType));return o.createElement(a_,{category:t,containsConditional:d,pressingShiftKey:r,initialX:e.initialX,initialY:e.initialY,shouldPin:e.shouldPin,setPressingShiftKey:l})}),a_=o.memo(function({category:e,containsConditional:t,pressingShiftKey:n,initialX:p,initialY:u,shouldPin:h,setPressingShiftKey:x}){let C=(0,i.wA)(),[U,K]=o.useState(!1),[,F]=(0,f.fp)(ao.x),B=(0,o.useRef)(null),[W,G]=o.useState(!1),z=h||U,H=(0,A.GS)(),Y=(0,en.YT)(),q=Y===en.Oz.SINGLE_COL,X=Y===en.Oz.TWO_COL,[$,Q]=o.useState(new tC.Op(H?[0]:[])),{selectedInteractions:ee,differentLengthActions:et,interactionsOnSelectedNodesAndComponents:ea,mergedActions:eo,detailProps:ei,detailPropsMultipleActions:er,updateSelectionProperties:el}=(0,J.Ay)(e);var es=$.path.length>0?$:new tC.Op([0]);let ec=es.isConditional(),ed=(e,t)=>es=new tC.Op(e);H&&es.path[0]>=eo.length&&!ec?ar($,eo,ed):H&&ec&&ai($,eo,ed);let ep=o.useCallback((e,t)=>{t?Q(new tC.Op(e)):Q(new tC.Op([]))},[]);o.useEffect(()=>{if((0,_.vA)(eo.length>0,"the interactions panel should always have actions if rendered"),!H)return;let e=$.isConditional();if(e){if(e){ai($,eo,ep);return}}else{ar($,eo,ep);return}},[eo,$,H,ep]);let{shouldShowAdvancedPrototypingPaywall:eu,showAdvancedPrototypinglMultipleActionsModal:em}=(0,en.zt)(),{showPanel:e_,transition:eg}=(0,en.n6)(ei,er,ee),eE=(0,en.iC)(ee);var ef=[];X?eo.forEach((e,t)=>{"CONDITIONAL"===e.connectionType&&ef.push(new tC.Op([t]))}):eo.length<4&&eo.forEach((e,t)=>{ef.push(new tC.Op([t]))});let[ey,eh]=o.useState(ef),ev=o.useRef(null),eb=X&&(0,E.kc)().prototype_modal_resize,eN=n&&!z&&!W,eI=(0,g.jz)(al.prototypeInteractionModalWidth),eT=(0,g.jz)(al.prototypeInteractionModalExpandedWidth),eA=au(e_).width,ew=t?eT:eI;X&&(ew=eA);let[eS,eP]=o.useState(h),eC=(0,O._X)({subscribeToUpdates_expensive:!h}),eO=o.useCallback(()=>{U||(C((0,L._P)({name:"prototype_interaction_details_modal_dragged"})),K(!0))},[C,U,K]),ek=o.useMemo(()=>{let e=new b.Mi(p,u);if(h)return X?new b.Mi(e.x-(eA-eI),e.y):t?new b.Mi(e.x-(eT-eI),e.y):e;{let t=(0,O.$g)(eC,e);return new b.Mi(t.x-ew/2,t.y+30)}},[ew,p,u,t,h,eC,X,eT,eI,eA]);o.useEffect(()=>{if(!n)return;let e=e=>{!e.shiftKey&&n&&x(!1)};return document.addEventListener("mousemove",e),()=>{document.removeEventListener("mousemove",e)}},[n,x]),o.useEffect(()=>{F(eN)},[F,eN]),o.useEffect(()=>{eP(h)},[h]),o.useEffect(()=>()=>{C((0,L._P)({name:"prototype_interaction_details_modal_closed"}))},[C]);let eD=o.useRef(null),[eL,eM]=o.useState(!1);o.useEffect(()=>{eL&&(eM(!1),eD.current?.scrollToBottom())},[eL,eM,eD]);let[eR,eV]=o.useState(new tC.Op([])),eU=(0,D.q5)(),eK=o.useCallback((e,t)=>{let n=e.event.clipboardData||window.clipboardData;switch(t){case M.zy.COPY:case M.zy.CUT:{let a=JSON.parse(JSON.stringify(ee)),o=(0,aa.l)(a),i=S.fG(eU?.key||null,{prototypeInteractions:o});if(S.C4(n,i,""),t===M.zy.CUT){let e=[];for(let t of ee){let{sourceNodeID:n,id:a}=t;n&&a&&e.push(y.d({nodeID:n,interactionID:a}))}P.l7.user("delete-prototype-interactions",()=>r.glU.deleteInteractions(e)),w.Y5.deselectProperty()}e.accept()}}},[eU?.key,ee]),eF=o.useRef(!1),[eB,eW]=o.useState(!1),{firstVariableSetMode:eG,firstVariableSetID:ez}=e3(),eH=(0,k.p8)("currentPage"),eY=o.useCallback((e,t,n,a)=>{C((0,L._P)({name:"Prototype delete action",params:{action:e,source:"panel",connector_id:t,page_id:n,actionInConditionalAction:a}}))},[C]),eq=o.useCallback(e=>{if(ea&&ee){var t=!1,n=!1;if(eu)em();else{for(let i=0;i<ee?.length;i++){let r=ee[i],s=[];if(r&&r.actions){var a=0,o=[];for(let i=0;i<r.actions.length;i++){let c=r.actions[i];if(i!==e)void 0!==ey.find(e=>e.equals([i]))&&o.push(new tC.Op([a])),s.push(c),a++;else{let e=r.id?r.id:l.invalidGUID;eY(c.connectionType?c.connectionType:"NONE",(0,l.toString)(e),eH),i===r.actions.length-1&&(t=!0),2===r.actions.length&&(n=!0)}eh(o)}ee[i].actions=s}}let i=ea.map(e=>ee.find(t=>t.id===e.id)??e);w.Y5.updateSelectionProperties({prototypeInteractions:i}),n&&H&&eh([new tC.Op([0])]),t&&X&&Q(new tC.Op([e-1]))}}},[ea,ee,eu,em,ey,eH,eY,X,H]),eJ=o.useCallback(e=>{if(!ea||!ee)return;let t=e.isConditional();if(eu)em();else if(t){var n=!1,a=!1;let[t,d,p]=e.path;for(var o=[],i=0;i<ee.length;i++){let e=ee[i],u=e.actions;if(u){for(var r=[],s=0;s<u.length;s++)if(s!==t||"CONDITIONAL"!==u[s].connectionType)r.push(u[s]);else{var c=u[s].conditionalActions;if(!c)continue;let t=c.map((t,o)=>{if(o!==d)return t;{let o=t.actions;if(!o)return t;let i=o[p];if(i){let t=e.id?e.id:l.invalidGUID;eY(i.connectionType?i.connectionType:"NONE",(0,l.toString)(t),eH,!0)}let r=o.filter((e,t)=>t!==p);return n=o&&p===o.length-1,a=0===r.length,{...t,actions:r}}});u[s].conditionalActions=t,r.push(u[s])}e.actions=r,o.push(e)}}w.Y5.updateSelectionProperties({prototypeInteractions:o}),a?Q(new tC.Op([e.path[0]])):!a&&n&&Q(new tC.Op([e.path[0],d,p-1]))}else eq(e.path[0]);document.activeElement?.blur()},[ea,ee,eu,em,eq,eH,eY]),eX=m()({[n0]:!eb,"prototype_interaction_edit_modal--ui3TwoColScrollContainer--IWuQ4":X}),e$=o.createElement(N.P,{className:eX,useBottomPinning:!X,ref:eD,allowScrollAndZoomOver:!0,"data-not-draggable":!0},(0,E.kc)().prototype_ai_auto_adv_proto&&o.createElement(j,null),o.createElement(an,{shouldHideTitle:!0,recordingKey:X?v.Pt("leftCol",en.dJ):en.dJ,category:e,autoOpenVariablePicker:eF,newActionIndexPath:eR,resetNewActionIndexPath:()=>{eV(new tC.Op([]))},onNewActionAdded:e=>{eV(e)},selectedActionIndex:$,onSelect:ep,expandedRows:ey,setExpandedRows:eh,deleteButtonPressed:eq,autoOpenExpressionBuilder:eB,setAutoOpenExpressionBuilder:eW})),ej=1===ee.length,eZ=ee[0],eQ=eZ.actions&&eZ.actions.length<2,e0=eZ.actions&&1===eZ.actions.length&&eZ.actions[0],e1=!e0||"NONE"===e0.connectionType,e2=ej&&eQ&&e1;var e4=l.invalidGUID;let e6=o.createElement(tM,{skipPaywall:e2,addButtonPressed:e=>{if(!ee)return;if(("CONDITIONAL"===e.connectionType||"SET_VARIABLE"===e.connectionType||"SET_VARIABLE_MODE"===e.connectionType)&&eu){em();return}"SET_VARIABLE_MODE"===e.connectionType&&(e.targetVariableSetID=ez,e.targetVariableModeID=eG),"SET_VARIABLE"===e.connectionType&&eF&&(eF.current=!0),H&&"CONDITIONAL"===e.connectionType&&eW(!0);let t=!1;var n=null,a=H&&!et&&!e2&&ee[0].actions&&1===ee[0].actions.length;if(et||e2)for(var o=0;o<ee.length;o++){let t=ee[o];t.actions=[e];let n=t.id,a=t.sourceNodeID;(0,en.uU)(t.stateManagementVersion)&&n&&a&&nc.zZ.recordInteractionUpgraded(n,a),t.stateManagementVersion=1}else for(var o=0;o<ee.length;o++){let a=ee[o];if(a.actions){if((0,en.uU)(a.stateManagementVersion)&&(a.id&&a.sourceNodeID&&nc.zZ.recordInteractionUpgraded(a.id,a.sourceNodeID),a.actions?.forEach(e=>{e.transitionResetScrollPosition=!e.transitionPreserveScroll})),X){if($.isConditional()){let n=$.path[0],o=$.path[1],i=$.path[2],r=a.actions?.[n],l=r.conditionalActions?.[o].actions?.length??0;n===a.actions.length-1&&i===l-1&&(t=!0),r.conditionalActions?.[o].actions?.splice(i+1,0,e)}else{let n=$.path[0]+1;n===a.actions.length&&(t=!0),a.actions?.splice(n,0,e)}}else a.actions?.push(e);e4=a.id?a.id:l.invalidGUID}else a.actions=[e],e4=a.id?a.id:l.invalidGUID;if(a.stateManagementVersion=1,X){let e=[...$.path];e[e.length-1]+=1,n=new tC.Op([...e])}else n=new tC.Op([a.actions.length-1])}let i=ea.map(e=>ee.find(t=>t.id===e.id)??e);if(w.Y5.updateSelectionProperties({prototypeInteractions:i}),a||X){var r=[];i[0].actions?.forEach((e,t)=>{"CONDITIONAL"===e.connectionType&&r.push(new tC.Op([t]))}),eh(r)}eM&&(!X||t)&&eM(!0),eV&&eV(n),C((0,L._P)({name:"Prototype add action",params:{action:e.connectionType?e.connectionType:"NONE",source:"panel",connector_id:(0,l.toString)(e4),page_id:eH}}))},renderButton:!0,recordingKey:en.dJ,isNestedInConditional:X&&$.isConditional()}),e5=ee.some(e=>void 0!==e.actions&&e.actions?.length>1),e7=!$.isConditional()&&!e5,e8=o.createElement(s.K,{onClick:()=>eJ($),"aria-label":(0,T.t)("proto.prototype_panel.delete"),disabled:e7,recordingKey:v.Pt(en.dJ,"actionDeleteButton"),htmlAttributes:{"data-tooltip":(0,T.t)("proto.prototype_panel.delete"),"data-tooltip-type":R.Ib.TEXT}},o.createElement(I.U,{svg:nM.A},o.createElement(d.O,null))),e9=o.createElement("div",{className:"prototype_interaction_edit_modal--ui3FooterContainer--oYsXM"},e6," ",e8),te=o.createElement(ex.c.Provider,{value:ex.P.LEFT},o.createElement("div",{className:eb?"prototype_interaction_edit_modal--ui3InteractionsPanelContentLeftResizable--16pLu":"prototype_interaction_edit_modal--ui3InteractionsPanelContentLeft--UYWSG",ref:ev,style:eb?{width:`${au(e_).leftWidthPct}%`}:void 0},o.createElement(nQ,{category:e,recordingKey:en.dJ,headerButtons:o.createElement(o.Fragment,null)}),o.createElement("div",{className:n6}),e$,o.createElement("div",{className:n6}),o.createElement(o.Fragment,null,e9))),tt=eo.length>0?o.createElement(ex.c.Provider,{value:ex.P.RIGHT},o.createElement(N.P,{allowScrollAndZoomOver:!0,"data-not-draggable":!0,className:eb?"prototype_interaction_edit_modal--ui3ScrollContainerRight--LJr-n":void 0},o.createElement(ag,{selectedActionIndex:es,handleExpandUI3:(e,t)=>{!t&&eo.length>1?eh(ey.filter(t=>!t.equals(e))):ey.find(t=>t.equals(e))||eh([...ey,new tC.Op(e)])},autoOpenVariablePicker:eF,autoOpenExpressionBuilder:eB,setAutoOpenExpressionBuilder:eW}))):null,tn=o.useRef(ad),[,ta]=(0,c.i)({disabled:!eb,onDragStart(){ev.current&&(tn.current=ev.current.getBoundingClientRect().width)},onDrag(e){if(ev.current&&tn.current){let t=au(e_),n=tn.current+e.delta.x,o=n/t.width*100;n<ad?o=ad/t.width*100:o>ap&&(o=ap),ev.current.style.width=`${o}%`,a={...t,leftWidthPct:o}}}}),to=m()({"prototype_interaction_edit_modal--ui3TwoColInnerContainer--ZvJj2":!0,"prototype_interaction_edit_modal--ui3TwoColInnerContainerResizable--5GNsT":eb}),ti=X?o.createElement("div",{className:"prototype_interaction_edit_modal--ui3TwoColPanelContainer--e8MK8"},o.createElement("div",{className:to},te,o.createElement("div",{className:"prototype_interaction_edit_modal--dividerVertical--Noi1C"},eb&&o.createElement("div",{...ta({className:"prototype_interaction_edit_modal--verticalResizeHandle--xkc8V"})})),tt),e_&&o.createElement(ae,{transition:eg,recordingKey:v.Pt(en.dJ,"stateManagementVersionPanel"),updateSelectionProperties:el,stateManagementVersion:eE,selectedInteractions:ee})):e$;return o.createElement(Z.ht.Provider,{value:o.useMemo(()=>({autoCloseOnScroll:!z}),[z])},o.createElement(V.vL,{name:"Prototype Draggable modal",className:"prototype_interaction_edit_modal--prototypeDraggableModal--njJ6A",handleClipboard:eK},o.createElement(ne.vx,{ref:B,dataTestId:"in-context-prototype-interaction-edit-modal",title:t=>o.createElement("div",{className:"prototype_interaction_edit_modal--onboardingRow--UlvE0"},o.createElement(aE,{category:e,recordingKey:en.dJ,createActionTrigger:e6,closeButton:t})),containerClassName:m()({[n0]:!eb,[n1]:X&&!(0,E.kc)().prototype_modal_resize,[n2]:eb,[n3]:!(0,E.kc)().prototype_modal_resize&&X&&e_,[n4]:q,"prototype_interaction_edit_modal--abovePropertiesPanel--hFejC":eS,"prototype_interaction_edit_modal--belowPropertiesPanel--f1Jfl":!eS,"prototype_interaction_edit_modal--modalExpandedWidth--IDl6k":t&&!H,"prototype_interaction_edit_modal--modalWidth--cCH7B":!t&&!H,"prototype_interaction_edit_modal--hideModal--RSp-R":eN}),contentContainerClassName:m()({[n0]:!eb,[n1]:X&&!(0,E.kc)().prototype_modal_resize,[n2]:eb,[n3]:!(0,E.kc)().prototype_modal_resize&&X&&e_,[n4]:q}),headerClassName:"prototype_interaction_edit_modal--multilineInteractionDetailsHeader--OE8Wr",allowWheelPassthrough:!0,initialPosition:ek,headerSize:"small",onClose:ac,recordingKey:"interactionDetailsModal",arrowPosition:h?void 0:ne.F_.TOP,arrowRelativeX:h?void 0:ew/2,onDragStart:()=>{eP(!0),eO()},canRenderBelowViewport:!0,allowAutoExpanding:!0,dragHeaderOnly:!0,onFocus:()=>G(!0),allowResizeHeight:eb,allowResizeWidth:eb,fullFrame:eb,minWidth:eb?440:void 0,minHeight:eb?e_?369:320:void 0,maxWidth:eb?800:void 0,maxHeight:eb?800:void 0,initialHeight:eb?au(e_).height-ne.uF:void 0,initialWidth:eb?au(e_).width:void 0,onResize:eb?e=>{a={...au(e_),height:e.height,width:e.width}}:void 0},H?ti:e$)))});function ag({selectedActionIndex:e,autoOpenVariablePicker:t,handleExpandUI3:n,autoOpenExpressionBuilder:a,setAutoOpenExpressionBuilder:i}){let r=(0,J.HS)(),{selectedInteractions:l,mergedActions:s,makeUpdateSelectionPropertiesForActionIndex:c,makeUpdateMultipleDestinationNodesForActionIndex:d,detailPropsMultipleActions:p}=(0,J.Ay)(r),u=e.path[0],m=d(u),_=c(u),g=(0,en.iC)(l),f=p.interactionEvent.interactionType??"NONE",y=(0,E.kc)().prototype_modal_resize;if(e.isConditional()){let n=e.path[1],r=e.path[2],c=s[u],d=((0,C.hS)(c.conditionalActions)&&c.conditionalActions?c.conditionalActions:[])[n],p=d.actions?.[r];return p?o.createElement("div",{className:y?n7:n5},o.createElement(nV,{key:r,updateMultipleDestinationNodes:m.appendActionIndex(n).appendActionIndex(r),action:p,recordingKey:v.Pt(en.dJ,en.Qe,en.eG,u),updateSelectionProperties:_.appendActionIndex(n).appendActionIndex(r),onDeleteAction:h.lQ,interactionType:f,actionIndexPath:e.path,numActions:s.length,isNestedInConditional:!0,stateManagementVersion:g,selectedInteractions:l,onDrop:h.lQ,onSelect:h.lQ,onExpand:h.lQ,selectedActionIndex:e,expandedRows:[e],autoOpenVariablePicker:t,autoOpenExpressionBuilder:a,setAutoOpenExpressionBuilder:i,isNarrowPanel:!0})):null}return o.createElement("div",{className:y?n7:n5},o.createElement(nV,{key:u,updateMultipleDestinationNodes:m,action:s[u],recordingKey:v.Pt(en.dJ,en.Qe,en.eG,u),updateSelectionProperties:_,onDeleteAction:h.lQ,interactionType:f,actionIndexPath:[u],numActions:s.length,isNestedInConditional:!1,stateManagementVersion:g,selectedInteractions:l,onDrop:h.lQ,onSelect:h.lQ,onExpand:n,selectedActionIndex:e,autoOpenVariablePicker:t,expandedRows:[e],autoOpenExpressionBuilder:a,setAutoOpenExpressionBuilder:i,isNarrowPanel:!0}))}function aE({category:e,recordingKey:t,closeButton:n,createActionTrigger:a}){let l=(0,i.wA)(),{selectedInteractions:c}=(0,J.Ay)(e),d=(0,en.YT)(),u=d===en.Oz.TWO_COL,m=d===en.Oz.SINGLE_COL,_=(()=>{if(1!==c.length)return 0;let e=c[0],t={nodeID:e.sourceNodeID,interactionID:e.id};return r.X3B.getMatchingInteractions(y.d(t)).length})(),g=(0,E.kc)().prototype_hide_matching_noodles&&1===c.length&&_>1&&o.createElement(s.K,{actionOnPointerDown:!0,onClick:()=>{if(1!==c.length)return;let e=c[0],t={nodeID:e.sourceNodeID,interactionID:e.id},n=r.X3B.getMatchingInteractions(y.d(t));r.glU.selectInteractionsAndSourceNodes(n);let a=(0,T.t)("proto.interaction_details.visual_bell.selected_n_matching_interactions",{total_num_interactions:n.length});w.Y5.showVisualBellWithUndo("selected-matching-noodles",a,!1),l((0,L._P)({name:"prototype_select_matching_interactions",params:{num_connectors:n.length}}))},"aria-label":(0,T.t)("proto.interaction_details.select_n_matching_interactions",{total_num_interactions:_}),htmlAttributes:{tabIndex:-1,onMouseEnter:()=>{if(1!==c.length)return;let e=c[0],t={nodeID:e.sourceNodeID,interactionID:e.id},n=r.X3B.getMatchingInteractions(y.d(t));r.glU.hoverInteractions(n)},onMouseLeave:()=>r.glU.hoverInteractions([]),"data-tooltip":(0,T.t)("proto.interaction_details.select_n_matching_interactions",{total_num_interactions:_}),"data-tooltip-type":R.Ib.TEXT}},o.createElement(I.U,{svg:as.A},o.createElement(p.A,null))),f=o.createElement(nQ,{category:e,recordingKey:t,headerButtons:o.createElement(o.Fragment,null,g,a,n)}),h=o.createElement("div",{className:"prototype_interaction_edit_modal--ui3ExpandedModalHeader--Ka7aM"},(0,T.tx)("proto.interaction_details.header"),o.createElement("div",{className:"prototype_interaction_edit_modal--ui3ExpandedModalHeaderButtons--UqykU"},g,n)),v=o.createElement(o.Fragment,null,(0,T.tx)("proto.interaction_details.header"),o.createElement("div",{className:"prototype_interaction_edit_modal--ui3CollapsedModalHeaderButtons--7yPuD"},g,a,n));return u?h:m?v:f}let af=e=>e.pickerShown?.id===x.o$?e.pickerShown:null},304657:(e,t,n)=>{let a,o,i,r;n.d(t,{k:()=>D});var l=n(411855),s=n(188507),c=n(243742),d=n(752553),p=n(572206),u=n(47506),m=n(941381),_=n(225266),g=n(738269),E=n(902139),f=n(672517),y=n(809831),h=n(728325),v=n(813648),b=n(318812),N=n(239671),I=n(231472),T=n(992303),x=n(384775),A=n(818198),w=n(760445),S=n(76158),P=n(746806),C=n(721950),O=n(301280),k=n(297757);function D(){let e=(0,s.d4)(e=>e.universalInsertModal),t=(0,s.d4)(e=>e.mirror.appModel.showUi),{fdPreviewResource:n,initialFdView:D,initialFdResourceTab:M}=e,R=n?.type,{activeTab:V,setCurrentViewOrTab:U,currentView:K}=function(){let{initialFdResourceTab:e,initialFdView:t}=(0,s.d4)(e=>e.universalInsertModal),[n,a]=l.useState(e||o||S.s.COMPONENT),[c,d]=l.useState(e===S.s.PLUGIN&&t||i||"recents_and_saved"),[p,u]=l.useState(e===S.s.WIDGET&&t||r||"recents_and_saved"),m=l.useCallback(e=>{e===S.s.PLUGIN?i=c:e===S.s.WIDGET&&(r=p)},[c,p]),_=n===S.s.PLUGIN?c:p,g=l.useCallback(({newView:e,newTab:t})=>{let i=t===S.s.PLUGIN?c:t===S.s.WIDGET?p:void 0;e&&i!==e&&(m(n),(t||n)===S.s.PLUGIN?d(e):(t||n)===S.s.WIDGET&&u(e)),t&&n!==t&&(m(n),o=n,a(t))},[n,c,p,m]);return l.useEffect(()=>{g({newView:t,newTab:e})},[e,t]),l.useEffect(()=>{o=n,m(n)},[n,m]),l.useMemo(()=>({activeTab:n,currentView:_,setCurrentViewOrTab:g}),[n,_,g])}(),F="ui3"===(0,c.DP)().version,B=(0,s.wA)(),W=l.useRef(null),[G]=l.useState(D?"":a||"");l.useEffect(()=>{(0,u.YQ)({id:"figma-inserts-opened"}),(0,u.YQ)({id:T.ko})},[]);let z=(0,x.Au)();l.useEffect(()=>{z&&B(E.eo())}),l.useEffect(()=>{a=G},[G]),l.useEffect(()=>B(_.aq()),[B]),(0,d.IT)((0,m.se)()),(0,d.IT)((0,m.fd)()),l.useEffect(()=>{U({newTab:R||M})},[M,R]);let H=(0,y.E3)(),[Y,q]=l.useState(),J=F?w.tS:w.Zv;(0,v.J$)(e.pinned===I.t.NOT_PINNED,W,J);let X=(0,w.CK)(),$=(0,w.CG)(),{bounds:j,showLeftPinBound:Z,setShowLeftPinBound:Q,shouldSnapToPosition:ee,setPinned:et}=(0,A.C)(L,q,e.pinned,X,$,e.showing),en=(0,v.LR)(),ea=(0,b.Um)(),eo=l.useCallback(e=>{e.stopPropagation(),ea&&B(g.oB())},[B,ea]),ei=l.useMemo(()=>({activeTab:V,viewResource:e=>{B(E.IN({fdPreviewResource:e}))},closeResource:()=>{B(E.IN({fdPreviewResource:void 0}))},closeModal:en,pinModal:et,setCurrentViewOrTab:U,currentView:K}),[V,en,et,B,U,K]),er=l.useCallback(e=>{h.VU.get("set-tool-default","toolbar")(),B(E.jy({pinned:I.t.PINNED})),eo(e)},[B,eo]),el=l.useCallback(()=>{Z&&et()},[Z,et]);if(!e.showing)return null;let es={height:"auto",overflow:"hidden"};return(e.pinned!==I.t.NOT_PINNED||F||(es.borderTopLeftRadius="0px"),H===N.nT.DevHandoff)?null:l.createElement(f.fu,{name:"universal-insert"},e.pinned===I.t.PINNED&&Z&&l.createElement("div",{className:O.kV,style:{left:X.x,top:X.y,width:w.AN}}),l.createElement(w.B0.Provider,{value:ei},l.createElement(P.vx,{initialPosition:Y||new p.Mi(e.initialX,e.initialY),initialWidth:w.AN,bounds:j,onEnterBound:()=>{F||Q(!0)},onLeaveBound:()=>{Q(!1)},canResetPosition:ee,onClose:en,onDragStart:er,onDragEnd:el,minTopMargin:t?void 0:0,onClick:eo,ref:W,containerClassName:e.pinned===I.t.PINNED_AND_DOCKED_LEFT?k.gC:k.jT,frameStyle:es},l.createElement(C.z,null))))}function L(){return{x:-w.AN,y:0,width:2*w.AN+w.wR,height:window.innerHeight}}},929018:(e,t,n)=>{n.d(t,{H:()=>v});var a=n(411855),o=n(188507),i=n(776250),r=n(737947),l=n(915440),s=n(711525),c=n(768137),d=n(946689),p=n(322611),u=n(762638),m=n(939863),_=n(662275),g=n(279453),E=n(802026),f=n(558867),y=n(211789),h=n(15344);function v({isInFileBrowser:e=!1,org:t,switchAccountsSection:n,fileKey:v}){let b=(0,o.wA)(),N=(0,l.Rs)(g.M9q,{orgId:t.id}),I="loaded"===N.status,T=I?N.data.currentUser.baseOrgUser?.isMfaRestricted:void 0,x=!0===(0,s.oA)(T),A=I&&N.data.currentUser.baseOrgUser?.org?.mfaRequired===E.CT.GUESTS,w=(0,l.Rs)(g.NSA,{fileKey:v??""},{enabled:!!v}),S="loaded"===w.status&&w.data.file?.canRead;function P(){return a.createElement("div",{className:u.cx.pb16.$},a.createElement(f.Ro,{entity:t,size:64}))}return A&&(!x||S)?a.createElement("div",{className:u.cx.zIndex0.$},a.createElement(p.u,{headerImage:a.createElement(P,null),headerText:(0,m.t)("mfa_required_modal.mfa_enabled.title"),secondaryText:e?(0,m.t)("mfa_required_modal.mfa_enabled.subtile_for_file_browser"):(0,m.t)("mfa_required_modal.mfa_enabled.subtile"),unblockFileBrowserSidebar:e},a.createElement(c.vd,{className:h.lI,type:"submit",onClick:()=>{r.Ay.reload("User set up MFA. Reloading to reflect changes.")}},(0,m.tx)("mfa_required_modal.mfa_enabled.reload")))):a.createElement("div",{className:u.cx.zIndex0.$},a.createElement(p.u,{headerImage:a.createElement(P,null),headerText:(0,m.t)("mfa_required_modal.title",{orgName:t.name}),secondaryText:(0,m.t)("mfa_required_modal.subtitle",{orgName:t.name}),unblockFileBrowserSidebar:e},a.createElement(c.vd,{className:h.lI,type:"submit",onClick:()=>{(0,i.sx)("Two-factor setup started"),b((0,_.to)({type:y.J}))}},(0,m.tx)("mfa_required_modal.cta")),a.createElement(d.CY,{className:h.CU,target:"_blank",href:"https://help.figma.com/hc/en-us/articles/360039817634-Enable-two-factor-authentication-2FA",trusted:!0},(0,m.tx)("general.learn_more")),n))}}}]);

//# debugId=3479f7ff-37f2-5d04-ae27-fda4aee535a9

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/b9ca3f22607a27e58de5ca1a93537aea203af769/fullscreen-d7e1ea6acbe082c8.min.js.map